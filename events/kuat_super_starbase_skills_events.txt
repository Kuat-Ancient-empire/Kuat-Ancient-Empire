namespace = kuat_starbase_skills

fleet_event = {
	id = kuat_starbase_skills.1
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { NOT = { has_fleet_flag = kuat_mega_starbase_stormed_activated } }
			set_fleet_flag = kuat_mega_starbase_stormed_activated
			if = {
				limit = { has_fleet_flag = kuat_mega_starbase_stormed_activated }
				kuat_battle_clear_all_storm = yes
				random_owned_ship = {
					limit = { kuat_is_mega_starbase = yes }
					kuat_battle_spawn_system_suppliment_storm = yes	
				}
			}
		}
		else = {
			remove_fleet_flag = kuat_mega_starbase_stormed_activated
			random_owned_ship = {
				limit = { kuat_is_mega_starbase = yes }
				every_cosmic_storm = { 
					limit = { has_storm_flag = storm_kuat_support_nexus_storm_random_list_@prev } 
					destroy_cosmic_storm = yes 
				}	
			}
		}
	}
}

fleet_event = {
	id = kuat_starbase_skills.2
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		any_owned_ship = {
			any_cosmic_storm = {
				has_storm_flag = storm_kuat_support_nexus_storm_random_list_@prev
			}
		}
	}

	immediate = {
		random_owned_ship = {
			every_cosmic_storm = { 
				limit = { has_storm_flag = storm_kuat_support_nexus_storm_random_list_@prev } 
				every_system_within_storm = { set_timed_star_flag = { flag = kuat_mega_starbase_stormed_larged days = 360 } }
			}	
		}
	}
}

fleet_event = {
	id = kuat_starbase_skills.3
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		any_owned_ship = { kuat_is_mega_starbase = yes }
	}

	immediate = {
		create_starbase_super_invasion_battle_fleet = yes
	}
}

fleet_event = {
	id = kuat_starbase_skills.4
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		any_owned_ship = { kuat_is_mega_starbase = yes }
	}

	immediate = {
		create_starbase_gunpower_invasion_battle_fleet = yes
	}
}

fleet_event = {
	id = kuat_starbase_skills.5
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		any_owned_ship = { kuat_is_mega_starbase = yes }
	}

	immediate = {
		create_starbase_carrier_invasion_battle_fleet = yes
	}
}

fleet_event = {
	id = kuat_starbase_skills.6
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		any_owned_ship = { kuat_is_mega_starbase = yes }
	}

	immediate = {
		create_starbase_missle_invasion_battle_fleet = yes
	}
}
namespace = executor_build

##########################
####### 开局初始化 ########
##########################
country_event = {
	id = executor_build.0
	hide_window = yes
	is_triggered_only = yes
	trigger = { is_same_value = event_target:global_event_country }
	immediate = { 
		event_target:global_event_country = { 
			set_variable = { which = kuat_shipyard_buillding_queue_selection value = 1 } 
		}
		set_global_flag = install_kuat_mod 
		set_global_flag = ag_spawnsystem_gatekeeper_mid_game
		every_country = {
			if = {
				limit = { is_ai = yes OR = { 
					kuat_is_enable_apocalyptic_origin = yes 
					has_origin = origin_eternalthrone
					has_origin = origin_kuat_shadow
				} }
				set_origin = origin_default
			}
			if = {
				limit = { kuat_is_enable_eternal_origin = yes kuat_is_forbidden_ee_production_var = no }
				every_owned_planet = {
					limit = {
						OR = {
							NOT = { is_variable_set = kuat_building_producation_index }
							NOT = { is_variable_set = kuat_planet_free_houses_average_int }
							NOT = { check_variable = { which = kuat_building_producation_index value = value:kuat_pop_amount } }
							NOT = { check_variable = { which = kuat_planet_free_houses_average_int value = trigger:free_housing } }
						}
					}
					set_variable = { which = kuat_building_producation_index value = value:kuat_pop_amount }
					set_variable = { which = kuat_planet_free_houses_average_int value = trigger:free_housing }
					multiply_variable = { which = kuat_planet_free_houses_average_int value = 0.01 }
					set_variable = { which = kuat_planet_house_average_int value = kuat_planet_free_houses_average_int }
					if = { limit = { check_variable = { which = kuat_planet_house_average_int value > 0 } } set_variable = { which = kuat_planet_pop_assembly_average_int value = kuat_planet_house_average_int } }
					else = { set_variable = { which = kuat_planet_pop_assembly_average_int value = 0 } }
				} 
				every_owned_planet = {
					limit = { 
						is_colony = yes 
						has_building = building_eternal_pop_assembly
					}
					set_planet_flag = can_organic_assemble_flag
					if = {
						limit = { check_modifier_value = { modifier = bonus_pop_growth_mult value > 1 } }
						kuat_battle_clear_ship_modifier = { modifier = bonus_pop_growth_mult subtract = 1 DAYS = 30 }
					}
					if = {
						limit = { check_modifier_value = { modifier = planet_pop_assembly_mult value > 1 } }
						kuat_battle_clear_ship_modifier = { modifier = planet_pop_assembly_mult subtract = 1 DAYS = 30 }
					}
					if = {
						limit = { check_modifier_value = { modifier = planet_pop_assembly_add value > 0 } }
						kuat_battle_clear_ship_modifier = { modifier = planet_pop_assembly_mult DAYS = 30 }
					}
				}
			}
		}
		random_country = {
			limit = { is_ai = no }
			save_global_event_target_as = kuat_player_target_country
			owner_main_species = { save_global_event_target_as = kuat_player_target_species }
		}
		if = {
			limit = { any_country = { is_ai = no kuat_is_enable_apocalyptic_origin = yes } }
			every_playable_country = {
				limit = { is_ai = no kuat_is_enable_apocalyptic_origin = yes }
				set_country_flag = has_origin_kuat_shadow
				remove_country_flag = human_1 remove_country_flag = human_2 set_country_flag = custom_start_screen
				country_event = { id = kuat_origin.1 }
				country_event = { id = kuat_diplomatic.1 days = 15 }
			}
		}
		if = {
			limit = { any_country = { is_ai = no kuat_is_enable_shadow_origin = yes } }
			kuat_system_initial_creating = yes
			every_playable_country = { 
				if = {
					limit = { 
						is_ai = no 
						kuat_is_enable_shadow_origin = yes 
						kuat_is_enable_apocalyptic_origin = no 
					}
					remove_country_flag = human_1 remove_country_flag = human_2 
					set_country_flag = custom_start_screen
					set_country_flag = origin_kuat_shadow_flag 
					create_kuat_shipyard_country = yes
				}
				country_event = { id = executor_build.2 } 
				country_event = { id = executor_build.3 days = 30 } 
			}
		}
		else_if = {
			limit = { any_country = { is_ai = no kuat_is_enable_eternal_origin = yes } }
			every_playable_country = {
				limit = { is_ai = no kuat_is_enable_eternal_origin = yes }
				remove_country_flag = human_1 remove_country_flag = human_2 set_country_flag = custom_start_screen
			}
		}
		else = { random_country = { limit = { is_ai = no } create_kuat_shipyard_country = yes } }
		if = {
			limit = { any_country = { OR = { kuat_is_enable_apocalyptic_origin = yes kuat_is_enable_eternal_origin = yes } } }
			every_megastructure = {
				limit = { is_megastructure_type = exe_outer_gate_disable }
				upgrade_megastructure_to = exe_outer_gate finish_upgrade = yes
			}
			every_playable_country = {
				limit = { is_ai = no kuat_is_enable_apocalyptic_origin = yes }
				set_country_flag = can_pass_by set_country_flag = can_pass_inner_by
			}
			every_megastructure = { limit = { is_megastructure_type = exe_outer_gate } activate_gateway = this }
		}
		every_country = { fire_on_action = { on_action = VOP_on_game_start_country } }
	}
}

country_event = {
	id = executor_build.1
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	trigger = { is_ai = no kuat_is_enable_shadow_origin = yes }
	immediate = { 
		set_country_flag = executorbuilding
		random_system = {
			limit = {
				has_owner = no
				distance = {
					source = root.capital_scope
					type = euclidean
					min_distance >= 100
					max_distance <= 200
				}
				kuat_is_create_system = no
			}
			spawn_megastructure = {
				type = exe_outer_gate_disable
				orbit_angle = 225
				orbit_distance = 200
				planet = system_star
				init_effect = { save_global_event_target_as = exe_outer_gate_disable }
			}
			while = { count = 15 create_ambient_object = { type = "large_debris_object" location = solar_system } }
			while = { count = 10 create_ambient_object = { type = "medium_debris_01_object" location = solar_system } }
			while = { count = 20 create_ambient_object = { type = "medium_debris_02_object" location = solar_system } }
			while = { count = 30 create_ambient_object = { type = "small_debris_object" location = solar_system } }
			set_star_flag = kuat_exe_invasion_gate_system set_star_flag = exe_outer_gate_disable_system
		}
	}
}

country_event = {
	id = executor_build.2
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		is_ai = no
		kuat_is_enable_shadow_origin = yes
	}
	immediate = {
		every_owned_planet = {
			limit = { has_planet_flag = kuat_shadow_planet_started }
			solar_system = { generate_home_system_resources = yes }
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
		}
	}
}

######################
### 你还想不想开门了 ##
######################
country_event = {
	id = executor_build.23
	title = "executor_build.23.name"
	desc = "executor_build.23.desc"
	diplomatic = yes
	fire_only_once = yes
	picture_event_data = { room = frozen_planet_room }
	custom_gui = "kuat_event_window"
	custom_gui_option = "kuat_event_option"
	trigger = {
		is_ai = no
		has_technology = tech_sensors_2
		kuat_is_enable_shadow_origin = yes 
		NOT = { has_global_flag = kuat_outgate_enable }
	}
	mean_time_to_happen = { 
		years = 4 
		modifier = { factor = 0.75 years_passed > 20 }
		modifier = { factor = 0.5 years_passed > 25 }
		modifier = { factor = 0.25 years_passed > 30 }
	}
	immediate = {
		if = {
			limit = { NOT = { has_event_chain = ag_legacy_stroy_chain } }
			begin_event_chain = { event_chain = ag_legacy_stroy_chain }
		}
		if = {
			limit = { any_system_within_border = {
				is_capital_system = no
				any_system_planet = { 
					is_planet_class = pc_frozen 
					NOT = { exists = archaeological_site }
				}
			} }
			random_system_within_border = {
				limit = {
					is_capital_system = no
					any_system_planet = { 
						is_planet_class = pc_frozen 
						NOT = { exists = archaeological_site }
					}
				}
				random_system_planet = {
					limit = { 
						is_planet_class = pc_frozen 
						NOT = { exists = archaeological_site }
					}
					save_global_event_target_as = has_kuat_lagacy_9
					create_archaeological_site = kuat_lagacy_9
				}
			}
		} else = {
			random_planet_within_border = {
				limit = {
					is_ringworld = no
					is_star = no
					is_colony = no
					is_colonizable = no
					is_asteroid = no
					NOT = { exists = archaeological_site }
				}
				change_pc = pc_frozen
				save_global_event_target_as = has_kuat_lagacy_9
				create_archaeological_site = kuat_lagacy_9
			}
		}
	}
	option = { name = "executor_build.23.a" }
}

fleet_event = {
	id = executor_build.30
	hide_window = no
	title = "executor_build.30.title"
	desc = "executor_build.30.desc"
	picture = GFX_evt_frozen
	show_sound = event_wind_ruins
	is_triggered_only = yes
	archaeology = yes
	immediate = { from = { set_site_progress_locked = yes } }

	after = { from = { set_site_progress_locked = no } }
	
	option = { name = executor_build.30.a }
}

fleet_event = {
	id = executor_build.31
	hide_window = no
	title = "executor_build.31.title"
	desc = "executor_build.31.desc"
	picture = GFX_evt_habitable_dig_site
	show_sound = event_wind_ruins
	is_triggered_only = yes
	archaeology = yes
	immediate = { from = { set_site_progress_locked = yes } }

	after = { from = { set_site_progress_locked = no } }
	
	option = { name = executor_build.31.a }
}

fleet_event = {
	id = executor_build.32
	hide_window = no
	title = "executor_build.32.title"
	desc = "executor_build.32.desc"
	picture = GFX_evt_hidden_door
	show_sound = event_wind_ruins
	is_triggered_only = yes
	archaeology = yes
	immediate = { from = { set_site_progress_locked = yes } }

	after = { from = { set_site_progress_locked = no } }
	
	option = { name = executor_build.32.a }
}

fleet_event = {
	id = executor_build.33
	hide_window = no
	title = "executor_build.33.title"
	desc = "executor_build.33.desc"
	picture = GFX_evt_relic_world_building
	show_sound = event_wind_ruins
	is_triggered_only = yes
	archaeology = yes
	immediate = { from = { set_site_progress_locked = yes } }

	after = { from = { set_site_progress_locked = no } }
	
	option = { name = executor_build.33.a }
}

fleet_event = {
	id = executor_build.34
	hide_window = no
	title = "executor_build.34.title"
	desc = "executor_build.34.desc"
	picture = GFX_evt_sapient_AI
	show_sound = event_wind_ruins
	is_triggered_only = yes
	archaeology = yes
	immediate = { from = { set_site_progress_locked = yes } }

	after = { from = { set_site_progress_locked = no } }
	
	option = { name = executor_build.34.a }
}

fleet_event = {
	id = executor_build.35
	hide_window = no
	title = "executor_build.35.title"
	desc = "executor_build.35.desc"
	picture = GFX_evt_ancient_databank
	show_sound = event_wind_ruins
	is_triggered_only = yes
	archaeology = yes
	immediate = { from = { set_site_progress_locked = yes } }

	after = { 
		from = { set_site_progress_locked = no } 
		hidden_effect = { root.owner = { 
			if = {
				limit = { NOT = { has_event_chain = ag_legacy_stroy_chain } }
				begin_event_chain = { event_chain = ag_legacy_stroy_chain }
			}
			create_point_of_interest = {
				id = ag_legacy_stroy.4
				desc = ag_legacy_stroy.4.desc
				name = ag_legacy_stroy.4
				event_chain = ag_legacy_stroy_chain
				location = root.from.planet
			}
			create_point_of_interest = {
				id = ag_legacy_stroy_recording.1
				desc = ag_legacy_stroy_recording_1_desc
				name = ag_legacy_stroy.4
				event_chain = kuat_mission_6_chain
				location = root.from.planet
			}
			change_variable = { which = ag_legacy_stroy_chain_check_number value = 1 }
		} }
	}
	
	option = { 
		name = executor_build.35.a
		large_artifact_reward = yes
		hidden_effect = {  
			event_target:has_kuat_lagacy_9 = {
				reroll_planet = yes
				change_pc = pc_gaia
				set_planet_size = 25
				add_modifier = { modifier = paradise_planet }
				add_deposit = d_underwater_vent
				add_deposit = d_frozen_gas_lake
				add_deposit = d_tempestous_mountain
				add_deposit = d_searing_desert
				add_deposit = d_buzzing_plains
				add_deposit = d_rich_mountain
				add_deposit = d_prosperous_mesa
				add_deposit = d_submerged_ore_veins
				add_deposit = d_ore_rich_caverns
				add_deposit = d_mineral_striations
				add_deposit = d_teeming_reef
				add_deposit = d_lush_jungle
				add_deposit = d_black_soil
				add_deposit = d_fertile_lands
				add_deposit = d_natural_farmland
				add_deposit = d_dust_desert
				add_deposit = d_fuming_bog
				add_deposit = d_dust_caverns
				add_deposit = d_bubbling_swamp
				add_deposit = d_crystal_reef
				add_deposit = d_crystal_forest
				add_deposit = d_betharian_deposit
				add_deposit = d_alien_pets_deposit
				add_modifier = { modifier = kyber_crystals days = -1 }
			}
			leader = { save_global_event_target_as = dig_archetectrue_leader }
			root.owner = { 
				set_country_flag = finished_kuat_gateway_stage_first 
				if = {
					limit = { kuat_is_enable_apocalyptic_origin = yes }
					country_event = { id = kuat_diplomatic.5 days = 10 random = 20 }
				}
				kuat_create_toasto_message = { KEY = kuat_find_memory_cluds TARGET = root.from RECIPIENT = this }
			}
		}
	}
}

country_event = {
	id = executor_build.36
	title = "executor_build.36.name"
	desc = "executor_build.36.desc"
	diplomatic = yes
	fire_only_once = yes
	picture_event_data = { room = frozen_planet_room }
	custom_gui = "kuat_event_window"
	custom_gui_option = "kuat_event_option"
	trigger = {
		is_ai = no
		has_technology = tech_sensors_2
		has_country_flag = finished_kuat_gateway_stage_first
		NOT = { any_country = { kuat_is_enable_eternal_origin = yes } }
		NOT = { has_global_flag = kuat_outgate_enable }
	}
	mean_time_to_happen = { 
		years = 4 
		modifier = { factor = 0.75 years_passed > 20 }
		modifier = { factor = 0.5 years_passed > 25 }
		modifier = { factor = 0.25 years_passed > 30 }
	}
	immediate = {
		clear_global_event_target = has_kuat_lagacy_9
		if = {
			limit = { any_system_within_border = {
				is_capital_system = no
				any_system_planet = { 
					is_planet_class = pc_frozen 
					NOT = { exists = archaeological_site }
				}
			} }
			random_system_within_border = {
				limit = {
					is_capital_system = no
					any_system_planet = { 
						is_planet_class = pc_frozen 
						NOT = { exists = archaeological_site }
					}
				}
				random_system_planet = {
					limit = { 
						is_planet_class = pc_frozen 
						NOT = { exists = archaeological_site }
					}
					save_global_event_target_as = has_kuat_lagacy_10
					create_archaeological_site = kuat_lagacy_10
				}
				while = { count = 15 create_ambient_object = { type = "large_debris_object" location = solar_system } }
				while = { count = 10 create_ambient_object = { type = "medium_debris_01_object" location = solar_system } }
				while = { count = 20 create_ambient_object = { type = "medium_debris_02_object" location = solar_system } }
				while = { count = 30 create_ambient_object = { type = "small_debris_object" location = solar_system } }
			}
		} else = {
			random_planet_within_border = {
				limit = {
					is_ringworld = no
					is_star = no
					is_colony = no
					is_colonizable = no
					is_capital = no
					is_asteroid = no
					NOT = { exists = archaeological_site }
				}
				change_pc = pc_frozen
				save_global_event_target_as = has_kuat_lagacy_10
				create_archaeological_site = kuat_lagacy_10
				solar_system = {
					while = { count = 15 create_ambient_object = { type = "large_debris_object" location = solar_system } }
					while = { count = 10 create_ambient_object = { type = "medium_debris_01_object" location = solar_system } }
					while = { count = 20 create_ambient_object = { type = "medium_debris_02_object" location = solar_system } }
					while = { count = 30 create_ambient_object = { type = "small_debris_object" location = solar_system } }
				}
			}
		}
	}
	option = { name = "executor_build.36.a" }
}

fleet_event = {
	id = executor_build.37
	hide_window = no
	title = "executor_build.37.title"
	desc = "executor_build.37.desc"
	picture = GFX_evt_em_war_6
	show_sound = event_wind_ruins
	is_triggered_only = yes
	archaeology = yes
	immediate = { from = { set_site_progress_locked = yes } }

	after = { from = { set_site_progress_locked = no } }
	
	option = { name = executor_build.37.a }
}

fleet_event = {
	id = executor_build.38
	hide_window = no
	title = "executor_build.38.title"
	desc = "executor_build.38.desc"
	picture = GFX_evt_habitable_dig_site
	show_sound = event_wind_ruins
	is_triggered_only = yes
	archaeology = yes
	immediate = { from = { set_site_progress_locked = yes } }

	after = { from = { set_site_progress_locked = no } }
	
	option = { name = executor_build.38.a }
}

fleet_event = {
	id = executor_build.39
	hide_window = no
	title = "executor_build.39.title"
	desc = "executor_build.39.desc"
	picture = GFX_evt_hidden_door
	show_sound = event_wind_ruins
	is_triggered_only = yes
	archaeology = yes
	immediate = { from = { set_site_progress_locked = yes } }

	after = { from = { set_site_progress_locked = no } }
	
	option = { name = executor_build.39.a }
}

fleet_event = {
	id = executor_build.40
	hide_window = no
	title = "executor_build.40.title"
	desc = "executor_build.40.desc"
	picture = GFX_evt_relic_world_building
	show_sound = event_wind_ruins
	is_triggered_only = yes
	archaeology = yes
	immediate = { from = { set_site_progress_locked = yes } }

	after = { from = { set_site_progress_locked = no } }
	
	option = { name = executor_build.40.a }
}

fleet_event = {
	id = executor_build.41
	hide_window = no
	title = "executor_build.41.title"
	desc = "executor_build.41.desc"
	picture = GFX_evt_sapient_AI
	show_sound = event_wind_ruins
	is_triggered_only = yes
	archaeology = yes
	immediate = { from = { set_site_progress_locked = yes } }

	after = { from = { set_site_progress_locked = no } }
	
	option = { name = executor_build.41.a }
}

fleet_event = {
	id = executor_build.42
	hide_window = no
	title = "executor_build.42.title"
	desc = "executor_build.42.desc"
	picture = GFX_evt_ancient_databank
	show_sound = event_wind_ruins
	is_triggered_only = yes
	archaeology = yes
	immediate = { from = { set_site_progress_locked = yes } }

	after = { from = { set_site_progress_locked = no } }
	
	option = { 
		name = executor_build.42.a
		large_artifact_reward = yes
	}
}

fleet_event = {
	id = executor_build.43
	hide_window = no
	title = "executor_build.43.title"
	desc = "executor_build.43.desc"
	picture = GFX_evt_ancient_artifact
	show_sound = event_wind_ruins
	is_triggered_only = yes
	archaeology = yes
	immediate = { from = { set_site_progress_locked = yes } }

	after = { 
		from = { set_site_progress_locked = no } 
		hidden_effect = { root.owner = {  
			if = {
				limit = { NOT = { has_event_chain = ag_legacy_stroy_chain } }
				begin_event_chain = { event_chain = ag_legacy_stroy_chain }
			}
			create_point_of_interest = {
				id = ag_legacy_stroy.5
				desc = ag_legacy_stroy.5.desc
				name = ag_legacy_stroy.5
				event_chain = ag_legacy_stroy_chain
				location = root.from.planet
			}
			create_point_of_interest = {
				id = ag_legacy_stroy_recording.2
				desc = ag_legacy_stroy_recording_2_desc
				name = ag_legacy_stroy.5
				event_chain = kuat_mission_6_chain
				location = root.from.planet
			}
			change_variable = { which = ag_legacy_stroy_chain_check_number value = 1 }
		} }
	}
	
	option = { 
		name = executor_build.43.a
		large_artifact_reward = yes
		hidden_effect = { 
			event_target:has_kuat_lagacy_10 = {
				reroll_planet = yes
				change_pc = pc_gaia
				set_planet_size = 25
				add_modifier = { modifier = paradise_planet }
				add_deposit = d_underwater_vent
				add_deposit = d_frozen_gas_lake
				add_deposit = d_tempestous_mountain
				add_deposit = d_searing_desert
				add_deposit = d_buzzing_plains
				add_deposit = d_rich_mountain
				add_deposit = d_prosperous_mesa
				add_deposit = d_submerged_ore_veins
				add_deposit = d_ore_rich_caverns
				add_deposit = d_mineral_striations
				add_deposit = d_teeming_reef
				add_deposit = d_lush_jungle
				add_deposit = d_black_soil
				add_deposit = d_fertile_lands
				add_deposit = d_natural_farmland
				add_deposit = d_dust_desert
				add_deposit = d_fuming_bog
				add_deposit = d_dust_caverns
				add_deposit = d_bubbling_swamp
				add_deposit = d_crystal_reef
				add_deposit = d_crystal_forest
				add_deposit = d_betharian_deposit
				add_deposit = d_alien_pets_deposit
				add_modifier = { modifier = kyber_crystals days = -1 }
			}
			root.owner = { 
				kuat_create_toasto_message = { KEY = kuat_find_memory_cluds TARGET = root.from RECIPIENT = this }
				set_country_flag = finished_kuat_gateway_stage_final
				if = {
					limit = { kuat_is_enable_apocalyptic_origin = yes }
					country_event = { id = kuat_diplomatic.6 days = 10 random = 20 }
				}
				if = {
					limit = { 
						OR = {
							any_system_within_border = { 
								has_star_flag = exe_outer_gate_disable_system 
							} 	
							any_system = { 
								OR = {
									NOT = { space_owner = { is_same_value = prevprev } }
									NOT = { exists = space_owner }
								}
								has_star_flag = exe_outer_gate_disable_system
								is_surveyed = { who = prev status = yes }
							}
						}
					}
					set_country_flag = can_enable_kuat_gate_special
				}
				else = { set_country_flag = can_enable_kuat_gate }
			} 
			clear_global_event_target = dig_archetectrue_leader
		}
	}
}

country_event = {
	id = executor_build.44
	title = "executor_build.44.name"
	desc = "executor_build.44.desc"
	diplomatic = yes
	picture_event_data = { room = ancient_AI_room }
	custom_gui = "kuat_event_window"
	custom_gui_option = "kuat_event_option"
	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		has_country_flag = finished_kuat_gateway_stage_final
		has_country_flag = can_enable_kuat_gate
		NOT = { has_country_flag = can_enable_kuat_gate_special_active }
		kuat_is_enable_shadow_origin = yes 
		NOT = { has_global_flag = kuat_outgate_enable }
		from = { has_star_flag = exe_outer_gate_disable_system }
	}
	immediate = { 
		set_country_flag = can_enable_kuat_gate_active
		clear_global_event_target = has_kuat_lagacy_10
	}
	option = {
		name = executor_build.44.a
		enable_special_project = {
			name = exe_enable_kuat_stargate
			owner = root
			location = event_target:exe_outer_gate_disable
		}
	}
}

ship_event = {
	id = executor_build.45
	title = executor_build.45.title
	desc = executor_build.45.desc
	diplomatic = yes
	picture_event_data = { room = clocks_room }
	custom_gui = "kuat_event_m_window"
	custom_gui_option = "kuat_event_m_option"
	is_triggered_only = yes
	immediate = { set_global_flag = kuat_outgate_enable }
	option = { 
		name = executor_build.45.a 
		hidden_effect = {
			solar_system = { remove_star_flag = exe_outer_gate_disable_system }
			every_megastructure = {
				limit = { is_megastructure_type = exe_outer_gate_disable }
				upgrade_megastructure_to = exe_outer_gate
				finish_upgrade = yes
			}
			every_playable_country = {
				limit = { is_ai = no }
				set_country_flag = can_pass_by set_country_flag = can_pass_inner_by country_event = { id = executor_build.46 }
			}
			every_megastructure = { limit = { is_megastructure_type = exe_outer_gate } activate_gateway = this }
		}
	}
}

country_event = {
	id = executor_build.46
	title = executor_build.46.title
	desc = executor_build.46.desc
	diplomatic = yes
	picture_event_data = { room = l-gateway_room }
	custom_gui = "kuat_event_m_window"
	custom_gui_option = "kuat_event_m_option"
	is_triggered_only = yes
	option = { name = executor_build.46.a }
}

country_event = {
	id = executor_build.47
	title = "executor_build.47.name"
	desc = "executor_build.47.desc"
	diplomatic = yes
	picture_event_data = { room = ancient_AI_room }
	custom_gui = "kuat_event_window"
	custom_gui_option = "kuat_event_option"
	mean_time_to_happen = { 
		years = 10 
		modifier = { factor = 0.5 exists = event_target:exe_outer_gate_disable }
		modifier = { factor = 0.25 is_at_war_with = event_target:fallen_empire_kuat }
	}
	fire_only_once = yes
	trigger = {
		has_country_flag = finished_kuat_gateway_stage_final
		OR = {
			has_country_flag = can_enable_kuat_gate_special
			any_system_within_border = { has_star_flag = exe_outer_gate_disable_system } 
			AND = {
				NOT = { exists = event_target:exe_outer_gate_disable }
				is_at_war_with = event_target:fallen_empire_kuat
				any_system = { has_star_flag = kuat_exe_invasion_gate_system } 
			}
			has_global_flag = kuat_war_goal
		}
		kuat_is_enable_shadow_origin = yes 
		NOT = { has_global_flag = kuat_outgate_enable }
		NOT = { has_country_flag = can_enable_kuat_gate_active }
	}
	immediate = { 
		set_country_flag = can_enable_kuat_gate_special_active
		clear_global_event_target = has_kuat_lagacy_10 
		if = {
			limit = { OR = {
				AND = {
					NOT = { exists = event_target:exe_outer_gate_disable }
					is_at_war_with = event_target:fallen_empire_kuat
					any_system = { has_star_flag = kuat_exe_invasion_gate_system } 
				}
				has_global_flag = kuat_war_goal
			} }
			every_megastructure = {
				limit = { 
					solar_system = { kuat_is_kuat_system = no }
					has_megastructure_flag = can_active_gateway 
					is_megastructure_type = exe_outer_gate
				}
				save_event_target_as = exe_outer_gate_disable
			}
		}
	}
	option = {
		name = executor_build.47.a
		enable_special_project = {
			name = exe_enable_kuat_stargate
			owner = root
			location = event_target:exe_outer_gate_disable
		}
	}
}

##########################
##### 恒星熔炉需要舰队 ####
##########################

country_event = {
	id = executor_build.3
	title = executor_build.title
	desc = {  
		trigger = {
			success_text = {
				text = executor_build.3.apcalyptic.desc
				kuat_is_enable_apocalyptic_origin = yes
			}
			success_text = {
				text = executor_build.desc
				kuat_is_enable_shadow_origin = yes
				kuat_is_enable_apocalyptic_origin = no
				NOT = { has_global_flag = has_swgs_country }
			}
			success_text = {
				text = executor_build_special.desc
				has_global_flag = has_swgs_country
			}
		}
	}
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:kuat_player_target_species
		planet_background = pc_ringworld_habitable
		graphical_culture = fallen_empire_01
		city_level = event_target:fallen_empire_kuat
		room = personality_fallen_empire_cyan_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	is_triggered_only = yes
	trigger = { NOT = { is_country_type = default_ev } }
	immediate = {
		random_system = {
			limit = { has_star_flag = Kuat_system_int_4 }
			if = {
				limit = { NOT = { exists = starbase } }
				create_starbase = {
					size = "starbase_citadel"
					owner = event_target:fallen_empire_kuat
					module = "shipyard"
					module = "gun_battery"
					module = "gun_battery"
					module = "gun_battery"
					module = "gun_battery"
					module = "gun_battery"
					building = "target_uplink_computer"
					building = "defense_grid"
					building = "colossus_yards"
					building = "titan_yards"
				}
				random_system_planet = { create_kuat_system_fleet = yes }
			}
		}
		establish_communications_no_message = event_target:fallen_empire_kuat
		if = {
			limit = { exists = event_target:kuat_shipyard_country }
			establish_communications_no_message = event_target:kuat_shipyard_country
		}
	}
	option = {
		name = executor_build.a
		hidden_effect = {
			if = {
				limit = { kuat_is_enable_shadow_origin = yes kuat_is_enable_apocalyptic_origin = no }
				event_target:fallen_empire_kuat = { add_opinion_modifier = { who = prev modifier = opinion_kuat_new } }
			}
			country_event = { id = executor_build.8 days = 30 }
		}
	}
}

##########################
## 夸特要觉醒辣（保卫世界）#
##########################
country_event = {
	id = executor_build.4
	title = OK
	desc = OK
	hide_window = yes
	fire_only_once = yes
	trigger = {
		is_country_type = kuat_fallen_empire
		is_at_war = no
		any_country = { kuat_is_crisis_faction = yes }
	}
	mean_time_to_happen = {
		years = 200000
		modifier = {
			factor = 0
			any_country = { kuat_is_crisis_faction = yes }
		}
	}
	immediate = {
		every_playable_country = {
			limit = { is_ai = no }
			country_event = { id = ai_action.10 days = 5 }
		}
		country_event = { id = executor_build.402 }
		country_event = { id = ai_action.7 days = 10 }
		every_playable_country = {
			limit = { is_ai = no }
			country_event = { id = executor_build.401 }
		}
	}
}

country_event = {
	id = executor_build.401
	title = fallen_empires_awakening.2.name
	desc = fallen_empires_awakening.2.desc
	diplomatic = yes
	picture_event_data = { room = fallen_empire_room }
	custom_gui = "kuat_event_window"
	custom_gui_option = "kuat_event_option"
	show_sound = event_alien_signal
	location = from
	is_triggered_only = yes
	option = { name = fallen_empires_awakening.2.a }
	option = { name = fallen_empires_awakening.2.b }
}

country_event = {
	id = executor_build.402
	title = OK
	desc = OK
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		set_country_flag = sleepers_awake_first_sleeper
		set_country_type = kuat_awakened_fallen_empire
		change_government = {
			civics = {
				civic = civic_revanchist_fervor_kuat
				civic = civic_ancient_caches_of_technology_kuat
			}
		}
		create_kuat_awakening_fleet = yes
		# Establish communications
		every_country = {
			limit = {
				NOT = { has_communications = root }
			}
			establish_communications_no_message = root
			root = { save_event_target_as = contact_empire }
			country_event = { id = action.1 }
		}
	}
}

##########################
### 打赢第一次夸特拿科技 ###
##########################
country_event = {
	id = executor_build.5
	hide_window = yes
	is_triggered_only = yes
	trigger = { 
		NOT = { has_global_flag = kuat_fallen_mission_reaction.20.fired }
		has_country_flag = fallen_empire_kuat 
	}
	immediate = {
		every_country = {
			limit = {
				is_ai = no
				any_system_within_border = { kuat_is_kuat_system = yes }
			}
			country_event = { id = executor_build.501 }
		}
	}
}

country_event = {
	id = executor_build.501
	title = executor_build.501.title
	desc = executor_build.501.desc
	diplomatic = yes
	picture_event_data = { room = exploding_ship_room }
	custom_gui = "kuat_event_m_window"
	custom_gui_option = "kuat_event_m_option"
	is_triggered_only = yes
	immediate = { 
		set_country_flag = kuat_can_have_tech 
		set_country_flag = kuat_has_been_defeated_once
		if = {
			limit = { kuat_is_enable_apocalyptic_origin = yes }
			country_event = { id = kuat_diplomatic.15 days = 10 random = 20 }
		}
		kuat_create_toasto_message = { KEY = kuat_find_memory_cluds TARGET = this RECIPIENT = this }
	}
	option = {
		name = executor_build.501.a
		give_technology = { tech = tech_kuat_noway }
		hidden_effect = {
			if = {
				limit = { NOT = { has_existing_ship_design = nebula_executor } }
				create_ship_design = { design = "NAME_KUAT_EXECUTOR_1" }
				add_ship_design = last_created_design
			}
			if = {
				limit = { NOT = { has_existing_ship_design = swfo_resurgent } }
				create_ship_design = { design = "Name_boss_Resugrant" }
				add_ship_design = last_created_design
			}
			if = {
				limit = { NOT = { has_existing_ship_design = Cavelry } }
				create_ship_design = { design = "Name_boss_Cavelry" }
				add_ship_design = last_created_design
			}
			if = {
				limit = { NOT = { has_existing_ship_design = horrizone } }
				create_ship_design = { design = "Name_boss_Horriwer" }
				add_ship_design = last_created_design
			}
			if = {
				limit = { NOT = { has_existing_ship_design = high_Imperial_star_destroyer } }
				create_ship_design = { design = "Name_boss_HIGH_EMPIRE" }
				add_ship_design = last_created_design
			}
		}
	}
}

##########################
###### 夸特要觉醒辣 #######
##########################
country_event = {
	id = executor_build.6
	title = OK
	desc = OK
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		is_kuat_fallen_empire = yes
		is_at_war = no
		#NOT = { any_country = { kuat_is_crisis_faction = yes } }
	}
	immediate = {
		if = {
			limit = { has_global_flag = kuat_shadow_war_prepare }
			if = {
				limit = { is_country_type = kuat_fallen_empire }
				every_playable_country = {
					limit = { is_ai = no }
					country_event = { id = executor_build.401 }
				}
				country_event = { id = executor_build.402 }
			}
			random_playable_country = {
				limit = { is_same_value = event_target:target_for_kuat }
				country_event = { id = executor_build.601 days = 5 }
			}
		}
		else = {
			save_event_target_as = fallen_empire_humiliator
			event_target:target_for_kuat = { fallen_empire_humiliate_effect = yes country_event = { id = ai_action.5 days = 1 } }
		}
	}
}

country_event = {
	id = executor_build.601
	title = executor_build.601.title
	desc = executor_build.601.desc
	diplomatic = yes
	diplomatic_title = executor_build.601.title
	picture_event_data = {
		portrait = event_target:kuat_player_target_species
		planet_background = pc_ringworld_habitable
		graphical_culture = fallen_empire_01
		city_level = event_target:fallen_empire_kuat
		room = personality_fallen_empire_cyan_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	is_triggered_only = yes
	trigger = { exists = event_target:fallen_empire_kuat }
	option = {
		name = executor_build.601.a
		hidden_effect = { event_target:fallen_empire_kuat = { 
			declare_war = {
				target = event_target:target_for_kuat
				name = "Name_kuat_war"
				attacker_war_goal = Kuat_total_war
			} }
			if = {
				limit = { any_owned_fleet = { has_fleet_flag = defensive_galaxy_fleet } }
				every_owned_fleet = {
					limit  = { has_fleet_flag = defensive_galaxy_fleet }
					destroy_fleet = { destroy_template = yes target = this }
				}
			}
		}
	}
	after = { if = {
		limit = { has_special_project = exe_enable_kuat_stargate }
		abort_special_project = { type = exe_enable_kuat_stargate location = event_target:exe_outer_gate_disable }
	} }
}

##########################
### 夸特的后备隐藏能源 ####
##########################
country_event = {
	id = executor_build.7
	is_triggered_only = yes
	hide_window = yes
	trigger = {
		has_country_flag = fallen_empire_kuat
		fromfrom = { has_ship_flag = ship_ruins }
	}
	immediate = {
		solar_system = { save_event_target_as = explode_kuat_system }
		from = { country_event = { id = executor_build.701 } }
	}
}

country_event = {
	id = executor_build.701
	is_triggered_only = yes
	hide_window = no
	title = executor_build.701.title
	desc = executor_build.701.desc
	diplomatic = yes
	picture_event_data = { room = exploding_ship_room }
	custom_gui = "kuat_event_window"
	custom_gui_option = "kuat_event_option"
	immediate = { country_event = { id = executor_build.702 days = 30 } }
	option = { name = executor_build.701.a }
}

country_event = {
	id = executor_build.702
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		event_target:explode_kuat_system = {
			star = {
				create_ambient_object = { type = "star_explosion" play_animation_once = yes location = this }
				last_created_ambient_object = { set_location = { target = prev distance = 0 angle = random } }
				create_ambient_object = { type = "destroyed_system" location = this }
				last_created_ambient_object = { set_ambient_object_flag = destroyed_system_effect set_location = { target = prev  distance = 0  angle = random  } }
			}
			every_ship_in_system = { 
				limit = { 
					exists = owner owner = { is_kuat_fallen_empire = no } 
					NOT = { is_variable_set = exe_megastructure_starbase_explode }
				}
				set_variable_to_random_value = {
					which = exe_megastructure_starbase_explode
					min = 10 max = 99 rounded = yes
				}
				kuat_battle_kuat_reduce_hp_percent = { value = exe_megastructure_starbase_explode }
				clear_variable = exe_megastructure_starbase_explode
			}
		}
		country_event = { id = executor_build.703 days = 30 }
	}
}

country_event = {
	id = executor_build.703
	is_triggered_only = yes
	hide_window = no
	title = executor_build.703.title
	desc = executor_build.703.desc
	diplomatic = yes
	picture_event_data = { room = machine_space_battle_room }
	custom_gui = "kuat_event_m_window"
	custom_gui_option = "kuat_event_m_option"
	trigger = { exists = event_target:fallen_empire_kuat }
	immediate = {
		event_target:fallen_empire_kuat = {
			every_system_within_border = {
				limit = { has_star_flag = Kuat_system }
				create_starbase = {
					owner = event_target:fallen_empire_kuat
					size = "starbase_citadel"
					module = "shipyard"
					module = "shipyard"
					module = "shipyard"
					module = "hangar_bay"
					module = "gun_battery"
					module = "gun_battery"
					building = "target_uplink_computer"
					building = "defense_grid"
					building = "colossus_yards"
					building = "titan_yards"
				}
				create_capital_reinforcements_fleet = yes
			}
		}
	}
	option = { name = OK }
}

##########################
#### 建造执行者要BB你 #####
##########################
ship_event = {
	id = executor_build.9
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		owner = { 
			kuat_is_enable_shadow_origin = yes 
			kuat_is_enable_apocalyptic_origin = no
		}
		is_ship_size = knight_hammer_executor
	}
	immediate = {
		set_ship_flag = executor
		if = {
			limit = { exists = event_target:fallen_empire_kuat }
			owner = { country_event = { id = executor_build.901 } }
		}
	}
}

country_event = {
	id = executor_build.901
	title = executor_build.901.title
	desc = executor_build.901.desc
	diplomatic = yes
	is_triggered_only = yes
	fire_only_once = yes
	picture_event_data = {
		portrait = event_target:kuat_player_target_species
		planet_background = event_target:fallen_empire_kuat
		graphical_culture = fallen_empire_01
		city_level = event_target:fallen_empire_kuat
		room = event_target:fallen_empire_kuat.ruler
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	trigger = { 
		kuat_is_enable_apocalyptic_origin = no
		any_country = { has_country_flag = fallen_empire_kuat } 
	}
	immediate = {
		set_timed_country_flag = { flag = kuat_will_be_return_for_money years = 20 }
		if = {
			limit = { has_country_resource = { type = energy amount > 10000 } }
			export_resource_stockpile_to_variable = { resource = energy variable = country_energy_tax_amount }
			multiply_variable = { which = country_energy_tax_amount value = 0.5 }
		}
		else = { set_variable = { which = country_energy_tax_amount value = 5000 } }
	}
	option = {
		name = executor_build.901.a
		allow = { has_country_resource = { type = energy amount >= country_energy_tax_amount } }
		add_resource = { energy = -1 mult = country_energy_tax_amount }
		hidden_effect = { clear_variable = country_energy_tax_amount }
		event_target:fallen_empire_kuat = { add_opinion_modifier = { who = prev modifier = opinion_kuat_shipc_can_get_1 } }
	}
	option = {
		name = executor_build.901.b
		hidden_effect = { clear_variable = country_energy_tax_amount }
		event_target:fallen_empire_kuat = { add_opinion_modifier = { who = prev modifier = opinion_kuat_shipc_can_not_get } }
	}
}

country_event = {
	id = executor_build.902
	title = executor_build.901.title
	desc = executor_build.902.desc
	diplomatic = yes
	picture_event_data = { room = clocks_room }
	custom_gui = "kuat_event_m_window"
	custom_gui_option = "kuat_event_m_option"
	is_triggered_only = yes
	trigger = {
		kuat_is_enable_apocalyptic_origin = no
		has_country_flag = kuat_will_be_return_for_money
		any_owned_ship = { has_ship_flag = executor }
		exists = event_target:fallen_empire_kuat
	}
	immediate = {
		if = {
			limit = { has_country_resource = { type = energy amount > 10000 } }
			export_resource_stockpile_to_variable = { resource = energy variable = country_energy_tax_amount }
			multiply_variable = { which = country_energy_tax_amount value = 0.5 }
		}
		else = { set_variable = { which = country_energy_tax_amount value = 5000 } }
	}
	option = {
		name = executor_build.901.a
		allow = { has_country_resource = { type = energy amount >= country_energy_tax_amount } }
		add_resource = { energy = -1 mult = country_energy_tax_amount }
		hidden_effect = { clear_variable = country_energy_tax_amount }
		event_target:fallen_empire_kuat = { add_opinion_modifier = { who = prev modifier = opinion_kuat_shipc_can_get_1 } }
	}
	option = {
		name = executor_build.901.b
		hidden_effect = { clear_variable = country_energy_tax_amount }
		event_target:fallen_empire_kuat = { add_opinion_modifier = { who = prev modifier = opinion_kuat_shipc_can_not_get } }
	}
}


##########################
####### 起源事件相关 ######
##########################
country_event = { #水晶信标D设施结束
	id = executor_build.11
	title = executor_build.11.title
	desc = executor_build.11.desc
	is_triggered_only = yes
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:kuat_player_target_species
		planet_background = pc_ringworld_habitable
		graphical_culture = fallen_empire_01
		city_level = event_target:fallen_empire_kuat
		room = personality_fallen_empire_cyan_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	trigger = {
		exists = event_target:fallen_empire_kuat
		kuat_is_enable_shadow_origin = yes
	}
	option = {
		name = executor_build_op_a.a
		if = {
			limit = { kuat_is_enable_shadow_origin = yes kuat_is_enable_apocalyptic_origin = no }
			event_target:fallen_empire_kuat = { add_opinion_modifier = { who = prev modifier = opinion_kuat_shipc_can_get } }
		}
	}
}

country_event = { #水晶信标结束
	id = executor_build.1101
	hide_window = no
	title = "executor_build.1101.title"
	desc = "executor_build.1101.desc"
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:kuat_player_target_species
		planet_background = pc_ringworld_habitable
		graphical_culture = fallen_empire_01
		city_level = event_target:fallen_empire_kuat
		room = personality_fallen_empire_cyan_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	is_triggered_only = yes
	trigger = {
		is_ai = no
		exists = event_target:fallen_empire_kuat
		kuat_is_enable_shadow_origin = yes
	}
	option = {
		name = "executor_build.1101.a"
		hidden_effect = {
			event_target:fallen_empire_kuat = { add_opinion_modifier = { who = root modifier = opinion_kuat_new_parit_finish } }
		}
	}
}

country_event = { #水晶信标C设施结束
	id = executor_build.1107
	hide_window = no
	title = "executor_build.1107.title"
	desc = "executor_build.1107.desc"
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:kuat_player_target_species
		planet_background = pc_ringworld_habitable
		graphical_culture = fallen_empire_01
		city_level = event_target:fallen_empire_kuat
		room = personality_fallen_empire_cyan_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	is_triggered_only = yes
	trigger = {
		is_ai = no
		exists = event_target:fallen_empire_kuat
		kuat_is_enable_shadow_origin = yes
	}
	option = {
		name = "executor_build.1107.a"
		hidden_effect = { 
			event_target:fallen_empire_kuat = { add_opinion_modifier = { who = root modifier = opinion_kuat_new_parit_finish } } 
			add_modifier = { modifier = refused_kuat_mission_debuff_alt }
		}
	}
}

country_event = { #水晶信标B设施结束
	id = executor_build.1108
	hide_window = no
	title = "executor_build.1108.title"
	desc = "executor_build.1108.desc"
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:kuat_player_target_species
		planet_background = pc_ringworld_habitable
		graphical_culture = fallen_empire_01
		city_level = event_target:fallen_empire_kuat
		room = personality_fallen_empire_cyan_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	is_triggered_only = yes
	trigger = {
		is_ai = no
		exists = event_target:fallen_empire_kuat
		kuat_is_enable_shadow_origin = yes
	}
	option = { name = "executor_build.1108.a"
		hidden_effect = { event_target:fallen_empire_kuat = { add_opinion_modifier = { who = root modifier = opinion_kuat_new_parit_finish } } }
	}
}

country_event = { #水晶信标A设施结束
	id = executor_build.1109
	hide_window = no
	title = "executor_build.1109.title"
	desc = "executor_build.1109.desc"
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:kuat_player_target_species
		planet_background = pc_ringworld_habitable
		graphical_culture = fallen_empire_01
		city_level = event_target:fallen_empire_kuat
		room = personality_fallen_empire_cyan_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	is_triggered_only = yes
	trigger = {
		is_ai = no
		exists = event_target:fallen_empire_kuat
		kuat_is_enable_shadow_origin = yes
	}
	option = { name = "executor_build.1109.a"
		hidden_effect = { event_target:fallen_empire_kuat = { add_opinion_modifier = { who = root modifier = opinion_kuat_new_parit_finish } } }
	}
}

event = {
	id = executor_build.1102
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		exists = event_target:fallen_empire_kuat
		any_country = { 
			is_ai = no 
			kuat_is_enable_shadow_origin = yes 
			kuat_is_enable_apocalyptic_origin = no
		}
		mid_game_years_passed > 0
	}
	immediate = {
		every_playable_country = {
			limit = {
				is_ai = no kuat_is_enable_shadow_origin = yes
				has_communications = event_target:fallen_empire_kuat
			}
			random_list = {
				1 = {
					modifier = {
						add = 1
						check_variable = { which = years_not_trigger_parit_evt value >= 8 }
					}
					clear_variable = years_not_trigger_parit_evt
					country_event = { id = executor_build.1103 days = 1 random = 359 }
				}
				14 = {
					modifier = {
						add = -2
						check_variable = { which = years_not_trigger_parit_evt value >= 2 }
					}
					modifier = {
						add = -3
						check_variable = { which = years_not_trigger_parit_evt value >= 3 }
					}
					modifier = {
						add = -4
						check_variable = { which = years_not_trigger_parit_evt value >= 4 }
					}
					modifier = {
						add = -5
						check_variable = { which = years_not_trigger_parit_evt value >= 5 }
					}
					modifier = {
						factor = 0
						check_variable = { which = years_not_trigger_parit_evt value >= 10 }
					}
					change_variable = { which = years_not_trigger_parit_evt value = 1 }
				}
			}
		}
	}
}

country_event = {
	id = executor_build.1103
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		is_ai = no
		kuat_is_enable_shadow_origin = yes
		has_communications = event_target:fallen_empire_kuat
		NOT = { is_hostile = event_target:fallen_empire_kuat }
	}
	immediate = {
		random_list = {
			5 = {
				modifier = {
					factor = 2
					is_at_war = yes
				}
				country_event = { id = executor_build.1104 }
				change_variable = { which = num_resource_event value = 1 }
			}
			1 = {
				modifier = {
					add = 2
					is_at_war = yes
				}
				modifier = {
					factor = 3
					check_variable = { which = num_resource_event value > 10 }
				}
				modifier = {
					factor = 0
					OR = {
						mid_game_years_passed < 10
						check_variable = { which = num_battleship_event value > 10 }
					}
				}
				country_event = { id = executor_build.1105 }
				change_variable = { which = num_battleship_event value = 1 }
			}
			1 = {
				modifier = {
					add = 2
					is_at_war = yes
				}
				modifier = {
					factor = 3
					check_variable = { which = num_resource_event value > 25 }
				}
				modifier = {
					factor = 4
					check_variable = { which = num_battleship_event value > 10 }
				}
				modifier = {
					factor = 0
					OR = {
						check_variable = { which = num_flagship_event value >= 1 }
						end_game_years_passed < 10
					}
				}
				country_event = { id = executor_build.1106 }
				change_variable = { which = num_flagship_event value = 1 }
			}
		}
	}
}

country_event = {
	id = executor_build.1104
	title = "executor_build.1104.title"
	desc = "executor_build.1104.desc"
	hide_window = no
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:kuat_player_target_species
		planet_background = pc_ringworld_habitable
		graphical_culture = fallen_empire_01
		city_level = event_target:fallen_empire_kuat
		room = personality_fallen_empire_cyan_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	is_triggered_only = yes

	trigger = {
		exists = event_target:fallen_empire_kuat
		NOT = { is_at_war_with = event_target:fallen_empire_kuat }
	}

	option = {
		name = executor_build.1104.a
		hidden_effect = {
			if = {
				limit = { NOT = { has_country_flag = only_communicate_once } }
				event_target:fallen_empire_kuat = {
					add_opinion_modifier = { who = root modifier = opinion_kuat_new_parit_finish_1 }
				}
				set_country_flag = only_communicate_once
			}
			random_list = {
				7 = { add_resource = { alloys = 5000 } }
				6 = { add_resource = { alloys = 6000 } }
				5 = { add_resource = { alloys = 6000 } }
				4 = { add_resource = { alloys = 10000 } }
				3 = { add_resource = { alloys = 25000 } }
				2 = { add_resource = { alloys = 30000 } }
				1 = { add_modifier = { modifier = country_production_for_parit days = 1800 } }
				1 = { add_modifier = { modifier = country_production_for_parit_default days = 1800 } }
			}
		}
	}
}

country_event = {
	id = executor_build.1105
	title = "executor_build.1105.title"
	desc = "executor_build.1105.desc"
	hide_window = no
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:kuat_player_target_species
		planet_background = pc_ringworld_habitable
		graphical_culture = fallen_empire_01
		city_level = event_target:fallen_empire_kuat
		room = personality_fallen_empire_cyan_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	is_triggered_only = yes
	trigger = {
		exists = event_target:fallen_empire_kuat
		NOT = { is_at_war_with = event_target:fallen_empire_kuat }
		event_target:fallen_empire_kuat = { opinion = { who = root value >= 0 } }
	}
	option = {
		name = "executor_build.1105.a"
		hidden_effect = { create_fleet = {
			effect = {
				set_owner = prev
				while = { count = 3 create_ship = { design = "Name_boss_HIGH_EMPIRE" } }
				add_modifier = { modifier = kuat_fleet_power }
				set_fleet_stance = aggressive
				set_fleet_bombardment_stance = indiscriminate
				set_location = prev.capital_scope
			}
		} }
	}
}

country_event = {
	id = executor_build.1106
	title = "executor_build.1106.title"
	desc = "executor_build.1106.desc"
	hide_window = no
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:kuat_player_target_species
		planet_background = pc_ringworld_habitable
		graphical_culture = fallen_empire_01
		city_level = event_target:fallen_empire_kuat
		room = personality_fallen_empire_cyan_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	is_triggered_only = yes
	trigger = {
		exists = event_target:fallen_empire_kuat
		NOT = { is_at_war_with = event_target:fallen_empire_kuat }
	}
	immediate = {
		create_fleet = {
			effect = {
				set_owner = prev
				create_ship = { design = NAME_KUAT_EXECUTOR }
				add_modifier = { modifier = kuat_fleet_power }
				set_location = prev.capital_scope
				set_fleet_stance = aggressive
				set_fleet_bombardment_stance = indiscriminate
			}
		}
		add_modifier = { modifier = ship_firing_default_for_parit days = 3600 }
	}
	option = { name = "executor_build.1106.a" }
}

##########################
######## 军事基地 #########
##########################
country_event = {
	id = executor_build.8
	hide_window = yes
	trigger = { exists = event_target:fallen_empire_kuat }
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		create_kuat_fleet_country_type = yes
		kuat_military_base_system_initial = yes
		random_playable_country = {
			limit = { is_ai = no }
			country_event = { id = executor_build.801 }
		}
	}
}

country_event = {
	id = executor_build.801
	title = "executor_build.801.name"
	desc = "executor_build.801.desc"
	diplomatic = yes
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	picture_event_data = {
		portrait = event_target:kuat_player_target_species
		room = kuat_mega_shipyard_room
	}
	is_triggered_only = yes
	immediate = { establish_communications_no_message = event_target:fallen_empire_kuat_fleet }
	option = { name = "executor_build.801.a" hidden_effect = { create_sol_kuat_military_gateway = { NUM = 8 } } }
	after = { every_megastructure = { limit = { has_megastructure_flag = can_active_gateway } activate_gateway = this } }
}

country_event = {
	id = executor_build.802
	title = "executor_build.802.name"
	desc = "executor_build.802.desc"
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:kuat_player_target_species
		room = kuat_mega_shipyard_room
	}
	custom_gui = "kuat_event_diplomacy_shipyard_window"
	custom_gui_option = "kuat_event_diplomacy_shipyard_option"
	is_triggered_only = yes
	trigger = {
		is_ai = no
		can_communicate_with_kuat_fleet = yes
		OR = {
			kuat_fleet_diplo_event_active = no
			from = { is_same_value = root }
		}
		OR = {
			from = { is_same_value = root }
			from = { is_country_type = kuat_fleet }
			from = { is_country_type = kuat_fleet_hostile }
			from = { is_country_type = kuat_shipyard }
		}
	}
	option = {
		name = executor_build.802.trading
		trigger = {
			custom_tooltip = {
				fail_text = need_lower_than_100
				event_target:fallen_empire_kuat = { opinion = { who = root value < 1000 } }
			}
		}
		allow = {
			custom_tooltip = {
				fail_text = need_5000_alloys
				resource_stockpile_compare = { resource = energy value > 5000 }
			}
		}
		hidden_effect = {
			add_resource = { energy = -5000 }
			event_target:fallen_empire_kuat = {
				add_opinion_modifier = { modifier = opinion_kuat_buy_op_ship_credit who = root }
			}
		}
		response_text = executor_build.802.trading.a
		is_dialog_only = yes
	}
	option = {
		name = executor_build.802.hiring
		hidden_effect = { country_event = { id = executor_build.803 } }
	}
	option = {
		name = executor_build.802.back_shipyard
		hidden_effect = { country_event = { id = kuat_shipyard.1 } }
		default_hide_option = yes
	}
	option = { name = executor_build.802.back }
}

country_event = {
	id = executor_build.803
	is_triggered_only = yes
	title = "executor_build.803.title"
	desc = "executor_build.803.desc"
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:kuat_player_target_species
		room = kuat_mega_shipyard_room
	}
	custom_gui = "kuat_event_diplomacy_shipyard_window"
	custom_gui_option = "kuat_event_diplomacy_shipyard_option"
	trigger = {
		is_ai = no
		can_communicate_with_kuat_fleet = yes
	}
	option = {
		name = "executor_build_hiring_eclipse.374"
		allow = {
			custom_tooltip = {
				fail_text = executor_build.803.a
				event_target:fallen_empire_kuat = { opinion = { who = root value > 100 } }
			}
			custom_tooltip = {
				fail_text = executor_build.803.b
				mid_game_years_passed > 0
			}
			custom_tooltip = {
				fail_text = executor_build.803.c
				check_variable = { which = num_hiring_eclipse value < 1 }
			}
			resource_stockpile_compare = { resource = energy value > 500000 }
		} 
		hidden_effect = {
			add_resource = { energy = -500000 }
			save_event_target_as = hiring_country_eclipse
			change_variable = { which = num_hiring_eclipse value = 1 }
			create_message = {
				type = "CONSTRUCTION_MESSAGE_TYPE"
				localization = "kuat_hiring_arrived_desc"
				days = 30
				target = from
				variable = {
					type = name
					localization = "capital_planet"
					scope = root.capital_scope
				}
			}
			create_fleet = {
				name = "Name_DFLEET"
				effect = {
					set_owner = event_target:fallen_empire_kuat_fleet
					create_ship = { design = "Name_boss_eclipse" }
					while = { count = 48 create_ship = { design = "Name_boss_HIGH_EMPIRE" } }
					set_location = prev.capital_scope
					set_fleet_flag = will_be_return_eclipse
					save_event_target_as = return_eclipse_fleet
					set_fleet_stance = aggressive
					set_fleet_bombardment_stance = indiscriminate
					root = { country_event = { id = executor_build.805 days = 3600 } }
				}
				settings = { is_boss = yes can_disband = no spawn_debris = no can_change_composition = no uses_naval_capacity = no }
			}
			event_target:return_eclipse_fleet = { give_fleet = { controller = root days = 3600 } }
		}
	}
	option = {
		name = "executor_build.803.hiring"
		allow = {
			custom_tooltip = {
				fail_text = executor_build.803.a
				event_target:fallen_empire_kuat = { opinion = { who = root value > 100 } }
			}
			custom_tooltip = {
				fail_text = executor_build.809.b
				OR = {
					AND = {
						is_at_war = yes
						NOT = { is_at_war_with = event_target:fallen_empire_kuat }
					}
					any_country = { kuat_is_crisis_faction = yes }
				}
			}
			custom_tooltip = {
				fail_text = executor_build.809.c
				check_variable = { which = num_hiring value < 1 }
			}
			resource_stockpile_compare = { resource = energy value > 200000 }
		} 
		hidden_effect = {
			add_resource = { energy = -200000 }
			save_event_target_as = hiring_country
			change_variable = { which = num_hiring value = 1 }
			create_message = {
				type = "CONSTRUCTION_MESSAGE_TYPE"
				localization = "kuat_hiring_arrived_desc"
				days = 30
				target = from
				variable = {
					type = name
					localization = "capital_planet"
					scope = root.capital_scope
				}
			}
			create_fleet = {
				name = "Name_DFLEET"
				effect = {
					set_owner = event_target:fallen_empire_kuat_fleet
					while = { count = 50 create_ship = { design = "Name_boss_HIGH_EMPIRE" } }
					set_location = prev.capital_scope
					set_fleet_flag = will_be_return
					save_event_target_as = return_fleet
					set_fleet_stance = aggressive
					set_fleet_bombardment_stance = indiscriminate
					root = { country_event = { id = executor_build.804 days = 3600 } }
				}
				settings = { is_boss = yes can_disband = no spawn_debris = no can_change_composition = no uses_naval_capacity = no }
			}
			event_target:return_fleet = { give_fleet = { controller = root days = 3600 } }
		}
	}
	option = {
		name = executor_build.802.back
		default_hide_option = yes
	}
}

country_event = {
	id = executor_build.804
	diplomatic = yes
	title = "executor_build.804.title"
	desc = "executor_build.804.desc"
	picture_event_data = {
		portrait = event_target:kuat_player_target_species
		room = kuat_mega_shipyard_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	is_triggered_only = yes
	option = {
		name = executor_build.804.a
		event_target:return_fleet = { destroy_fleet = { target = this destroy_template = yes kill_leader = no } }
		event_target:hiring_country = { clear_variable = num_hiring }
	}
}

country_event = {
	id = executor_build.805
	diplomatic = yes
	title = "executor_build.804.title"
	desc = "executor_build.804.desc"
	picture_event_data = {
		portrait = event_target:kuat_player_target_species
		room = kuat_mega_shipyard_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	is_triggered_only = yes
	option = {
		name = executor_build.804.a
		event_target:return_eclipse_fleet = { destroy_fleet = { target = this destroy_template = yes kill_leader = no } }
		event_target:hiring_country_eclipse = { clear_variable = num_hiring_eclipse }
	}
}

country_event = {
	id = executor_build.806
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		fromfrom = {
			OR = {
				has_fleet_flag = will_be_return
				has_fleet_flag = will_be_return_eclipse
			}
		}
	}
	immediate = {
		if = {
			limit = { fromfrom = { has_fleet_flag = will_be_return } }
			event_target:hiring_country = { clear_variable = num_hiring }
		}
		if = {
			limit = { fromfrom = { has_fleet_flag = will_be_return_eclipse } }
			event_target:hiring_country_eclipse = { clear_variable = num_hiring_eclipse }
		}
	}
}

country_event = {
	id = executor_build.807
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		exists = event_target:fallen_empire_kuat
		from = {
			count_owned_fleet = {
				count = 0
				limit = { has_fleet_flag = kuat_fundation_main_fleet NOT = { is_same_value = root.fromfromfrom } }
			}
			is_country_type = kuat_fleet
		}
	}

	immediate = { from = { destroy_country = yes } country_event = { id = executor_build.808 } }
}

country_event = {
	id = executor_build.808
	diplomatic = yes
	title = executor_build.808.title
	desc = executor_build.808.desc
	picture_event_data = {
		portrait = event_target:kuat_player_target_species
		room = kuat_mega_shipyard_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	is_triggered_only = yes
	immediate = { save_event_target_as = target_for_kuat }
	option = {
		name = executor_build.808.a
		event_target:fallen_empire_kuat = { 
			add_opinion_modifier = { who = prevprev modifier = opinion_mutual_threat_kuat_fleet } 
			country_event = { id = executor_build.6 days = 3 }
		}
	}
}

event = {
	id = executor_build.809
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		NOT = { exists = event_target:fallen_empire_kuat }
		exists = event_target:fallen_empire_kuat_fleet
	}
	immediate = { event_target:fallen_empire_kuat_fleet = { destroy_country = yes } }
}

country_event = {
	id = executor_build.8010
	diplomatic = yes
	title = executor_build.8010.title
	desc = executor_build.8010.desc
	picture_event_data = {
		portrait = event_target:kuat_player_target_species
		room = kuat_mega_shipyard_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	is_triggered_only = yes
	option = {
		name = executor_build.8010.a
		hidden_effect = { 
			end_event_chain = kuat_mission_0_chain
			country_event = { id = executor_build.8011 days = 360 random = 360 } 
		}
	}
	option = {
		name = executor_build.8010.b
		trigger = {
			OR = {
				event_target:fallen_empire_kuat = {
					opinion_level = { who = root level > poor }
				}
				kuat_is_enable_apocalyptic_origin = yes
			}
			has_event_chain = kuat_mission_0_chain
			any_country = {
				OR = {
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
				has_communications = root
			}
		}
		hidden_effect = { country_event = { id = executor_build.8012 days = 360 random = 360 } }
	}
}

country_event = {
	id = executor_build.8011
	diplomatic = yes
	title = executor_build.8011.title
	desc = executor_build.8011.desc
	picture_event_data = {
		portrait = event_target:kuat_player_target_species
		room = kuat_mega_shipyard_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	is_triggered_only = yes
	immediate = { 
		save_event_target_as = target_for_kuat 
		set_global_flag = kuat_shadow_war_prepare 
	}
	option = {
		name = executor_build.8011.a
		event_target:fallen_empire_kuat = { 
			add_opinion_modifier = { who = event_target:target_for_kuat modifier = opinion_mutual_threat_kuat_fleet } 
			country_event = { id = executor_build.6 days = 3 }
		}
		hidden_effect = {
			every_megastructure = {
				limit = { is_megastructure_type = exe_outer_gate_disable }
				upgrade_megastructure_to = exe_outer_gate
				finish_upgrade = yes
			}
			every_playable_country = {
				limit = { is_ai = no }
				set_country_flag = can_pass_by set_country_flag = can_pass_inner_by
			}
			every_megastructure = { limit = { is_megastructure_type = exe_outer_gate } activate_gateway = this }
		}
	}
	after = { if = {
		limit = { has_special_project = exe_enable_kuat_stargate }
		abort_special_project = { type = exe_enable_kuat_stargate location = event_target:exe_outer_gate_disable }
	} }
}

#最后的挑战，毁灭堕落帝国
country_event = {
	id = executor_build.8012
	diplomatic = yes
	title = executor_build.8012.title
	desc = executor_build.8012.desc
	picture_event_data = {
		portrait = event_target:kuat_player_target_species
		room = kuat_mega_shipyard_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	is_triggered_only = yes
	immediate = {
		set_global_flag = executor_build.8012.fired
	}
	option = {
		name = executor_build.8012.a
		hidden_effect = {
			every_system = {
				limit = { OR = {
					has_star_flag = myst_system_1
					has_star_flag = myst_system_2
					has_star_flag = myst_system_3
					has_star_flag = myst_system_4
				} }
				if = {
					limit = { 
						exists = space_owner 
						space_owner = { NOT = { is_same_value = event_target:fallen_empire_kuat } }
					}
					every_system_planet = {
						limit = { is_colony = yes }
						set_owner = event_target:fallen_empire_kuat
					}
					every_fleet_in_system = { set_owner = event_target:fallen_empire_kuat }
				}
				else_if = {
					limit = { NOT = { exists = space_owner } }
					create_starbase = {
						size = "starbase_citadel"
						owner = event_target:fallen_empire_kuat
						module = "shipyard"
						module = "gun_battery"
						module = "gun_battery"
						module = "gun_battery"
						module = "gun_battery"
						module = "gun_battery"
						building = "target_uplink_computer"
						building = "defense_grid"
						building = "colossus_yards"
						building = "titan_yards"
					}
					system_star = { create_kuat_system_fleet = yes }
				}
			}
			end_event_chain = kuat_mission_0_chain
			country_event = { id = kuat_missions.4 days = 1 random = 2 }
		}
	}
}

#成功完成任务 开启科研任务
country_event = {
	id = executor_build.8013
	diplomatic = yes
	title = executor_build.8013.title
	desc = executor_build.8013.desc
	picture_event_data = {
		portrait = event_target:kuat_player_target_species
		room = kuat_mega_shipyard_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	is_triggered_only = yes
	trigger = {
		has_country_flag = kuat_mission_4_finished
	}
	option = {
		name = executor_build.8013.a
		hidden_effect = { 
			set_global_flag = kuat_under_shadow_cooperation_line
			begin_event_chain = { event_chain = kuat_mission_total_chain }
			country_event = { id = kuat_fallen_mission_reaction.6 days = 15 random = 30 } 
		}
	}
}

##########################
###### 额外检查机制 #######
##########################
country_event = {
	id = executor_build.10
	hide_window = yes
	is_triggered_only = yes
	trigger = { is_ai = no is_invisable_faction = no }
	immediate = { 
		every_system = { 
			remove_star_flag = kuat_starbase_megastructure_conbine_system
			if = {
				limit = { 
					exists = space_owner 
					space_owner = { is_same_value = prevprev } 
					starbase = { has_starbase_size >= starbase_outpost }
				}
				set_timed_star_flag = { flag = kuat_starbase_megastructure_conbine_system days = @kuat_support_delay }
				if = {
					limit = { NOT = { has_modifier = "kuat_starbase_megastructure_conbine_system" } }
					add_modifier = { modifier = "kuat_starbase_megastructure_conbine_system" days = @kuat_support_delay }
				}
			}
		}
		every_country = {
			limit = { is_ai = yes count_owned_fleet = { limit = { is_civilian = yes } count > 100 } }
			destroy_country = yes
		}
		if = {
			limit = { check_variable = { which = Eternal_legacyancient_chain_check_number value = 6 } }
			end_event_chain = Eternal_legacyancient_chain
		}
		if = {
			limit = { check_variable = { which = ag_legacy_stroy_chain_check_number value = 7 } }
			end_event_chain = ag_legacy_stroy_chain
		}
	}
}

country_event = {
	id = executor_build.1001
	hide_window = yes
	is_triggered_only = yes
	trigger = {  
		OR = {
			AND = { is_ai = yes is_country_type = default is_nirvana_empire = no command_limit > 800 }
			any_owned_ship = { OR = {
				check_modifier_value = { modifier = ship_steal_defeated_ship_chance value != 0 }
				check_modifier_value = { modifier = fleet_capture_defeated_leader_chance value != 0 }
			} }
			Kuat_auto_colony_reserve_condition = yes
		}
	}
	immediate = { 
		if = {
			limit = { is_ai = yes is_country_type = default is_nirvana_empire = no command_limit > 800 }
			set_country_flag = kuat_command_limit_always_temple_800
			kuat_battle_clear_ship_modifier = { modifier = command_limit_mult DAYS = 30 }
			kuat_battle_clear_ship_modifier = { modifier = command_limit_add subtract = 780 DAYS = 30 }
		}
		if = {
			limit = { any_owned_ship = { check_modifier_value = { modifier = ship_steal_defeated_ship_chance value != 0 } } }
			every_owned_ship = {
				limit = { check_modifier_value = { modifier = ship_steal_defeated_ship_chance value != 0 } }
				kuat_battle_clear_ship_modifier = { modifier = ship_steal_defeated_ship_chance DAYS = 30 }
			}
		}
		if = {
			limit = { any_owned_ship = { check_modifier_value = { modifier = fleet_capture_defeated_leader_chance value != 0 } } }
			every_owned_ship = {
				limit = { check_modifier_value = { modifier = fleet_capture_defeated_leader_chance value != 0 } }
				kuat_battle_clear_ship_modifier = { modifier = fleet_capture_defeated_leader_chance DAYS = 30 }
			}
		}
		kuat_str_auto_colony_total_reserve = yes
	}
}

country_event = {
	id = executor_build.1002
	hide_window = yes
	is_triggered_only = yes
	trigger = { kuat_is_enable_eternal_origin = yes }
	immediate = { 
		every_owned_planet = {
			limit = {
				OR = {
					NOT = { is_variable_set = kuat_building_producation_index }
					NOT = { is_variable_set = kuat_planet_free_houses_average_int }
					NOT = { check_variable = { which = kuat_building_producation_index value = value:kuat_pop_amount } }
					NOT = { check_variable = { which = kuat_planet_free_houses_average_int value = trigger:free_housing } }
				}
			}
			set_variable = { which = kuat_building_producation_index value = value:kuat_pop_amount }
			set_variable = { which = kuat_planet_free_houses_average_int value = trigger:free_housing }
			multiply_variable = { which = kuat_planet_free_houses_average_int value = 0.01 }
			set_variable = { which = kuat_planet_house_average_int value = kuat_planet_free_houses_average_int }
			if = { limit = { check_variable = { which = kuat_planet_house_average_int value > 0 } } set_variable = { which = kuat_planet_pop_assembly_average_int value = kuat_planet_house_average_int } }
			else = { set_variable = { which = kuat_planet_pop_assembly_average_int value = 0 } }
		} 
		every_owned_planet = {
			limit = { 
				has_building = building_eternal_pop_assembly
				owner = { kuat_is_forbidden_ee_production_var = no }
			}
			set_planet_flag = can_organic_assemble_flag
			if = {
				limit = { check_modifier_value = { modifier = bonus_pop_growth_mult value > 1 } }
				kuat_battle_clear_ship_modifier = { modifier = bonus_pop_growth_mult subtract = 1 DAYS = 30 }
			}
			if = {
				limit = { check_modifier_value = { modifier = planet_pop_assembly_mult value > 1 } }
				kuat_battle_clear_ship_modifier = { modifier = planet_pop_assembly_mult subtract = 1 DAYS = 30 }
			}
			if = {
				limit = { check_modifier_value = { modifier = planet_pop_assembly_add value > 0 } }
				kuat_battle_clear_ship_modifier = { modifier = planet_pop_assembly_mult DAYS = 30 }
			}
		}
		if = {
			limit = { 
				exists = event_target:eternal_support_country 
				has_communications = event_target:eternal_support_country 
			}
			every_country = {
				limit = { NOT = { is_same_value = event_target:eternal_support_country } }
				if = {
					limit = { is_hostile = root }
					event_target:eternal_support_country = { set_faction_hostility = { target = prev set_friendly = no set_hostile = yes set_neutral = no } }
				}
				if = {
					limit = { NOT = { is_hostile = root } }
					event_target:eternal_support_country = { set_faction_hostility = { target = prev set_friendly = no set_hostile = no set_neutral = yes } }
				}
			}
		}
	}
}

planet_event = {
	id = executor_build.1004
	title = "executor_build.1004.title"
	desc = "executor_build.1004.desc"
	diplomatic = yes
	picture_event_data = { room = clocks_room }
	custom_gui = "kuat_event_m_window"
	custom_gui_option = "kuat_event_m_option"
	is_triggered_only = yes
	pre_triggers = { has_owner = yes }
	trigger = { 
		has_planet_flag = colonied_eternal_ringworld
		NOT = { has_planet_flag = colonied_eternal_ringworld_over }
		is_planet_class = pc_kuat_eternal_ringworld_habitable 
		owner = { kuat_is_enable_eternal_origin = yes }
	}
	immediate = { set_planet_flag = colonied_eternal_ringworld_over }
	option = {
		name = executor_build.1004.a
		hidden_effect = { 
			while = { limit = { free_district_slots > 0 } add_district = district_arcology_kuat_housing } 
			if = { limit = { free_building_slots > 0 owner = { kuat_is_enable_eternal_origin = yes } } add_building = building_eternal_pop_assembly }
			if = { limit = { free_building_slots > 0 owner = { is_nirvana_empire_council = yes } } add_building = building_cloud_castle }
			if = { limit = { free_building_slots > 0 owner = { is_nirvana_empire_dragon = yes } } add_building = building_aurora_shrine }
			if = { limit = { free_building_slots > 0 owner = { has_technology = tr_eternal_building_alloys_Forge } } add_building = building_eternal_alloys_Forge add_building = building_foundry_1 }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_starshipgirls_assembly_plant } } } add_building = swgs_building_starshipgirls_assembly_plant }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_building_Fleet_Forge } } } add_building = swgs_building_Fleet_Forge }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_building_eddy_monument } } } add_building = swgs_building_eddy_monument }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_coordinated_operations } } } add_building = swgs_building_fleet_academy }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TRAT = swg_trait_dark_side } } } add_building = swgs_building_trial_court }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TRAT = swg_trait_ligth_side } } } add_building = swgs_building_jedi_temple }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_coordinated_operations } } } add_building = swgs_building_fleetlink }
			while = { limit = { free_building_slots > 0 owner = { has_technology = tr_eternal_building_research_center } } add_building = building_eternal_research_center }
		}
	}
	option = {
		name = executor_build.1004.c
		hidden_effect = { 
			while = { limit = { free_district_slots > 0 } add_district = district_arcology_kuat_science } 
			if = { limit = { free_building_slots > 0 owner = { kuat_is_enable_eternal_origin = yes } } add_building = building_eternal_pop_assembly }
			if = { limit = { free_building_slots > 0 owner = { is_nirvana_empire_council = yes } } add_building = building_cloud_castle }
			if = { limit = { free_building_slots > 0 owner = { is_nirvana_empire_dragon = yes } } add_building = building_aurora_shrine }
			if = { limit = { free_building_slots > 0 owner = { has_technology = tr_eternal_building_business_complex } } add_building = building_eternal_business_complex }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_starshipgirls_assembly_plant } } } add_building = swgs_building_starshipgirls_assembly_plant }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_building_eddy_monument } } } add_building = swgs_building_eddy_monument }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_coordinated_operations } } } add_building = swgs_building_fleetlink }
			while = { limit = { free_building_slots > 0 owner = { has_technology = tr_eternal_building_research_center } } add_building = building_eternal_research_center }
		} 
	}
	option = {
		name = executor_build.1004.b
		hidden_effect = { 
			while = { limit = { free_district_slots > 0 } add_district = district_arcology_kuat_Military }
			if = { limit = { free_building_slots > 0 owner = { kuat_is_enable_eternal_origin = yes } } add_building = building_eternal_pop_assembly }
			if = { limit = { free_building_slots > 0 owner = { is_nirvana_empire_council = yes } } add_building = building_cloud_castle }
			if = { limit = { free_building_slots > 0 owner = { is_nirvana_empire_dragon = yes } } add_building = building_aurora_shrine }
			if = { limit = { free_building_slots > 0 owner = { has_technology = tr_eternal_building_alloys_Forge } } add_building = building_eternal_alloys_Forge add_building = building_foundry_1 }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_starshipgirls_assembly_plant } } } add_building = swgs_building_starshipgirls_assembly_plant }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_building_Fleet_Forge } } } add_building = swgs_building_Fleet_Forge }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_building_eddy_monument } } } add_building = swgs_building_eddy_monument }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_coordinated_operations } } } add_building = swgs_building_fleetlink }
			while = { limit = { free_building_slots > 0 owner = { has_technology = tr_eternal_building_volatile resource_income_compare = { resource = volatile_motes value < 1001 } } } add_building = building_eternal_volatile_focer }
			while = { limit = { free_building_slots > 0 owner = { has_technology = tr_eternal_building_research_center resource_income_compare = { resource = volatile_motes value > 1000 } } } add_building = building_eternal_research_center }
		}
	}
	option = {
		name = executor_build.1004.d
		hidden_effect = { 
			while = { limit = { free_district_slots > 0 } add_district = district_arcology_kuat_Khaydarin } 
			if = { limit = { free_building_slots > 0 owner = { kuat_is_enable_eternal_origin = yes } } add_building = building_eternal_pop_assembly }
			if = { limit = { free_building_slots > 0 owner = { is_nirvana_empire_council = yes } } add_building = building_cloud_castle }
			if = { limit = { free_building_slots > 0 owner = { is_nirvana_empire_dragon = yes } } add_building = building_aurora_shrine }
			if = { limit = { free_building_slots > 0 owner = { has_technology = tr_eternal_building_alloys_Forge } } add_building = building_eternal_alloys_Forge add_building = building_foundry_1 }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_starshipgirls_assembly_plant } } } add_building = swgs_building_starshipgirls_assembly_plant }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_building_Fleet_Forge } } } add_building = swgs_building_Fleet_Forge }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_building_eddy_monument } } } add_building = swgs_building_eddy_monument }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_coordinated_operations } } } add_building = swgs_building_fleetlink }
			while = { limit = { free_building_slots > 0 owner = { has_technology = tr_eternal_building_exotic resource_income_compare = { resource = exotic_gases value < 1001 } } } add_building = building_eternal_exotic_focer }
			while = { limit = { free_building_slots > 0 owner = { has_technology = tr_eternal_building_research_center resource_income_compare = { resource = exotic_gases value > 1000 } } } add_building = building_eternal_research_center }
		}
	}
	option = {
		name = executor_build.1004.e
		hidden_effect = { 
			while = { limit = { free_district_slots > 0 } add_district = district_arcology_Kuat_civilian_industry }
			if = { limit = { free_building_slots > 0 owner = { kuat_is_enable_eternal_origin = yes } } add_building = building_eternal_pop_assembly }
			if = { limit = { free_building_slots > 0 owner = { is_nirvana_empire_council = yes } } add_building = building_cloud_castle }
			if = { limit = { free_building_slots > 0 owner = { is_nirvana_empire_dragon = yes } } add_building = building_aurora_shrine }
			if = { limit = { free_building_slots > 0 owner = { has_technology = tr_eternal_building_alloys_Forge } } add_building = building_eternal_alloys_Forge add_building = building_foundry_1 }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_starshipgirls_assembly_plant } } } add_building = swgs_building_starshipgirls_assembly_plant }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_building_Fleet_Forge } } } add_building = swgs_building_Fleet_Forge } 
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_building_eddy_monument } } } add_building = swgs_building_eddy_monument }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_coordinated_operations } } } add_building = swgs_building_fleetlink }
			while = { limit = { free_building_slots > 0 owner = { has_technology = tr_eternal_building_crystals resource_income_compare = { resource = rare_crystals value < 1001 } } } add_building = building_eternal_crystals_focer }
			while = { limit = { free_building_slots > 0 owner = { has_technology = tr_eternal_building_research_center resource_income_compare = { resource = rare_crystals value > 1000 } } } add_building = building_eternal_research_center }
		}
	}
	option = {
		name = executor_build.1004.f
		hidden_effect = { 
			while = { limit = { free_district_slots > 0 } add_district = district_arcology_eternal_Khaydarin } 
			if = { limit = { free_building_slots > 0 owner = { kuat_is_enable_eternal_origin = yes } } add_building = building_eternal_pop_assembly }
			if = { limit = { free_building_slots > 0 owner = { is_nirvana_empire_council = yes } } add_building = building_cloud_castle }
			if = { limit = { free_building_slots > 0 owner = { is_nirvana_empire_dragon = yes } } add_building = building_aurora_shrine }
			if = { limit = { free_building_slots > 0 owner = { has_technology = tr_eternal_building_alloys_Forge } } add_building = building_eternal_alloys_Forge add_building = building_foundry_1 }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_starshipgirls_assembly_plant } } } add_building = swgs_building_starshipgirls_assembly_plant }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_building_Fleet_Forge } } } add_building = swgs_building_Fleet_Forge } 
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_building_eddy_monument } } } add_building = swgs_building_eddy_monument }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_coordinated_operations } } } add_building = swgs_building_fleet_academy }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TRAT = swg_trait_dark_side } } } add_building = swgs_building_trial_court }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TRAT = swg_trait_ligth_side } } } add_building = swgs_building_jedi_temple }
			if = { limit = { free_building_slots > 0 owner = { kuat_has_swgs_tech = { TECH = swgs_tech_coordinated_operations } } } add_building = swgs_building_fleetlink }
			while = { limit = { free_building_slots > 0 owner = { has_technology = tr_eternal_building_research_center } } add_building = building_eternal_research_center }
		}
	}
}

planet_event = {
	id = executor_build.1005
	hide_window = yes
	is_triggered_only = yes
	trigger = { has_planet_flag = enable_kuat_shield }
	immediate = {
		solar_system = {
			random_system_ambient_object = {
				limit = {
					has_ambient_object_flag = kuat_planet_shield_effect_object_@root
				}
				destroy_ambient_object = this
			}
		}
		remove_planet_flag = enable_kuat_shield
		set_timed_planet_flag = { flag = enable_kuat_shield_cooldown days = 1800 }
	}
}

country_event = {
	id = executor_build.1006
	hide_window = yes
	is_triggered_only = yes
	trigger = { any_owned_planet = { has_planet_flag = has_building_kuat_command_center_auto } }
	immediate = { 
		every_owned_planet = {
			limit = { has_planet_flag = has_building_kuat_command_center_auto }
			kuat_reset_auto_colony_variable = yes
		}
	}
}

country_event = {
	id = executor_build.1007
	title = "executor_build.1007.title"
	desc = "executor_build.1007.desc"
	hide_window = no
	diplomatic = yes
	picture_event_data = { room = kuat_mega_support_mkga_room }
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	is_triggered_only = yes
	trigger = { NOT = { has_active_event = { executor_build.1007 } } }
	option = { name = "executor_build.1007.a" }
}

country_event = {
	id = executor_build.1008
	title = "executor_build.1008.title"
	desc = "executor_build.1008.desc"
	diplomatic = yes
	picture_event_data = { 
		portrait = root
		room = root 
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	is_triggered_only = yes
	trigger = { NOT = { has_active_event = { executor_build.1007 } } }
	option = { 
		name = "executor_build.1008.a" 
		trigger = {
			OR = {
				AND = {
					has_global_flag = install_kuat_mod 
					NOR = { kuat_is_enable_apocalyptic_origin = yes kuat_is_enable_eternal_origin = yes }
				}
				AND = {
					has_global_flag = install_kuat_mod 
					kuat_is_enable_apocalyptic_origin = yes
				}
			}
		}
		hidden_effect = {
			if = {
				limit = { 
					has_global_flag = install_kuat_mod 
					NOR = { kuat_is_enable_apocalyptic_origin = yes kuat_is_enable_eternal_origin = yes }
				}
				country_event = { id = kuat_shipyard.1 }
			}
			else_if = {
				limit = { 
					has_global_flag = install_kuat_mod 
					kuat_is_enable_apocalyptic_origin = yes
				}
				country_event = { id = kuat_origin.9 }
			}
		} 
	}
	option = { 
		name = "executor_build.1008.b" 
		trigger = { has_global_flag = kuat_test }
		allow = {
			custom_tooltip = { 
				fail_text = executor_build.1008.check.resource
				resource_stockpile_compare = { resource = energy value > 50000 }
			}
			custom_tooltip = { 
				fail_text = executor_build.1008.check.flag
				NOT = { has_country_flag = kuat_storming_placing_selector_temple }
			}
		}
		hidden_effect = { kuat_storming_placing_selector = yes }
	}
	option = { 
		name = "executor_build.1008.c" 
		allow = {
			custom_tooltip = { 
				fail_text = executor_build.1008.check.planet
				any_owned_planet = {
					owner = {  
						is_ai = no
						has_technology = tech_kuat_command_center 
					}
					PR_prmt_trgr_HC = { MORE = 1900 }
					kuat_is_not_allow_to_build_auto_planet = no
				}
			}
		}
		hidden_effect = {
			every_owned_planet = {
				limit = {
					owner = {  
						is_ai = no
						has_technology = tech_kuat_command_center 
					}
					PR_prmt_trgr_HC = { MORE = 1900 }
					kuat_is_not_allow_to_build_auto_planet = no
				}
				select_decision = { name = Building_The_Kuat_Command_Line_Auto_planet }
			}
		}
	}
	option = {
		name = "executor_build.1008.clear_storm" 
		custom_tooltip = "executor_build.1008.clear_storm_tooltip"
		trigger = {
			any_cosmic_storm = { NOR = {
				is_storm_type = kuat_support_celestic_storm
				is_storm_type = kuat_support_nexus_storm
				is_storm_type = kuat_support_particle_storm
				is_storm_type = kuat_support_shroud_storm
			} }
		}
		hidden_effect = {
			every_cosmic_storm = {
				limit = { NOR = {
					is_storm_type = kuat_support_celestic_storm
					is_storm_type = kuat_support_nexus_storm
					is_storm_type = kuat_support_particle_storm
					is_storm_type = kuat_support_shroud_storm
				} }
				destroy_cosmic_storm = yes
			}
		}
	}
	option = {
		name = "executor_build.1008.d" 
		trigger = {
			is_ai = no
			OR = {
				kuat_is_enable_shadow_origin = yes
				kuat_is_enable_eternal_origin = yes
			}
		}
		hidden_effect = {
			country_event = { 
				id = kuat_event_memory.1 
			} 
		}
	}
	option = {
		name = "executor_build.1008.f" 
		allow = {
			custom_tooltip = "remove_ship_need_exists"
			hidden_trigger = {
				is_player_country = yes
				any_controlled_fleet = {
					num_ships = 1
					NOT = { exists = leader }
					is_ship_class = shipclass_military
					has_enable_total_flagship_system_false = yes
				}
			}
		}
		custom_tooltip = "remove_ship_need_exists_tooltip"
		hidden_effect = {
			every_controlled_fleet = {
				limit = {
					num_ships = 1
					is_ship_class = shipclass_military
					NOT = { exists = leader }
					has_enable_total_flagship_system_false = yes
				}
				delete_fleet = { target = this destroy_template = yes kill_leader = no }
				root = { change_variable = { which = destroyed_fleet value = prev.trigger:num_ships } }
			}
			if = {
				limit = { is_variable_set = destroyed_fleet }
				random_list = {
					10 = { add_resource = { alloys = 3000 mult = destroyed_fleet } }
					20 = { add_resource = { alloys = 2000 mult = destroyed_fleet } }
					30 = { add_resource = { alloys = 1000 mult = destroyed_fleet } }
					40 = { add_resource = { alloys = 500 mult = destroyed_fleet } }
					50 = { add_resource = { alloys = 250 mult = destroyed_fleet } }
					60 = { add_resource = { alloys = 125 mult = destroyed_fleet } }
				}
				reroll_random = yes
				clear_variable = destroyed_fleet
			}
		}
	}
	option = { name = "executor_build.1008.e" default_hide_option = yes }
}


country_event = {
	id = executor_build.1009
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_cosmic_storm = { 
			limit = { has_storm_flag = storm_kuat_support_shroud_storm_special_deployed } 
			destroy_cosmic_storm = yes 
		}
		if = {
			limit = { any_cosmic_storm = { NOR = {
				is_storm_type = kuat_support_celestic_storm
				is_storm_type = kuat_support_nexus_storm
				is_storm_type = kuat_support_particle_storm
				is_storm_type = kuat_support_shroud_storm
			} } }
			every_cosmic_storm = {
				limit = { NOR = {
					is_storm_type = kuat_support_celestic_storm
					is_storm_type = kuat_support_nexus_storm
					is_storm_type = kuat_support_particle_storm
					is_storm_type = kuat_support_shroud_storm
				} }
				destroy_cosmic_storm = yes
			}
		}
	}
}

country_event = {
	id = executor_build.1010
	title = "executor_build.1010.title"
	desc = "executor_build.1010.desc"
	diplomatic = yes
	picture_event_data = { room = 70152858_p0_room }
	custom_gui = "kuat_event_m_window"
	custom_gui_option = "kuat_event_m_option"
	is_triggered_only = yes
	trigger = {
		is_ai = no
		NOT = { has_active_event = { executor_build.1010 } }
	}
	option = {
		name = executor_build.1010.a
		trigger = {
			has_existing_ship_design = high_Imperial_star_destroyer
		}
		hidden_effect = {
			event_target:BlackholeShipyard = { 
				solar_system = { spawn_megastructure = { 
					type = BlackholeShipyard_high_Imperial_star_destroyer_1 
					planet = star owner = space_owner
				} }
				remove_megastructure = this 
			}
		}
	}
	option = {
		name = executor_build.1010.b
		trigger = {
			has_existing_ship_design = horrizone
		}
		hidden_effect = {
			event_target:BlackholeShipyard = { 
				solar_system = { spawn_megastructure = { 
					type = BlackholeShipyard_horrizone_1 
					planet = star owner = space_owner
				} }
				remove_megastructure = this 
			}
		}
	}
	option = {
		name = executor_build.1010.c
		trigger = {
			has_existing_ship_design = swfo_resurgent
		}
		hidden_effect = {
			event_target:BlackholeShipyard = { 
				solar_system = { spawn_megastructure = { 
					type = BlackholeShipyard_swfo_resurgent_modelclone_1 
					planet = star owner = space_owner
				} }
				remove_megastructure = this 
			}
		}
	}
	option = {
		name = executor_build.1010.d
		trigger = {
			has_existing_ship_design = Annihilator
		}
		hidden_effect = {
			event_target:BlackholeShipyard = { 
				solar_system = { spawn_megastructure = { 
					type = BlackholeShipyard_Annihilator_1 
					planet = star owner = space_owner
				} }
				remove_megastructure = this 
			}
		}
	}
	option = {
		name = executor_build.1010.e
		trigger = {
			has_existing_ship_design = kuat_compellor
		}
		hidden_effect = {
			event_target:BlackholeShipyard = { 
				solar_system = { spawn_megastructure = { 
					type = BlackholeShipyard_Compellor_ship_1 
					planet = star owner = space_owner
				} }
				remove_megastructure = this 
			}
		}
	}
	option = {
		name = executor_build.1010.f
		trigger = {
			has_existing_ship_design = nebula_dominance
		}
		hidden_effect = {
			event_target:BlackholeShipyard = { 
				solar_system = { spawn_megastructure = { 
					type = BlackholeShipyard_nebula_dominance_1 
					planet = star owner = space_owner
				} }
				remove_megastructure = this 
			}
		}
	}
	option = {
		name = executor_build.1010.g
		trigger = {
			has_existing_ship_design = eclipse
		}
		hidden_effect = {
			event_target:BlackholeShipyard = { 
				solar_system = { spawn_megastructure = { 
					type = BlackholeShipyard_eclipse_locator_1 
					planet = star owner = space_owner
				} }
				remove_megastructure = this 
			}
		}
	}
	option = {
		name = executor_build.1010.h
		trigger = {
			has_existing_ship_design = kuat_legator
		}
		hidden_effect = {
			event_target:BlackholeShipyard = { 
				solar_system = { spawn_megastructure = { 
					type = BlackholeShipyard_Legator_class_1 
					planet = star owner = space_owner
				} }
				remove_megastructure = this 
			}
		}
	}
	option = {
		name = executor_build.1010.i
		trigger = {
			has_existing_ship_design = Vengeance
		}
		hidden_effect = {
			event_target:BlackholeShipyard = { 
				solar_system = { spawn_megastructure = { 
					type = BlackholeShipyard_Vengeance_1 
					planet = star owner = space_owner
				} }
				remove_megastructure = this 
			}
		}
	}
}
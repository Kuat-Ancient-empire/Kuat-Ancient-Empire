namespace = kuat_origin
country_event = {
	id = kuat_origin.0
	hide_window = yes
	is_triggered_only = yes
	trigger = { 
		is_ai = no
		has_origin = origin_kuat_apocalyptic 
	}
	immediate = { 
		set_global_flag = difficult_exe_invasion
		set_global_flag = enable_modifer_check
		set_global_flag = enable_origin_kuat_apocalyptic 
	}
}

#Triggered on game start, for common start.
country_event = {
	id = kuat_origin.1
	hide_window = yes
	is_triggered_only = yes
	
	trigger = { 
		is_ai = no
		has_origin = origin_kuat_apocalyptic 
	}
	
	immediate = {
		every_playable_country = {
			limit = { NOT = { has_communications = root } }
			establish_communications_no_message = root
		}
		random_system = {
			limit = { has_star_flag = kuat_initial_origin_system }
			kuat_origin_system_initial_creating = yes
		}
		event_target:Kuat_system_int = {
			random_system_planet = {
				limit = { has_planet_flag = center_world }
				save_event_target_as = new_home_planet
			}
		}
		set_country_flag = can_restore_the_black_hole
		set_country_flag = can_have_starbase_country
		set_country_flag = can_be_kuat_building
		set_global_flag = give_all_tech_flag
		set_global_flag = final_stage
		set_global_flag = can_have_tecn
		give_technology = { tech = tech_kuat_ground_yards message = no }
		give_technology = { tech = tech_kuat_megastructrue message = no }
		give_technology = { tech = tech_kuat_resource_center message = no }
		give_technology = { tech = tech_kuat_command_center message = no }
		give_technology = { tech = tech_kuat_founfry message = no }
		give_technology = { tech = tech_kuat_databank message = no }
		give_technology = { tech = tech_kuat_shield message = no }
		give_technology = { tech = tech_kuat_reactor message = no }
		give_technology = { tech = tech_kuat_THRUSTER message = no }
		give_technology = { tech = tech_exe_jump_drive message = no }
		give_technology = { tech = tech_kuat_noway message = no }
		give_technology = { tech = tech_eternal_fleet message = no }
		give_technology = { tech = tech_kuat_starbase message = no }
		give_technology = { tech = tech_kuat_megastructrue message = no }
		create_ship_design = { design = "Name_boss_Venator" }
		add_ship_design = last_created_design
		create_ship_design = { design = "Name_boss_Raider" }
		add_ship_design = last_created_design
		create_ship_design = { design = "Name_boss_Horriwer" }
		add_ship_design = last_created_design
		create_ship_design = { design = "Name_boss_EMPIRE" }
		add_ship_design = last_created_design
		create_ship_design = { design = "Name_boss_EXECUTOR" }
		add_ship_design = last_created_design
		create_ship_design = { design = "Name_boss_Dominance" }
		add_ship_design = last_created_design
		create_ship_design = { design = "Name_boss_eclipse" }
		add_ship_design = last_created_design
		random_country = {
			limit = { is_country_type = fallen_empire }
			root = { copy_techs_from = { target = prev } }
		}
		set_country_flag = kuat_starting_country
		random_owned_planet = {
			save_event_target_as = previous_home_planet
			solar_system = { save_event_target_as = previous_home_system }
		}
		event_target:previous_home_planet = {
			solar_system = {
				remove_star_flag = empire_home_system
				remove_star_flag = ring_world_built
				set_star_flag = empire_cluster
			}
		}
		add_modifier = { modifier = being_kuat days = -1 }
		event_target:Kuat_system_int = {
			create_starbase = {
				size = "starbase_starport"
				module = "shipyard"
				module = "trading_hub"
				building = "crew_quarters"
				owner = root
			}
		}
		event_target:Kuat_system_int_1 = {
			create_starbase = {
				size = "starbase_starport"
				module = "shipyard"
				module = "trading_hub"
				building = "crew_quarters"
				owner = root
			}
		}
		event_target:Kuat_system_int_2 = {
			create_starbase = {
				size = "starbase_starport"
				module = "shipyard"
				module = "trading_hub"
				building = "crew_quarters"
				owner = root
			}
		}
		event_target:Kuat_system_int_3 = {
			create_starbase = {
				size = "starbase_starport"
				module = "shipyard"
				module = "trading_hub"
				building = "crew_quarters"
				owner = root
			}
		}
		event_target:Kuat_system_int_4 = {
			create_starbase = {
				size = "starbase_starport"
				module = "shipyard"
				module = "trading_hub"
				building = "crew_quarters"
				owner = root
			}
		}
		event_target:previous_home_planet = {
			every_owned_pop = {
				resettle_pop = {
					pop = this
					planet = event_target:new_home_planet
				}
				unemploy_pop = yes
			}
		}
		event_target:Kuat_system_int = {
			random_system_planet = {
				limit = {
					is_star = yes
				}
				save_event_target_as = new_home_system_loc
			}
			random_system_planet = {
				limit = {
					has_planet_flag = center_world
				}
				set_planet_flag = ring_center_kuat_world
				set_owner = root
				set_controller = root
				set_capital = yes
				solar_system = { generate_home_system_resources = yes }
				generate_start_deposits_and_blockers = yes
				generate_start_buildings_and_districts = yes
				root = {
					random_owned_leader = {
						limit = {
							leader_class = governor
						}
						unassign_leader = yes
						save_event_target_as = target_governor
					}
				}
				sector = { assign_leader = event_target:target_governor }
				remove_all_buildings = yes
				add_building = building_kuat_command_center
				add_building = building_kuat_databank
				add_building = building_kuat_shield
				add_building = building_kuat_foundry
				add_building = building_kuat_ground_yards
				add_building = building_kuat_resource_center
				add_building = building_kuat_resource_center
				add_building = building_kuat_resource_center
				add_building = building_kuat_resource_center
				add_building = building_kuat_resource_center
				add_building = building_kuat_resource_center
				add_building = building_kuat_resource_center
				add_building = building_kuat_resource_center
				add_building = building_kuat_resource_center
				add_building = building_kuat_resource_center
				add_building = building_kuat_resource_center
				while = { count = 122 create_pop = { species = owner_main_species } }
				while = { count = 70 add_district = district_city }
			}
		}
		event_target:previous_home_planet = {
			solar_system = {
				every_fleet_in_system = {
					if = {
						limit = { exists = leader }
						leader = { unassign_leader = this }
					}
					delete_fleet = this
				}
				set_name = random
				random_system_planet = {
					limit = { is_star = yes }
					set_name = solar_system
				}
			}
			remove_planet = yes
		}
		every_owned_pop_species = { set_species_homeworld = event_target:new_home_planet }
		create_fleet = {
			effect = {
				set_owner = root
				create_ship = {
					name = random
					random_existing_design = science
				}
				set_fleet_stance = evasive
				set_location = root.capital_scope.star
				owner = {
					random_owned_leader = {
						limit = {
							leader_class = scientist
							NOR = {
								is_researching_area = physics
								is_researching_area = society
								is_researching_area = engineering
							}
						}
						save_event_target_as = ag_science_ship_leader
					}
				}
				if = {
					limit = {
						exists = event_target:ag_science_ship_leader
					}
					set_leader = event_target:ag_science_ship_leader
				}
			}
		}
		set_name = Name_kuat
		change_country_flag = {
			icon = {
				category = "Kuat"
				file = "Kuat_flags_01.dds"
			}
			background = {
				category = "backgrounds"
				file = "00_solid.dds"
			}
			colors = { "blue" "blue" "null" "null" }
		}
		create_fleet = {
			effect = {
				set_owner = root
				create_ship = {
					name = random
					random_existing_design = constructor
				}
				set_fleet_stance = evasive
				set_location = root.capital_star
			}
		}
		every_system_within_border = {
			limit = { has_star_flag = kuat_initial_system }
			create_exe_invasion_fleet = {
				is_boss = no  can_disband = yes
				Fleet_owner = root
				bombardment = indiscriminate
				Dominance = 1  Imperial = 96  DIFF = 2
				Location = prev.star
				fleet_stance = aggressive
				modifier = being_kuat_fleet	
			}
		}
		every_planet_within_border = {
			limit = {
				has_planet_flag = center_world
				NOT = { has_planet_flag = ring_center_kuat_world }
			}
			set_owner = root
			set_controller = root
			sector = { assign_leader = event_target:target_governor }
			remove_all_buildings = yes
			add_building = building_kuat_command_center
			add_building = building_kuat_databank
			add_building = building_kuat_shield
			add_building = building_kuat_foundry
			add_building = building_kuat_ground_yards
			add_building = building_kuat_resource_center
			add_building = building_kuat_resource_center
			add_building = building_kuat_resource_center
			add_building = building_kuat_resource_center
			add_building = building_kuat_resource_center
			add_building = building_kuat_resource_center
			add_building = building_kuat_resource_center
			add_building = building_kuat_resource_center
			add_building = building_kuat_resource_center
			add_building = building_kuat_resource_center
			add_building = building_kuat_resource_center
			while = { count = 122 create_pop = { species = owner_main_species } }
			while = { count = 70 add_district = district_city }
		}
		country_event = { id = kuat_origin.7 days = 1 }
	}
}

country_event = {
	id = kuat_origin.7
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				exists = event_target:previous_home_planet
				event_target:previous_home_planet = {
					num_pops > 0
				}
			}
			random_galaxy_planet = {
				limit = { has_planet_flag = ring_center_kuat_world }
				save_event_target_as = new_home_planet
				set_owner = root
				set_controller = root
				set_capital = yes
			}
			event_target:previous_home_planet = {
				every_owned_pop = {
					resettle_pop = {
						pop = this
						planet = event_target:new_home_planet
					}
				}
				remove_planet = yes
			}
		}
		capital_scope = { every_owned_pop = { unemploy_pop = yes } }
		every_planet_within_border = {
			limit = {
				has_deposit_for = shipclass_mining_station
				has_planet_flag = starting_mining_target
				has_mining_station = no
			}
			create_mining_station = { owner = root }
		}
		every_planet_within_border = {
			limit = {
				has_deposit_for = shipclass_research_station
				has_planet_flag = starting_research_target
				has_research_station = no
			}
			create_research_station = { owner = root }
		}
		every_system = {
			limit = {
				has_star_flag = kuat_initial_system
			}
			#To prevent advanced AI control cluster systems if there are too many AI.
			if = {
				limit = {
					exists = space_owner
					space_owner = {
						NOT = { has_country_flag = kuat_starting_country }
					}
				}
				every_fleet_in_system = { delete_fleet = this }
				every_system_planet = {
					limit = { is_colony = yes }
					every_owned_pop = { kill_pop = yes }
					remove_all_buildings = yes
					remove_all_districts = yes
					destroy_colony = yes
				}
			}
			#Remove hyperlane created by other mods.
			every_system = {
				limit = {
					has_hyperlane_to = prev
					NOT = { has_star_flag = kuat_initial_system }
				}
				remove_hyperlane = { from = this to = prev }
			}
		}
	}
}

country_event = {
	id = kuat_origin.2
	title = kuat_origin.2.name
	desc = kuat_origin.2.desc
	diplomatic = yes
	picture_event_data = { room = matter_decompressor_room }
	custom_gui = "kuat_event_m_window"
	custom_gui_option = "kuat_event_m_option"
	show_sound = event_sensor_ping
	location = root.capital_scope
	is_triggered_only = yes
	immediate = { set_country_flag = build_only_once }
	option = { name = kuat_origin.2.a }
}

country_event = {
	id = kuat_origin.3
	title = kuat_origin.3.name
	desc = kuat_origin.3.desc
	diplomatic = yes
	picture_event_data = { room = matter_decompressor_room }
	custom_gui = "kuat_event_m_window"
	custom_gui_option = "kuat_event_m_option"
	show_sound = event_sensor_ping
	location = root.capital_scope
	is_triggered_only = yes
	option = { name = kuat_origin.2.a }
}

country_event = {
	id = kuat_origin.4
	title = kuat_origin.4.name
	desc = kuat_origin.4.desc
	diplomatic = yes
	picture_event_data = { room = matter_decompressor_room }
	custom_gui = "kuat_event_m_window"
	custom_gui_option = "kuat_event_m_option"
	show_sound = event_sensor_ping
	location = root.capital_scope
	is_triggered_only = yes
	option = { name = kuat_origin.2.a }
}

country_event = {
	id = kuat_origin.5
	title = kuat_origin.5.name
	desc = kuat_origin.5.desc
	diplomatic = yes
	picture_event_data = { room = matter_decompressor_room }
	custom_gui = "kuat_event_m_window"
	custom_gui_option = "kuat_event_m_option"
	show_sound = event_sensor_ping
	location = root.capital_scope
	is_triggered_only = yes
	option = { name = kuat_origin.2.a }
}

country_event = {
	id = kuat_origin.6
	title = kuat_origin.6.name
	desc = kuat_origin.6.desc
	diplomatic = yes
	picture_event_data = { room = matter_decompressor_room }
	custom_gui = "kuat_event_m_window"
	custom_gui_option = "kuat_event_m_option"
	show_sound = event_sensor_ping
	location = root.capital_scope
	is_triggered_only = yes
	option = { name = kuat_origin.2.a }
}

country_event = {
	id = kuat_origin.8
	title = kuat_origin.8.name
	desc = kuat_origin.8.desc
	diplomatic = yes
	picture_event_data = { room = matter_decompressor_room }
	custom_gui = "kuat_event_m_window"
	custom_gui_option = "kuat_event_m_option"
	show_sound = event_sensor_ping
	location = root.capital_scope
	is_triggered_only = yes
	trigger = { 
		has_origin = origin_kuat_apocalyptic 
		from = { 
			OR = {
				is_megastructure_type = exe_black_hole_restore 
				is_megastructure_type = exe_black_hole_facility
			}
		}
		NOT = { has_country_flag = fire_once }
	}
	immediate = {
		every_country = { 
			limit = { NOT = { has_event_chain = ag_return_eternal_chain } }
			begin_event_chain = { event_chain = ag_return_eternal_chain }
		}
		set_country_flag = can_pass_by
		set_country_flag = can_pass_inner_by
		if = {
			limit = { NOT = { exists = event_target:kuat_support_country } }
			create_country = {
				name = "Name_Kuat_Support"
				type = kuat_support
				flag = {
					icon = {
						category = "Kuat"
						file = "flag_swep_1.dds"
					}
					background = {
						category = "backgrounds"
						file = "circle.dds"
					}
					colors = { "red" "black" "null" "null" }
				}
				effect = {
					save_global_event_target_as = kuat_support_country
					establish_communications_no_message = root
				}
			}
			add_modifier = { modifier = country_production_for_vanilla days = -1 }
			set_country_flag = fire_once
			reset_return_eternal_fleet = yes
		}
	}
	option = { name = kuat_origin.8.a }
}

country_event = {
	id = kuat_origin.9
	title = kuat_origin.9.title
	desc = kuat_origin.9.desc
	picture_event_data = {
		portrait = root.ruler
		room = kuat_mega_shipyard_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	location = root.capital_scope
	is_triggered_only = yes
	diplomatic = yes
	trigger = { 
		exists = event_target:kuat_support_country
		OR = {
			kuat_support_diplo_event_active = no
			from = { is_same_value = root }
		}
		has_origin = origin_kuat_apocalyptic 
		OR = {
			from = { is_country_type = kuat_support }
			from = { is_same_value = root }
		}
	}
	#reinforment
	option = {
		name = kuat_origin.9.a
		hidden_effect = { country_event = { id = kuat_origin.10 } }
	}
	#mission what
	option = {
		name = kuat_origin.9.b
		hidden_effect = { country_event = { id = kuat_origin.11 } }
	}
	#about eternal
	option = {
		name = kuat_origin.9.c
		hidden_effect = { country_event = { id = kuat_origin.14 } }
	}
	option = {
		name = kuat_shipyard.exit
		default_hide_option = yes
	}
}

country_event = {
	id = kuat_origin.10
	title = kuat_origin.9.title
	desc = kuat_origin.10.desc
	picture_event_data = {
		portrait = root.ruler
		room = kuat_mega_shipyard_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	location = root.capital_scope
	is_triggered_only = yes
	diplomatic = yes
	trigger = { has_origin = origin_kuat_apocalyptic }
	#one flagship fleet
	option = {
		name = kuat_origin.10.a
		allow = {
			custom_tooltip = {
				fail_text = kuat_origin.10.a.fail
				check_variable = { which = eternal_bornus_var value > 250 }
			}
		}
		hidden_effect = { 
			subtract_variable = { which = eternal_bornus_var value = 250 }
			capital_scope = {
				create_exe_invasion_fleet = {
					is_boss = no  can_disband = yes
					flag = kuat_origin_fleet
					Fleet_owner = root
					fleet_stance = aggressive
					bombardment = indiscriminate
					Dominance = 1  Imperial = 96  DIFF = 2
					modifier = being_kuat_fleet
					Location = prev
				}
			}
			create_message = {
				type = "SPACEPORT_CONSTRUCTION_MESSAGE_TYPE"
				localization = "kuat_support_class_arrived_desc"
				days = 30
				target = root
				variable = { type = name localization = "capital_planet" scope = root.capital_scope }
			}
			country_event = { id = kuat_origin.10 }
		}
	}
	#two flagship fleet
	option = {
		name = kuat_origin.10.b
		allow = {
			custom_tooltip = {
				fail_text = kuat_origin.10.b.fail
				check_variable = { which = eternal_bornus_var value > 500 }
			}
		}
		hidden_effect = { 
			subtract_variable = { which = eternal_bornus_var value = 500 }
			capital_scope = {
				create_exe_invasion_fleet = {
					is_boss = no  can_disband = yes
					Fleet_owner = root
					flag = kuat_origin_fleet
					fleet_stance = aggressive
					bombardment = indiscriminate
					Executor = 1  Imperial = 96  DIFF = 2
					modifier = being_kuat_fleet
					Location = prev
				}
			}
			create_message = {
				type = "SPACEPORT_CONSTRUCTION_MESSAGE_TYPE"
				localization = "kuat_support_class_arrived_desc"
				days = 30
				target = root
				variable = { type = name localization = "capital_planet" scope = root.capital_scope }
			}
			country_event = { id = kuat_origin.10 }
		}
	}
	#three flagship fleet
	option = {
		name = kuat_origin.10.c
		allow = {
			custom_tooltip = {
				fail_text = kuat_origin.10.c.fail
				check_variable = { which = eternal_bornus_var value > 1000 }
			}
		}
		hidden_effect = { 
			subtract_variable = { which = eternal_bornus_var value = 1000 }
			capital_scope = {
				create_exe_invasion_fleet = {
					is_boss = no  can_disband = yes
					Fleet_owner = root
					flag = kuat_origin_fleet
					fleet_stance = aggressive
					bombardment = indiscriminate
					Eclipse = 1  Imperial = 96  DIFF = 2
					modifier = being_kuat_fleet
					Location = prev
				}
			}
			create_message = {
				type = "SPACEPORT_CONSTRUCTION_MESSAGE_TYPE"
				localization = "kuat_support_class_arrived_desc"
				days = 30
				target = root
				variable = { type = name localization = "capital_planet" scope = root.capital_scope }
			}
			country_event = { id = kuat_origin.10 }
		}
	}
	option = {
		name = kuat_shipyard.return
		hidden_effect = { country_event = { id = kuat_origin.9 } }
	}
	option = {
		name = kuat_shipyard.exit
		default_hide_option = yes
	}
}

country_event = {
	id = kuat_origin.11
	title = kuat_origin.9.title
	desc = kuat_origin.11.desc
	picture_event_data = {
		portrait = root.ruler
		room = kuat_mega_shipyard_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	location = root.capital_scope
	is_triggered_only = yes
	diplomatic = yes
	trigger = { has_origin = origin_kuat_apocalyptic }
	#what about now
	option = {
		name = kuat_origin.11.a
		hidden_effect = { country_event = { id = kuat_origin.12 } }
	}
	#what about other area
	option = {
		name = kuat_origin.11.b
		hidden_effect = { country_event = { id = kuat_origin.13 } }
	}
	option = {
		name = kuat_shipyard.return
		hidden_effect = { country_event = { id = kuat_origin.9 } }
	}
}

country_event = {
	id = kuat_origin.12
	title = kuat_origin.9.title
	desc = kuat_origin.12.desc
	picture_event_data = {
		portrait = root.ruler
		room = kuat_mega_shipyard_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	location = root.capital_scope
	is_triggered_only = yes
	diplomatic = yes
	trigger = { has_origin = origin_kuat_apocalyptic }
	#just begining
	option = {
		name = kuat_origin.12.a
		trigger = {
			event_target:global_event_country = {
				check_variable = { which = eternal_fleet_return_index value < 5 }
			}
		}
		response_text = kuat_origin.12.a.respon
	}
	#just middle
	option = {
		name = kuat_origin.12.b
		trigger = {
			event_target:global_event_country = {
				check_variable = { which = eternal_fleet_return_index value >= 5 }
			}
		}
		response_text = kuat_origin.12.b.respon
	}
	#end of war
	option = {
		name = kuat_origin.12.c
		trigger = {
			event_target:global_event_country = {
				check_variable = { which = eternal_fleet_return_index value > 10 }
			}
		}
		custom_tooltip = kuat_origin.12.tooltip
		hidden_effect = {
			win = yes
			every_owned_fleet = {
				limit = { has_fleet_flag = kuat_origin_fleet }
				delete_fleet = { target = this destroy_template = yes kill_leader = no }
			}
		}
		response_text = kuat_origin.12.c.respon
	}
	option = {
		name = kuat_shipyard.return
		hidden_effect = { country_event = { id = kuat_origin.11 } }
	}
}

country_event = {
	id = kuat_origin.13
	title = kuat_origin.9.title
	desc = kuat_origin.13.desc
	picture_event_data = {
		portrait = root.ruler
		room = kuat_mega_shipyard_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	location = root.capital_scope
	is_triggered_only = yes
	diplomatic = yes
	trigger = { has_origin = origin_kuat_apocalyptic }
	#most over
	option = {
		name = kuat_origin.13.a
		hidden_effect = { add_random_research_option = { add_progress = 1 } }
		response_text = kuat_origin.13.a.respon
	}
	option = {
		name = kuat_shipyard.return
		hidden_effect = { country_event = { id = kuat_origin.11 } }
	}
}

#eternal fleet situation
country_event = {
	id = kuat_origin.14
	title = kuat_origin.9.title
	desc = kuat_origin.14.desc
	picture_event_data = {
		portrait = root.ruler
		room = kuat_mega_shipyard_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	location = root.capital_scope
	is_triggered_only = yes
	diplomatic = yes
	trigger = { has_origin = origin_kuat_apocalyptic }
	#continue
	option = {
		name = kuat_origin.14.a
		allow = {
			custom_tooltip = {
				fail_text = kuat_origin.10.b.fail
				check_variable = { which = eternal_bornus_var value > 500 }
			}
		}
		hidden_effect = { country_event = { id = kuat_origin.15 } }
	}
	option = {
		name = kuat_shipyard.return
		hidden_effect = { country_event = { id = kuat_origin.9 } }
	}
}

#other battle area situation
country_event = {
	id = kuat_origin.15
	title = kuat_origin.9.title
	desc = {
		trigger = {
			NOR = {
				has_country_flag = check_origin_kuat_area_1
				has_country_flag = check_origin_kuat_area_2
				has_country_flag = check_origin_kuat_area_3
				has_country_flag = check_origin_kuat_area_4
			}
		}
		text = kuat_origin.15.desc
	}
	desc = {
		trigger = {
			switch = {
				trigger = has_country_flag
				check_origin_kuat_area_1 = { text = kuat_origin.area_1 }
				check_origin_kuat_area_2 = { text = kuat_origin.area_2 }
				check_origin_kuat_area_3 = { text = kuat_origin.area_3 }
				check_origin_kuat_area_4 = { text = kuat_origin.area_4 }
			}
		}
	}
	picture_event_data = {
		portrait = root.ruler
		room = kuat_mega_shipyard_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	location = root.capital_scope
	is_triggered_only = yes
	diplomatic = yes
	trigger = { has_origin = origin_kuat_apocalyptic }
	immediate = {
		change_variable = { which = var_origin_15 value = 1 }
	}
	option = {
		name = kuat_origin.15.a
		hidden_effect = { 
			set_country_flag = check_origin_kuat_area_1
			if = {
				limit = { check_variable = { which = var_origin_15 value < 5 } }
				add_random_research_option = { add_progress = 1 } 
			}
			remove_country_flag = check_origin_kuat_area_2
			remove_country_flag = check_origin_kuat_area_3
			remove_country_flag = check_origin_kuat_area_4
			country_event = { id = kuat_origin.15 }
		}
	}
	option = {
		name = kuat_origin.15.b
		hidden_effect = { 
			set_country_flag = check_origin_kuat_area_2
			if = {
				limit = { check_variable = { which = var_origin_15 value < 5 } }
				add_random_research_option = { add_progress = 1 } 
			}
			remove_country_flag = check_origin_kuat_area_1
			remove_country_flag = check_origin_kuat_area_3
			remove_country_flag = check_origin_kuat_area_4
			country_event = { id = kuat_origin.15 }
		}
	}
	option = {
		name = kuat_origin.15.c
		hidden_effect = { 
			set_country_flag = check_origin_kuat_area_3
			if = {
				limit = { check_variable = { which = var_origin_15 value < 5 } }
				add_random_research_option = { add_progress = 1 } 
			}
			remove_country_flag = check_origin_kuat_area_1
			remove_country_flag = check_origin_kuat_area_2
			remove_country_flag = check_origin_kuat_area_4
			country_event = { id = kuat_origin.15 }
		}
	}
	option = {
		name = kuat_origin.15.d
		hidden_effect = { 
			if = {
				limit = { NOT = { has_country_flag = fire_only_once } }
				set_country_flag = fire_only_once
				capital_scope = {
					create_exe_invasion_fleet = {
						is_boss = no  can_disband = yes
						Fleet_owner = root
						flag = kuat_origin_fleet
						fleet_stance = aggressive
						bombardment = indiscriminate
						Eclipse = 1  Harrower = 192
						DIFF = 2
						modifier = being_kuat_fleet
						Location = prev
					}
				}
				create_message = {
					type = "SPACEPORT_CONSTRUCTION_MESSAGE_TYPE"
					localization = "kuat_support_class_arrived_desc"
					days = 30
					target = root
					variable = { type = name localization = "capital_planet" scope = root.capital_scope }
				}
			}
			set_country_flag = check_origin_kuat_area_4
			if = {
				limit = { check_variable = { which = var_origin_15 value < 5 } }
				add_random_research_option = { add_progress = 1 } 
			}
			remove_country_flag = check_origin_kuat_area_1
			remove_country_flag = check_origin_kuat_area_2
			remove_country_flag = check_origin_kuat_area_3
			country_event = { id = kuat_origin.15 }
		}
	}
	option = {
		name = kuat_shipyard.return
		hidden_effect = { 
			remove_country_flag = check_origin_kuat_area_1
			remove_country_flag = check_origin_kuat_area_2
			remove_country_flag = check_origin_kuat_area_3
			remove_country_flag = check_origin_kuat_area_4
			country_event = { id = kuat_origin.14 } 
		}
	}
	option = {
		name = kuat_shipyard.exit
		hidden_effect = { 
			remove_country_flag = check_origin_kuat_area_1
			remove_country_flag = check_origin_kuat_area_2
			remove_country_flag = check_origin_kuat_area_3
			remove_country_flag = check_origin_kuat_area_4
		}
		default_hide_option = yes
	}
}
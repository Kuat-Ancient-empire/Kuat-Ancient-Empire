namespace = kuat_situation

planet_event = {
	id = kuat_situation.9999
	title = kuat_situation.9999.name
	desc = kuat_situation.9999.desc
	picture = GFX_evt_city_planet
	is_triggered_only = yes
	show_sound = event_default

	location = root

	pre_triggers = {
		has_owner = yes
		is_capital = yes
	}

	trigger = {
		NOT = { has_planet_flag = fire_only_once_situation }
		owner = { has_country_flag = chossen_the_eternal_path }
	}

	immediate = { set_planet_flag = fire_only_once_situation }

	option = {
		name = INTERESTING
		owner = { start_situation = { type = situation_unlocked_the_eternal_fleet target = this } }
	}
}

#random event
situation_event = {
	id = kuat_situation.1
	title = kuat_situation.1.name
	desc = kuat_situation.1.desc
	picture = GFX_evt_ship_in_orbit
	show_sound = event_alien_nature
	is_triggered_only = yes
	location = target

	trigger = {
		current_situation_approach = situation_hositile_altitude
		NOR = {
			has_situation_flag = kuat_random_event_hositle
			current_stage = stage_3
		}
	}

	immediate = { set_situation_flag = kuat_random_event_hositle }

	option = {
		name = kuat_situation.1.A
		custom_tooltip = kuat_situation.1.A.tooltip
		hidden_effect = { set_situation_flag = kuat_very_hostile }
	}
	option = {
		name = kuat_situation.1.B
		custom_tooltip = kuat_situation.1.B.tooltip
		hidden_effect = { set_situation_flag = kuat_hostile }
		small_artifact_reward = yes
	}
}

situation_event = {
	id = kuat_situation.2
	title = kuat_situation.2.name
	desc = kuat_situation.2.desc
	picture = GFX_evt_ancient_databank
	show_sound = event_activating_unknown_technology
	is_triggered_only = yes
	location = target

	trigger = {
		current_situation_approach = situation_netural_altitude
		NOR = {
			has_situation_flag = kuat_random_event_netural
			current_stage = stage_3
		}
	}

	immediate = { set_situation_flag = kuat_random_event_netural }

	option = {
		name = kuat_situation.2.A
		custom_tooltip = kuat_situation.2.A.tooltip
		hidden_effect = { set_situation_flag = kuat_counrsey }
	}
	option = {
		name = kuat_situation.2.B
		custom_tooltip = kuat_situation.2.B.tooltip
		small_artifact_reward = yes
	}
}

situation_event = {
	id = kuat_situation.3
	title = kuat_situation.3.name
	desc = kuat_situation.3.desc
	picture = GFX_evt_sapient_AI
	show_sound = event_ai_started
	is_triggered_only = yes
	location = target

	trigger = {
		current_situation_approach = situation_friendly_altitude
		NOR = {
			has_situation_flag = kuat_random_event_friendly
			current_stage = stage_3
		}
	}

	immediate = { set_situation_flag = kuat_random_event_friendly }

	option = {
		name = kuat_situation.3.A
		custom_tooltip = kuat_situation.3.A.tooltip
		hidden_effect = { set_situation_flag = kuat_acception_ai }
	}
	option = {
		name = kuat_situation.3.B
		custom_tooltip = kuat_situation.3.B.tooltip
		hidden_effect = { set_situation_flag = kuat_refuse_ai }
		large_artifact_reward = yes
	}
}

#50% event
situation_event = {
	id = kuat_situation.4
	title = kuat_situation.4.name
	desc = kuat_situation.4.desc
	picture = GFX_evt_sapient_AI
	show_sound = event_ai_started
	is_triggered_only = yes
	location = target

	option = {
		name = kuat_situation.4.A
		custom_tooltip = kuat_situation.4.A.tooltip
		set_situation_approach = situation_friendly_altitude
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_green
			text = set_situation_approach_icon_text
		}
		add_situation_progress = 15
	}
	option = {
		name = kuat_situation.4.B
		custom_tooltip = kuat_situation.4.B.tooltip
		set_situation_approach = situation_netural_altitude
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_yellow
			text = set_situation_approach_icon_text
		}
	}
	option = {
		name = kuat_situation.4.C
		custom_tooltip = kuat_situation.4.C.tooltip
		set_situation_approach = situation_hositile_altitude
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_red
			text = set_situation_approach_icon_text
		}
		add_situation_progress = -15
	}
}

#150% event
situation_event = {
	id = kuat_situation.5
	title = kuat_situation.5.name
	desc = kuat_situation.5.desc
	picture = GFX_evt_sapient_AI
	show_sound = event_ai_started
	is_triggered_only = yes
	location = target

	option = {
		name = kuat_situation.5.A
		custom_tooltip = kuat_situation.5.A.tooltip
		set_situation_approach = situation_friendly_altitude
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_green
			text = set_situation_approach_icon_text
		}
		add_situation_progress = 15
	}
	option = {
		name = kuat_situation.5.B
		custom_tooltip = kuat_situation.5.B.tooltip
		set_situation_approach = situation_netural_altitude
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_yellow
			text = set_situation_approach_icon_text
		}
	}
	option = {
		name = kuat_situation.5.C
		custom_tooltip = kuat_situation.5.C.tooltip
		set_situation_approach = situation_hositile_altitude
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_red
			text = set_situation_approach_icon_text
		}
		add_situation_progress = -15
	}
}

#end events #hositile
situation_event = {
	id = kuat_situation.6
	title = kuat_situation.6.name
	desc = kuat_situation.6.desc
	picture = GFX_evt_em_war_4
	show_sound = event_ai_started
	is_triggered_only = yes
	location = target

	option = {
		name = kuat_situation.6.A
		custom_tooltip = kuat_situation.6.A.tooltip
		hidden_effect = { 
			target = { add_planet_devastation = 75 }
			large_artifact_reward = yes 
		}
	}
	after = { destroy_situation = this }
}

#end events #neutral
situation_event = {
	id = kuat_situation.7
	title = kuat_situation.7.name
	desc = kuat_situation.7.desc
	picture = GFX_evt_em_war_2
	show_sound = event_ai_started
	is_triggered_only = yes
	location = target

	option = {
		name = kuat_situation.7.A
		custom_tooltip = kuat_situation.7.A.tooltip
		hidden_effect = { 
			target = { add_planet_devastation = 75 }
			large_artifact_reward = yes 
		}
	}
	option = {
		name = kuat_situation.7.B
		custom_tooltip = kuat_situation.7.B.tooltip
		hidden_effect = {
			every_playable_country = {
				limit = { is_ai = no }
				create_ship_design = { design = Name_boss_crisis_EFS_3 }
				add_ship_design = last_created_design
			}
		}
	}
	after = { destroy_situation = this }
}

#end events #friendly
situation_event = {
	id = kuat_situation.8
	title = kuat_situation.8.name
	desc = kuat_situation.8.desc
	picture = GFX_evt_em_war_1
	show_sound = event_ai_started
	is_triggered_only = yes
	location = target

	option = {
		name = kuat_situation.8.A
		custom_tooltip = kuat_situation.8.A.tooltip
		hidden_effect = {
			every_playable_country = {
				limit = { is_ai = no }
				create_ship_design = { design = Name_boss_crisis_EFS_3 }
				add_ship_design = last_created_design
			}
		}
	}
	after = { destroy_situation = this }
}





#random event hositle battle station-fight
situation_event = {
	id = kuat_situation.9
	title = kuat_situation.9.name
	desc = kuat_situation.9.desc
	picture = GFX_evt_ship_in_orbit
	show_sound = event_alien_nature
	is_triggered_only = yes
	location = target

	trigger = {
		current_situation_approach = situation_hositile_altitude
		NOR = {
			has_situation_flag = kuat_random_event_hositle
			current_stage = stage_1 current_stage = stage_3
		}
	}

	immediate = { set_situation_flag = kuat_random_event_hositle }

	option = {
		name = kuat_situation.9.A
		add_situation_progress = -10
	}
	option = {
		name = kuat_situation.9.B
		add_situation_progress = -5
	}
}

#random event hositle battle station-passive
situation_event = {
	id = kuat_situation.10
	title = kuat_situation.10.name
	desc = kuat_situation.10.desc
	picture = GFX_evt_ancient_databank
	show_sound = event_activating_unknown_technology
	is_triggered_only = yes
	location = target

	trigger = {
		current_situation_approach = situation_netural_altitude
		NOR = {
			has_situation_flag = kuat_random_event_netural
			current_stage = stage_1 current_stage = stage_3
		}
	}

	immediate = { set_situation_flag = kuat_random_event_netural }

	option = {
		name = kuat_situation.10.A
		custom_tooltip = kuat_situation.10.A.tooltip
		hidden_effect = { set_situation_flag = kuat_counrsey }
	}
	option = {
		name = kuat_situation.10.B
		add_situation_progress = -5
	}
}

#random event hositle battle station-control
situation_event = {
	id = kuat_situation.11
	title = kuat_situation.11.name
	desc = kuat_situation.11.desc
	picture = GFX_evt_sapient_AI
	show_sound = event_ai_started
	is_triggered_only = yes
	location = target

	trigger = {
		current_situation_approach = situation_friendly_altitude
		NOR = {
			has_situation_flag = kuat_random_event_friendly
			current_stage = stage_1 current_stage = stage_3
		}
	}

	immediate = { set_situation_flag = kuat_random_event_friendly }

	option = {
		name = kuat_situation.11.A
		custom_tooltip = kuat_situation.11.A.tooltip
		hidden_effect = { set_situation_flag = kuat_acception_ai }
	}
	option = {
		name = kuat_situation.11.B
		add_situation_progress = 10
		large_artifact_reward = yes
	}
}

#50% event find the datebank
situation_event = {
	id = kuat_situation.12
	title = kuat_situation.12.name
	desc = kuat_situation.12.desc
	picture = GFX_evt_ancient_databank
	show_sound = event_ai_started
	is_triggered_only = yes
	location = target

	option = {
		name = kuat_situation.12.A
		custom_tooltip = kuat_situation.12.A.tooltip
		set_situation_approach = "situation_friendly_altitude_station"
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_green
			text = set_situation_approach_icon_text
		}
		add_situation_progress = 15
	}
	option = {
		name = kuat_situation.12.B
		custom_tooltip = kuat_situation.12.B.tooltip
		set_situation_approach = "situation_netural_altitude_station"
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_yellow
			text = set_situation_approach_icon_text
		}
	}
	option = {
		name = kuat_situation.12.C
		custom_tooltip = kuat_situation.12.C.tooltip
		set_situation_approach = "situation_hositile_altitude_station"
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_red
			text = set_situation_approach_icon_text
		}
		add_situation_progress = -15
	}
}

#150% event know the eternal clue
situation_event = {
	id = kuat_situation.13
	title = kuat_situation.13.name
	desc = kuat_situation.13.desc
	picture = GFX_evt_sapient_AI
	show_sound = event_ai_started
	is_triggered_only = yes
	location = target
	option = {
		name = kuat_situation.13.A
		custom_tooltip = kuat_situation.13.A.tooltip
		set_situation_approach = "situation_friendly_altitude_station"
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_green
			text = set_situation_approach_icon_text
		}
		add_situation_progress = 15
	}
	option = {
		name = kuat_situation.13.B
		custom_tooltip = kuat_situation.13.B.tooltip
		set_situation_approach = "situation_netural_altitude_station"
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_yellow
			text = set_situation_approach_icon_text
		}
	}
	option = {
		name = kuat_situation.13.C
		custom_tooltip = kuat_situation.13.C.tooltip
		set_situation_approach = "situation_hositile_altitude_station"
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_red
			text = set_situation_approach_icon_text
		}
		add_situation_progress = -15
	}
}

#end events #hositile
situation_event = {
	id = kuat_situation.14
	title = kuat_situation.14.name
	desc = kuat_situation.14.desc
	picture = GFX_evt_em_war_4
	show_sound = event_ai_started
	is_triggered_only = yes
	location = target

	option = {
		name = kuat_situation.14.A
		trigger = { owner = { check_variable = { which = num_vaild_system value = 1 } } }
		custom_tooltip = kuat_situation.14.A.tooltip
		hidden_effect = { owner = { 
			add_random_research_option = { add_progress = 1 } 
			hidden_effect = { change_variable = { which = num_finish value = 1 } }
			add_event_chain_counter = { event_chain = ag_find_invasion_chain counter = ag_legacy_system_amount amount = 1 }
		} }
	}
	option = {
		name = kuat_situation.14.B
		trigger = { owner = { check_variable = { which = num_vaild_system value = 2 } } }
		custom_tooltip = kuat_situation.14.B.tooltip
		hidden_effect = { owner = { 
			add_random_research_option = { add_progress = 1 } 
			hidden_effect = { change_variable = { which = num_finish value = 1 } }
			add_event_chain_counter = { event_chain = ag_find_invasion_chain counter = ag_legacy_system_amount amount = 1 }
		} }
	}
	option = {
		name = kuat_situation.14.C
		trigger = { owner = { check_variable = { which = num_vaild_system value = 3 } } }
		custom_tooltip = kuat_situation.14.C.tooltip
		hidden_effect = { owner = { 
			add_random_research_option = { add_progress = 1 } 
			hidden_effect = { change_variable = { which = num_finish value = 1 } }
			add_event_chain_counter = { event_chain = ag_find_invasion_chain counter = ag_legacy_system_amount amount = 1 }
		} }
	}
	after = { 
		destroy_situation = this 
		event_target:ag_kuat_invasion_country = {
			if = {
				limit = { NOT = { any_controlled_fleet = { has_fleet_flag = ag_kuat_invasion_fleet } } }
				random_system_within_border = {
					limit = { has_star_flag = eternal_starbase_megastructure_in_system }
					system_star = { create_exe_retrun_invasion_fleet_detail = yes }
				}
			}
		}
		every_playable_country = { country_event = { id = exe_return_invasion.33 } }
	}
}

#end events #neutral
situation_event = {
	id = kuat_situation.15
	title = kuat_situation.15.name
	desc = kuat_situation.15.desc
	picture = GFX_evt_em_war_2
	show_sound = event_ai_started
	is_triggered_only = yes
	location = target

	option = {
		name = kuat_situation.15.A
		trigger = { owner = { check_variable = { which = num_vaild_system value = 1 } } }
		custom_tooltip = kuat_situation.14.A.tooltip
		hidden_effect = { owner = { 
			add_random_research_option = { add_progress = 1 } 
			hidden_effect = { change_variable = { which = num_finish value = 1 } }
			add_event_chain_counter = { event_chain = ag_find_invasion_chain counter = ag_legacy_system_amount amount = 1 }
		} }
	}
	option = {
		name = kuat_situation.15.B
		trigger = { owner = { check_variable = { which = num_vaild_system value = 2 } } }
		custom_tooltip = kuat_situation.14.B.tooltip
		hidden_effect = { owner = { 
			add_random_research_option = { add_progress = 1 } 
			hidden_effect = { change_variable = { which = num_finish value = 1 } }
			add_event_chain_counter = { event_chain = ag_find_invasion_chain counter = ag_legacy_system_amount amount = 1 }
		} }
	}
	option = {
		name = kuat_situation.15.C
		trigger = { owner = { check_variable = { which = num_vaild_system value = 3 } } }
		custom_tooltip = kuat_situation.14.C.tooltip
		hidden_effect = { owner = { 
			add_random_research_option = { add_progress = 1 } 
			hidden_effect = { change_variable = { which = num_finish value = 1 } }
			add_event_chain_counter = { event_chain = ag_find_invasion_chain counter = ag_legacy_system_amount amount = 1 }
		} }
	}
	after = { 
		destroy_situation = this 
		event_target:ag_kuat_invasion_country = {
			if = {
				limit = { NOT = { any_controlled_fleet = { has_fleet_flag = ag_kuat_invasion_fleet } } }
				random_system_within_border = {
					limit = { has_star_flag = eternal_starbase_megastructure_in_system }
					system_star = { create_exe_retrun_invasion_fleet_detail = yes }
				}
			}
		}
		every_playable_country = { country_event = { id = exe_return_invasion.33 } }
	}
}

#end events #friendly
situation_event = {
	id = kuat_situation.16
	title = kuat_situation.16.name
	desc = kuat_situation.16.desc
	picture = GFX_evt_em_war_1
	show_sound = event_ai_started
	is_triggered_only = yes
	location = target

	option = {
		name = kuat_situation.16.A
		trigger = { owner = { check_variable = { which = num_vaild_system value = 1 } } }
		custom_tooltip = kuat_situation.14.A.tooltip
		hidden_effect = { owner = { 
			add_random_research_option = { add_progress = 1 } 
			hidden_effect = { change_variable = { which = num_finish value = 1 } }
			add_event_chain_counter = { event_chain = ag_find_invasion_chain counter = ag_legacy_system_amount amount = 1 }
		} }
	}
	option = {
		name = kuat_situation.16.B
		trigger = { owner = { check_variable = { which = num_vaild_system value = 2 } } }
		custom_tooltip = kuat_situation.14.B.tooltip
		hidden_effect = { owner = { 
			add_random_research_option = { add_progress = 1 } 
			hidden_effect = { change_variable = { which = num_finish value = 1 } }
			add_event_chain_counter = { event_chain = ag_find_invasion_chain counter = ag_legacy_system_amount amount = 1 }
		} }
	}
	option = {
		name = kuat_situation.16.C
		trigger = { owner = { check_variable = { which = num_vaild_system value = 3 } } }
		custom_tooltip = kuat_situation.14.C.tooltip
		hidden_effect = { owner = { 
			add_random_research_option = { add_progress = 1 } 
			hidden_effect = { change_variable = { which = num_finish value = 1 } }
			add_event_chain_counter = { event_chain = ag_find_invasion_chain counter = ag_legacy_system_amount amount = 1 }
		} }
	}
	after = { 
		destroy_situation = this 
		event_target:ag_kuat_invasion_country = {
			if = {
				limit = { NOT = { any_controlled_fleet = { has_fleet_flag = ag_kuat_invasion_fleet } } }
				random_system_within_border = {
					limit = { has_star_flag = eternal_starbase_megastructure_in_system }
					system_star = { create_exe_retrun_invasion_fleet_detail = yes }
				}
			}
		}
		every_playable_country = { country_event = { id = exe_return_invasion.33 } }
	}
}

#50% event find the datebank
situation_event = {
	id = kuat_situation.17
	title = kuat_situation.17.name
	desc = kuat_situation.17.desc
	picture = GFX_evt_ancient_databank
	show_sound = event_ai_started
	is_triggered_only = yes
	location = target

	option = {
		name = kuat_situation.12.A
		custom_tooltip = kuat_situation.12.A.tooltip
		set_situation_approach = "situation_friendly_altitude_station"
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_green
			text = set_situation_approach_icon_text
		}
		add_situation_progress = 15
	}
	option = {
		name = kuat_situation.12.B
		custom_tooltip = kuat_situation.12.B.tooltip
		set_situation_approach = "situation_netural_altitude_station"
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_yellow
			text = set_situation_approach_icon_text
		}
	}
	option = {
		name = kuat_situation.12.C
		custom_tooltip = kuat_situation.12.C.tooltip
		set_situation_approach = "situation_hositile_altitude_station"
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_red
			text = set_situation_approach_icon_text
		}
		add_situation_progress = -15
	}
}

#150% event know the eternal clue
situation_event = {
	id = kuat_situation.18
	title = kuat_situation.18.name
	desc = kuat_situation.18.desc
	picture = GFX_evt_sapient_AI
	show_sound = event_ai_started
	is_triggered_only = yes
	location = target
	option = {
		name = kuat_situation.13.A
		custom_tooltip = kuat_situation.13.A.tooltip
		set_situation_approach = "situation_friendly_altitude_station"
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_green
			text = set_situation_approach_icon_text
		}
		add_situation_progress = 15
	}
	option = {
		name = kuat_situation.13.B
		custom_tooltip = kuat_situation.13.B.tooltip
		set_situation_approach = "situation_netural_altitude_station"
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_yellow
			text = set_situation_approach_icon_text
		}
	}
	option = {
		name = kuat_situation.13.C
		custom_tooltip = kuat_situation.13.C.tooltip
		set_situation_approach = "situation_hositile_altitude_station"
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_red
			text = set_situation_approach_icon_text
		}
		add_situation_progress = -15
	}
}

#50% event find the datebank
situation_event = {
	id = kuat_situation.19
	title = kuat_situation.19.name
	desc = kuat_situation.19.desc
	picture = GFX_evt_ancient_databank
	show_sound = event_ai_started
	is_triggered_only = yes
	location = target

	option = {
		name = kuat_situation.12.A
		custom_tooltip = kuat_situation.12.A.tooltip
		set_situation_approach = "situation_friendly_altitude_station"
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_green
			text = set_situation_approach_icon_text
		}
		add_situation_progress = 15
	}
	option = {
		name = kuat_situation.12.B
		custom_tooltip = kuat_situation.12.B.tooltip
		set_situation_approach = "situation_netural_altitude_station"
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_yellow
			text = set_situation_approach_icon_text
		}
	}
	option = {
		name = kuat_situation.12.C
		custom_tooltip = kuat_situation.12.C.tooltip
		set_situation_approach = "situation_hositile_altitude_station"
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_red
			text = set_situation_approach_icon_text
		}
		add_situation_progress = -15
	}
}

#150% event know the eternal clue
situation_event = {
	id = kuat_situation.20
	title = kuat_situation.20.name
	desc = kuat_situation.20.desc
	picture = GFX_evt_sapient_AI
	show_sound = event_ai_started
	is_triggered_only = yes
	location = target
	option = {
		name = kuat_situation.13.A
		custom_tooltip = kuat_situation.13.A.tooltip
		set_situation_approach = "situation_friendly_altitude_station"
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_green
			text = set_situation_approach_icon_text
		}
		add_situation_progress = 15
	}
	option = {
		name = kuat_situation.13.B
		custom_tooltip = kuat_situation.13.B.tooltip
		set_situation_approach = "situation_netural_altitude_station"
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_yellow
			text = set_situation_approach_icon_text
		}
	}
	option = {
		name = kuat_situation.13.C
		custom_tooltip = kuat_situation.13.C.tooltip
		set_situation_approach = "situation_hositile_altitude_station"
		icon = {
			icon = GFX_situation_approach_research
			icon_background = GFX_situation_approach_bg_red
			text = set_situation_approach_icon_text
		}
		add_situation_progress = -15
	}
}
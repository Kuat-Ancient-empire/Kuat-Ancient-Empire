namespace = kuat_EEstart

country_event = {
	id = kuat_EEstart.1
	hide_window = yes
	is_triggered_only = yes
	trigger = { is_ai = no kuat_is_enable_eternal_origin = yes }
	immediate = {
		set_update_modifiers_batch = begin
		set_global_flag = has_origin_eternalthrone
		set_country_flag = Eternalempire
		save_global_event_target_as = Eternalempire
		if = {
			limit = { 
				has_country_flag = has_origin_kuat_eternal 
				NOT = { has_origin = origin_eternalthrone }
			}
			capital_scope = { spawn_system = { initializer = exe_zakuul_System max_jumps = 1 } }
			last_created_system = { create_starbase = { size = starbase_outpost owner = root } }
			event_target:EE_Home_World = {
				set_owner = root
				set_controller = root
				change_pc = pc_kuat_eternal_city
				generate_start_buildings_and_districts = yes
				remove_all_districts = yes
				clear_deposits = yes
				add_building = building_eternal_pop_assembly
				while = { count = 1 add_district = district_arcology_kuat_housing }
				while = { count = 1 add_district = district_arcology_kuat_Military }
				while = { count = 1 add_district = district_arcology_kuat_science }
				while = { count = 1 add_district = district_arcology_kuat_Khaydarin }
				while = { count = 1 add_district = district_arcology_Kuat_civilian_industry }
				while = { count = 1 add_district = district_arcology_eternal_Khaydarin }
				add_deposit = ss_auto_deposits
				add_deposit = ss_Solarfarm
				add_deposit = ss_volatile_motes
				add_deposit = ss_crystallinemin
				add_deposit = ss_gaseous_eruption
				while = { count = 15 create_pop = { species = owner_main_species } }
				set_name = "Zakuul"
				solar_system = {
					set_name = "Zakuul System"
					create_fleet = {
						effect = {
							set_owner = root
							create_ship = {
								name = random
								random_existing_design = science
							}
							set_fleet_stance = evasive
							set_location = root.capital_star
							owner = {
								random_owned_leader = {
									limit = { leader_class = scientist }
									save_event_target_as = ag_science_ship_leader
								}
							}
							if = {
								limit = { exists = event_target:ag_science_ship_leader }
								set_leader = event_target:ag_science_ship_leader
							}
						}
					}
					create_fleet = {
						effect = {
							set_owner = root
							create_ship = {
								name = random
								random_existing_design = constructor
							}
							set_fleet_stance = evasive
							set_location = root.capital_star
						}
					}
					create_fleet = {
						effect = {
							set_owner = root
							while = {
								count = 3
								create_ship = {
									name = random
									random_existing_design = corvette
								}
							}
							set_fleet_stance = aggressive
							set_location = root.capital_star
						}
					}
				}
			}
		}
		else_if = {
			limit = { 
				has_origin = origin_eternalthrone 
				NOT = { has_country_flag = has_origin_kuat_eternal }
			}
			random_owned_planet = {
				limit = { has_planet_flag = EE_Home_World }
				remove_all_districts = yes
				clear_deposits = yes
				add_building = building_eternal_pop_assembly
				while = { count = 1 add_district = district_arcology_kuat_housing }
				while = { count = 1 add_district = district_arcology_kuat_Military }
				while = { count = 1 add_district = district_arcology_kuat_science }
				while = { count = 1 add_district = district_arcology_kuat_Khaydarin }
				while = { count = 1 add_district = district_arcology_Kuat_civilian_industry }
				while = { count = 1 add_district = district_arcology_eternal_Khaydarin }
				add_deposit = ss_auto_deposits
				add_deposit = ss_Solarfarm
				add_deposit = ss_volatile_motes
				add_deposit = ss_crystallinemin
				add_deposit = ss_gaseous_eruption
				set_name = "Zakuul"
			}
			event_target:zakuul_system = { set_name = "Zakuul System" }
			change_country_flag = {
				icon = {
					category = "exe_invasion"
					file = "ge_o.dds"
				}
				background = {
					category = "backgrounds"
					file = "00_solid.dds"
				}
				colors = { "yellow" "black" "null" "null" }
			}
		}
		if = {
			limit = { NOT = { has_global_flag = difficult_exe_invasion } }
			remove_global_flag = normal_exe_invasion
			remove_global_flag = easy_exe_invasion
			remove_global_flag = ban_exe_invasion
			remove_global_flag = difficult_exe_invasion
			set_global_flag = difficult_exe_invasion
			event_target:global_event_country = { 
				set_variable = { which = exe_invasion_difficult_global_var value = 3 } 
				if = {
					limit = { has_global_flag = kuat_impulse_mod_settings }
					multiply_variable = { which = exe_invasion_difficult_global_var value = 3 }
				}
			}
		}
		switch = {
			trigger = has_global_flag
			easy_exe_invasion = { event_target:global_event_country = {
				set_variable = { which = exe_invasion_difficult_global_var value = 1 } 
				if = {
					limit = { has_global_flag = kuat_impulse_mod_settings }
					multiply_variable = { which = exe_invasion_difficult_global_var value = 1 }
				}
			} }
			normal_exe_invasion = { event_target:global_event_country = {
				set_variable = { which = exe_invasion_difficult_global_var value = 2 } 
				if = {
					limit = { has_global_flag = kuat_impulse_mod_settings }
					multiply_variable = { which = exe_invasion_difficult_global_var value = 2 }
				}
			} }
			difficult_exe_invasion = { event_target:global_event_country = {
				set_variable = { which = exe_invasion_difficult_global_var value = 3 } 
				if = {
					limit = { has_global_flag = kuat_impulse_mod_settings }
					multiply_variable = { which = exe_invasion_difficult_global_var value = 3 }
				}
			} }
			ban_exe_invasion = { event_target:global_event_country = {
				set_variable = { which = exe_invasion_difficult_global_var value = 4 } 
				if = {
					limit = { has_global_flag = kuat_impulse_mod_settings }
					multiply_variable = { which = exe_invasion_difficult_global_var value = 4 }
				}
			} }
		}
		country_event = { id = exe_invasion.1004 days = 1 }
		set_update_modifiers_batch = end
	}
}

planet_event = {
	id = kuat_EEstart.2
	title = kuat_EEstart.2.name
	desc = {
		trigger = { is_planet_class = pc_kuat_eternal_city }
		text = kuat_EEstart.2.desc
	}
	desc = {
		trigger = { is_planet_class = pc_kuat_eternal_ringworld_habitable }
		text = kuat_EEstart.2.ringworld.desc
	}
	show_sound = event_cityscape
	diplomatic = yes
	picture_event_data = { room = city_planet_room }
	custom_gui = "kuat_event_m_window"
	custom_gui_option = "kuat_event_m_option"
	is_triggered_only = yes
	option = { name = kuat_EEstart.2.a }
}

country_event = {
	id = kuat_EEstart.3
	title = kuat_EEstart.3.name
	desc = kuat_EEstart.3.desc
	diplomatic = yes
	picture_event_data = { room = ancient_AI_room }
	custom_gui = "kuat_event_window"
	custom_gui_option = "kuat_event_option"
	is_triggered_only = yes
	immediate = {
		set_country_flag = kuat_eternal_legacy_God_awakened_finished
		start_situation = { type = situation_legacy_pretext_action target = this }
	}
	option = {
		name = kuat_EEstart.3.a
		custom_tooltip = kuat_EEstart.3.tooltip
		hidden_effect = { 
			establish_communications_no_message = event_target:eternal_support_country 
			country_event = { id = kuat_EEstart.4 scopes = { from = event_target:eternal_support_country } days = 1 }
		}
	}
}

country_event = {
	id = kuat_EEstart.4
	title = "kuat_EEstart.4.title"
	desc = {
		trigger = { has_country_flag = fire_once_contact }
		text = "kuat_EEstart.4.fdesc"
	}
	desc = {
		trigger = { NOT = { has_country_flag = fire_once_contact } }
		text = "kuat_EEstart.4.desc"
	}
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:ETERNAL_LEADER
		room = Eternal_Empire_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	show_sound = event_wind_ruins
	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		exists = event_target:eternal_support_country
		kuat_is_enable_eternal_origin = yes
		OR = {
			from = { is_country_type = eternal_support }
			from = { is_country_type = eternal_support_guadian }
		}
		NOT = { has_global_flag = eternal_support_country_channal }
	}
	option = { 
		name = kuat_EEstart.4.a 
		is_dialog_only = yes
		hidden_effect = { set_country_flag = fire_once_contact }
		response_text = kuat_EEstart.4.a.resp 
	}
	option = { 
		name = kuat_EEstart.4.b 
		is_dialog_only = yes
		hidden_effect = { set_country_flag = fire_once_contact }
		response_text = kuat_EEstart.4.b.resp 
	}
	option = { 
		name = kuat_EEstart.4.c 
		is_dialog_only = yes
		hidden_effect = { set_country_flag = fire_once_contact }
		response_text = kuat_EEstart.4.c.resp 
	}
	option = { 
		name = kuat_EEstart.4.d 
		is_dialog_only = yes
		hidden_effect = { set_country_flag = fire_once_contact }
		response_text = kuat_EEstart.4.d.resp 
	}
	option = { 
		name = kuat_EEstart.4.e
		trigger = { NOT = { has_country_flag = fire_once_contact_control } }
		hidden_effect = { set_country_flag = fire_once_contact_free remove_country_flag = fire_once_contact }
		response_text = kuat_EEstart.4.e.resp 
	}
	option = { 
		name = kuat_EEstart.4.f
		trigger = { NOT = { has_country_flag = fire_once_contact_free } }
		hidden_effect = { set_country_flag = fire_once_contact_control remove_country_flag = fire_once_contact }
		response_text = kuat_EEstart.4.f.resp 
	}
}

country_event = {
	id = kuat_EEstart.5
	title = "kuat_EEstart.4.title"
	desc = "kuat_EEstart.5.desc"
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:ETERNAL_LEADER
		room = Eternal_Empire_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	show_sound = event_wind_ruins
	is_triggered_only = yes
	trigger = {
		has_established_contact = event_target:eternal_support_country
		OR = {
			has_country_flag = fire_once_contact_control
			has_country_flag = fire_once_contact_free
		}
		exists = event_target:eternal_support_country
		OR = {
			eternal_support_diplo_event_active = no
			from = { is_same_value = root }
		}
		kuat_is_enable_eternal_origin = yes
		OR = {
			from = { is_country_type = eternal_support }
			from = { is_country_type = eternal_support_guadian }
			from = { is_same_value = root }
		}
		NOT = { has_global_flag = eternal_support_country_channal }
	}
	option = {
		name = kuat_EEstart.5.a
		hidden_effect = { country_event = { id = kuat_EEstart.6 } }
	}
	#下达命令
	option = {
		name = kuat_EEstart.5.b
		trigger = { 
			check_variable = { which = eternal_kuat_invasion_fleet_num value >= 1 } 
			NOT = { has_global_flag = eternal_support_country_disabled }
		}
		allow = { fail_text = {
			text = "ag_kae_ge_invasion_209_mutex_tooltip"
			NOT = { has_country_flag = ag_kae_ge_invasion_209_mutex }
		} }
		hidden_effect = { country_event = { id = kuat_EEstart.7 } }
	}
	option = {
		name = kuat_EEstart.5.c
		trigger = { 
			check_variable = { which = eternal_kuat_invasion_fleet_num value < 10 }
			NOT = { has_global_flag = eternal_support_country_disabled }
		}
		allow = { resource_stockpile_compare = { resource = alloys value >= 1 mult = 1000000 } }
		add_resource = { alloys = -1 mult = 1000000 }
		hidden_effect = {
			clear_variable = country_energy_tax_amount
			change_variable = { which = eternal_kuat_invasion_fleet_num value = 1 }
			event_target:zakuul_system = { system_star = { create_mult_eternal_origin_eternal_fleet = { NUM = 1 } } }
		}
		response_text = kuat_EEstart.5.c.free
		is_dialog_only = yes
	}
	option = {
		name = kuat_EEstart.5.d
		trigger = { 
			from = { is_country_type = eternal_support_guadian }
			check_variable = { which = eternal_kuat_invasion_fleet_num value = 0 }
			NOT = { has_global_flag = eternal_support_country_disabled }
		}
		allow = { resource_stockpile_compare = { resource = alloys value >= 10 mult = 1000000 } }
		add_resource = { alloys = -10 mult = 2000000 }
		hidden_effect = {
			clear_variable = country_energy_tax_amount
			change_variable = { which = eternal_kuat_invasion_fleet_num value = 10 }
			event_target:zakuul_system = { system_star = { create_mult_eternal_origin_eternal_fleet = { NUM = 10 } } }
		}
		response_text = kuat_EEstart.5.c.free
		is_dialog_only = yes
	}
	#购买玩家舰队
	option = {
		name = kuat_EEstart.5.e
		trigger = { 
			from = { is_country_type = eternal_support_guadian }
			count_owned_fleet = {
				count < 5
				limit = { has_fleet_flag = eternal_kuat_player_fleet }
			}
			NOT = { has_global_flag = eternal_support_country_disabled }
		}
		allow = { 
			has_country_resource = { type = alloys amount >= 2000000 } 
			fail_text = {
				text = "kuat_EEstart.10.e.building_exist"
				NOT = { has_country_flag = kuat_get_eternalfleet_windup }
			}
		}
		hidden_effect = { 
			add_resource = { alloys = -1 mult = 2000000 }
			clear_variable = country_energy_tax_amount
			set_timed_country_flag = { flag = kuat_get_eternalfleet_windup days = 720 }
			save_event_target_as = eternal_fleet_controller
			event_target:zakuul_system = { system_star = { create_eternal_origin_player_eternal_fleet = yes } }
		}
		response_text = kuat_EEstart.5.e.free
		is_dialog_only = yes
	}
	option = {
		name = kuat_shipyard.exit
		default_hide_option = yes
	}
}

country_event = {
	id = kuat_EEstart.6
	title = "kuat_EEstart.4.title"
	desc = {
		trigger = { has_country_flag = fire_once_contact_free }
		text = kuat_EEstart.6.desc.free
	}
	desc = {
		trigger = { has_country_flag = fire_once_contact_control }
		text = kuat_EEstart.6.desc.control
	}
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:ETERNAL_LEADER
		room = Eternal_Empire_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	show_sound = event_wind_ruins
	is_triggered_only = yes
	trigger = { kuat_is_enable_eternal_origin = yes }
	option = {
		name = kuat_EEstart.6.a
		is_dialog_only = yes
		response_text = kuat_EEstart.6.a.res
	}
	option = {
		name = kuat_EEstart.6.b
		is_dialog_only = yes
		response_text = kuat_EEstart.6.b.res
	}
	option = {
		name = kuat_EEstart.6.c.free
		trigger = { has_country_flag = fire_once_contact_free }
		is_dialog_only = yes
		response_text = kuat_EEstart.6.c.res.free
	}
	option = {
		name = kuat_EEstart.6.c.control
		trigger = { has_country_flag = fire_once_contact_control }
		is_dialog_only = yes
		response_text = kuat_EEstart.6.c.res.control
	}
	option = {
		name = kuat_EEstart.6.d
		trigger = { has_country_flag = fire_once_contact_free }
		response_text = kuat_EEstart.6.d.res.free
	}
	option = {
		name = kuat_EEstart.6.d
		trigger = { has_country_flag = fire_once_contact_control }
		response_text = kuat_EEstart.6.d.res.control
	}
}

country_event = {
	id = kuat_EEstart.7
	title = "kuat_EEstart.4.title"
	desc = {
		trigger = { has_country_flag = fire_once_contact_free }
		text = kuat_EEstart.7.desc.free
	}
	desc = {
		trigger = { has_country_flag = fire_once_contact_control }
		text = kuat_EEstart.7.desc.control
	}
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:ETERNAL_LEADER
		room = Eternal_Empire_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	show_sound = event_wind_ruins
	is_triggered_only = yes
	trigger = { 
		kuat_is_enable_eternal_origin = yes 
		check_variable = { which = eternal_kuat_invasion_fleet_num value >= 1 }
	}
	#单一派遣
	option = {
		name = kuat_EEstart.7.a
		trigger = { check_variable = { which = eternal_kuat_invasion_fleet_num value >= 1 } }
		allow = { 
			custom_tooltip = {
				fail_text = kuat_EEstart.7.fail_reason.a
				NOT = { has_country_flag = have_been_ordered_eternal_fleet } 
			}
			custom_tooltip = {
				fail_text = kuat_EEstart.7.fail_reason.b
				NOT = { has_country_flag = eternal_fleet_attack_enenmy }
			}
		}
		hidden_effect = { set_country_flag = eternal_fleet_attack_enenmy country_event = { id = kuat_EEstart.8 } }
	}
	#全部派遣
	option = {
		name = kuat_EEstart.7.b
		trigger = { 
			has_country_flag = ag_kae_e_area_arc_site_project_completed
			check_variable = { which = eternal_kuat_invasion_fleet_num value >= 1 } 
		}
		allow = {
			custom_tooltip = {
				fail_text = kuat_EEstart.7.fail_reason.a
				NOT = { has_country_flag = have_been_ordered_eternal_fleet } 
			}
			custom_tooltip = {
				fail_text = kuat_EEstart.7.fail_reason.b
				NOT = { has_country_flag = eternal_fleet_destroy_enenmy }
			}
		}
		hidden_effect = { set_country_flag = eternal_fleet_destroy_enenmy country_event = { id = kuat_EEstart.9 } }
	}
	#退出
	option = {
		name = kuat_EEstart.7.c
		default_hide_option = yes
	}
}

country_event = {
	id = kuat_EEstart.8
	title = "kuat_EEstart.4.title"
	desc = "kuat_EEstart.8.desc"
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:ETERNAL_LEADER
		room = Eternal_Empire_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	show_sound = event_wind_ruins
	is_triggered_only = yes
	trigger = { 
		kuat_is_enable_eternal_origin = yes 
		has_country_flag = eternal_fleet_attack_enenmy
		check_variable = { which = eternal_kuat_invasion_fleet_num value >= 1 }
	}
	immediate = {
		event_target:eternal_support_country = {
			change_variable = { which = page_owned_eternal_fleet value = 1 }
			every_owned_fleet = {
				limit = { 
					has_fleet_flag = eternal_kuat_invasion_fleet 
					NOT = { has_fleet_flag = choosen_eternal_fleet }
				}
				prev = { change_variable = { which = list_owned_eternal_fleet value = 1 } }
				if = {
					limit = { prev = { check_variable = { which = list_owned_eternal_fleet value = 1 } } }
					set_fleet_flag = choosen_eternal_fleet
					save_event_target_as = choosen_eternal_fleet_1
				}
				else_if = {
					limit = { prev = { check_variable = { which = list_owned_eternal_fleet value = 2 } } }
					set_fleet_flag = choosen_eternal_fleet
					save_event_target_as = choosen_eternal_fleet_2
				}
				else_if = {
					limit = { prev = { check_variable = { which = list_owned_eternal_fleet value = 3 } } }
					set_fleet_flag = choosen_eternal_fleet
					save_event_target_as = choosen_eternal_fleet_3
				}
				else_if = {
					limit = { prev = { check_variable = { which = list_owned_eternal_fleet value = 4 } } }
					set_fleet_flag = choosen_eternal_fleet
					save_event_target_as = choosen_eternal_fleet_4
				}
			}
			set_variable = { which = count_eternal_center_target value = 1 }
		}
	}
	option = {
		name = kuat_EEstart.8.a
		trigger = { exists = event_target:choosen_eternal_fleet_1 }
		allow = {
			custom_tooltip = {
				fail_text = "kuat_EEstart.8.b.fail_tooltip"
				NOT = { has_country_flag = eternal_fleet_is_running }
			}
		}
		custom_tooltip = "executor_mission_fleet_choosen_eternal_fleet_1"
		hidden_effect = {
			set_timed_country_flag = { flag = eternal_fleet_is_running days = 360 }
			event_target:eternal_support_country = {
				every_owned_fleet = {
					limit = { NOT = { is_same_value = event_target:choosen_eternal_fleet_1 } }
					remove_fleet_flag = choosen_eternal_fleet
				}
				clear_variable = list_owned_eternal_fleet
				clear_variable = page_owned_eternal_fleet
			}
			event_target:choosen_eternal_fleet_1 = { set_fleet_flag = executing_eternal_fleet }
			set_country_flag = kuat_enabled_epsilon_planet_killer_selector
			country_event = { id = kuat_system_selector.1 }
		}
	}
	option = {
		name = kuat_EEstart.8.b
		trigger = { exists = event_target:choosen_eternal_fleet_2 }
		allow = {
			custom_tooltip = {
				fail_text = "kuat_EEstart.8.b.fail_tooltip"
				NOT = { has_country_flag = eternal_fleet_is_running }
			}
		}
		custom_tooltip = "executor_mission_fleet_choosen_eternal_fleet_2"
		hidden_effect = {
			set_timed_country_flag = { flag = eternal_fleet_is_running days = 360 }
			event_target:eternal_support_country = {
				every_owned_fleet = {
					limit = { NOT = { is_same_value = event_target:choosen_eternal_fleet_2 } }
					remove_fleet_flag = choosen_eternal_fleet
				}
				clear_variable = list_owned_eternal_fleet
				clear_variable = page_owned_eternal_fleet
			}
			event_target:choosen_eternal_fleet_2 = { set_fleet_flag = executing_eternal_fleet }
			set_country_flag = kuat_enabled_epsilon_planet_killer_selector
			country_event = { id = kuat_system_selector.1 }
		}
	}
	option = {
		name = kuat_EEstart.8.c
		trigger = { exists = event_target:choosen_eternal_fleet_3 }
		allow = {
			custom_tooltip = {
				fail_text = "kuat_EEstart.8.b.fail_tooltip"
				NOT = { has_country_flag = eternal_fleet_is_running }
			}
		}
		custom_tooltip = "executor_mission_fleet_choosen_eternal_fleet_3"
		hidden_effect = {
			set_timed_country_flag = { flag = eternal_fleet_is_running days = 360 }
			event_target:eternal_support_country = {
				every_owned_fleet = {
					limit = { NOT = { is_same_value = event_target:choosen_eternal_fleet_3 } }
					remove_fleet_flag = choosen_eternal_fleet
				}
				clear_variable = list_owned_eternal_fleet
				clear_variable = page_owned_eternal_fleet
			}
			event_target:choosen_eternal_fleet_3 = { set_fleet_flag = executing_eternal_fleet }
			set_country_flag = kuat_enabled_epsilon_planet_killer_selector
			country_event = { id = kuat_system_selector.1 }
		}
	}
	option = {
		name = kuat_EEstart.8.d
		trigger = { exists = event_target:choosen_eternal_fleet_4 }
		allow = {
			custom_tooltip = {
				fail_text = "kuat_EEstart.8.b.fail_tooltip"
				NOT = { has_country_flag = eternal_fleet_is_running }
			}
		}
		custom_tooltip = "executor_mission_fleet_choosen_eternal_fleet_4"
		hidden_effect = {
			set_timed_country_flag = { flag = eternal_fleet_is_running days = 360 }
			event_target:eternal_support_country = {
				every_owned_fleet = {
					limit = { NOT = { is_same_value = event_target:choosen_eternal_fleet_4 } }
					remove_fleet_flag = choosen_eternal_fleet
				}
				clear_variable = list_owned_eternal_fleet
				clear_variable = page_owned_eternal_fleet
			}
			event_target:choosen_eternal_fleet_4 = { set_fleet_flag = executing_eternal_fleet }
			set_country_flag = kuat_enabled_epsilon_planet_killer_selector
			country_event = { id = kuat_system_selector.1 }
		}
	}
	option = {
		name = kuat_EEstart.8.e
		trigger = { 
			event_target:eternal_support_country = {
				count_owned_fleet = {
					limit = { has_fleet_flag = eternal_kuat_invasion_fleet NOT = { has_fleet_flag = choosen_eternal_fleet } }
					count > 4
				}
			}
		}
		hidden_effect = {
			event_target:eternal_support_country = {
				clear_variable = list_owned_eternal_fleet
				if = {
					limit = { count_owned_fleet = { limit = { has_fleet_flag = eternal_kuat_invasion_fleet NOT = { has_fleet_flag = choosen_eternal_fleet } } count > 12 } }
					if = {
						limit = { check_variable = { which = page_owned_eternal_fleet value = 4 } }
						clear_variable = page_owned_eternal_fleet
						every_owned_fleet = { limit = { NOT = { has_fleet_flag = executing_eternal_fleet } } remove_fleet_flag = choosen_eternal_fleet }
					}
				}
				else_if = {
					limit = { count_owned_fleet = { limit = { has_fleet_flag = eternal_kuat_invasion_fleet NOT = { has_fleet_flag = choosen_eternal_fleet } } count > 8 } }
					if = {
						limit = { check_variable = { which = page_owned_eternal_fleet value = 3 } }
						clear_variable = page_owned_eternal_fleet
						every_owned_fleet = { limit = { NOT = { has_fleet_flag = executing_eternal_fleet } } remove_fleet_flag = choosen_eternal_fleet }
					}
				}
				else_if = {
					limit = { count_owned_fleet = { limit = { has_fleet_flag = eternal_kuat_invasion_fleet NOT = { has_fleet_flag = choosen_eternal_fleet } } count > 4 } }
					if = {
						limit = { check_variable = { which = page_owned_eternal_fleet value = 2 } }
						clear_variable = page_owned_eternal_fleet
						every_owned_fleet = { limit = { NOT = { has_fleet_flag = executing_eternal_fleet } } remove_fleet_flag = choosen_eternal_fleet }
					}
				}
			}
			country_event = { id = kuat_EEstart.8 }
		}
	}
	option = {
		name = kuat_EEstart.9.f
		hidden_effect = {
			event_target:eternal_support_country = {
				clear_variable = list_owned_eternal_fleet
				clear_variable = page_owned_eternal_fleet
				clear_variable = count_eternal_center_target
				every_owned_fleet = { remove_fleet_flag = choosen_eternal_fleet }
			}
			remove_country_flag = eternal_fleet_attack_enenmy
		}
		default_hide_option = yes
	}
}

country_event = {
	id = kuat_EEstart.9
	title = "kuat_EEstart.4.title"
	desc = "kuat_EEstart.9.desc"
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:ETERNAL_LEADER
		room = Eternal_Empire_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	show_sound = event_wind_ruins
	is_triggered_only = yes
	trigger = { 
		kuat_is_enable_eternal_origin = yes 
		has_country_flag = eternal_fleet_destroy_enenmy
		check_variable = { which = eternal_kuat_invasion_fleet_num value >= 1 }
	}
	immediate = {
		event_target:eternal_support_country = {
			change_variable = { which = page_owned_eternal_fleet value = 1 }
			every_owned_fleet = {
				limit = { 
					has_fleet_flag = eternal_kuat_invasion_fleet 
					NOT = { has_fleet_flag = choosen_eternal_fleet }
				}
				prev = { change_variable = { which = list_owned_eternal_fleet value = 1 } }
				prev = { change_variable = { which = mission_pending_eternal_fleet value = 1 } }
				set_fleet_flag = choosen_eternal_fleet
				save_event_target_as = choosen_eternal_fleet_1
			}
			set_variable = { which = count_eternal_center_target value = list_owned_eternal_fleet }
		}
	}
	option = {
		name = kuat_EEstart.9.a
		allow = {
			custom_tooltip = {
				fail_text = "kuat_EEstart.9.b.fail_tooltip"
				NOT = { has_country_flag = eternal_fleet_is_running }
			}
		}
		custom_tooltip = "executor_mission_fleet_choosen_eternal_fleet_all"
		hidden_effect = {
			set_timed_country_flag = { flag = eternal_fleet_is_running days = 1800 }
			set_country_flag = kuat_enabled_epsilon_planet_killer_selector
			event_target:eternal_support_country = { every_owned_fleet = { limit = { has_fleet_flag = choosen_eternal_fleet } set_fleet_flag = executing_eternal_fleet } }
			country_event = { id = kuat_system_selector.1 }
		}
	}
	option = {
		name = kuat_EEstart.9.f
		hidden_effect = {
			event_target:eternal_support_country = {
				clear_variable = list_owned_eternal_fleet
				clear_variable = page_owned_eternal_fleet
				clear_variable = mission_pending_eternal_fleet
				clear_variable = mission_finished_eternal_fleet
				clear_variable = count_eternal_center_target
				every_owned_fleet = { remove_fleet_flag = choosen_eternal_fleet }
			}
			remove_country_flag = eternal_fleet_destroy_enenmy
		}
		default_hide_option = yes
	}
}

country_event = {
	id = kuat_EEstart.10
	title = "kuat_EEstart.10.title"
	desc = "kuat_EEstart.10.desc"
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:ETERNAL_LEADER
		room = Eternal_Empire_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	show_sound = event_wind_ruins
	is_triggered_only = yes
	trigger = {
		has_established_contact = event_target:eternal_support_country
		exists = event_target:eternal_support_country
		OR = {
			eternal_support_diplo_event_active = no
			from = { is_same_value = root }
		}
		kuat_is_enable_eternal_origin = yes
		OR = {
			from = { is_country_type = eternal_support }
			from = { is_country_type = eternal_support_guadian }
			from = { is_same_value = root }
		}
		has_global_flag = eternal_support_country_channal
	}
	option = {
		name = kuat_EEstart.10.a
		is_dialog_only = yes
		response_text = kuat_EEstart.10.a.res
	}
	option = {
		name = kuat_EEstart.10.b
		is_dialog_only = yes
		response_text = kuat_EEstart.10.b.res
	}
	option = {
		name = kuat_EEstart.10.c
		is_dialog_only = yes
		response_text = kuat_EEstart.10.c.res
	}
	option = {
		name = kuat_EEstart.10.d
		is_dialog_only = yes
		response_text = kuat_EEstart.10.d.res
	}
	#购买玩家舰队
	option = {
		name = kuat_EEstart.10.e
		trigger = { has_global_flag = eternal_ended_A_rountine }
		allow = {
			fail_text = {
				text = "kuat_EEstart.10.e.stockpile_not_enough"
				resource_stockpile_compare = { resource = alloys value >= 20 mult = 500000 }
			}
			fail_text = {
				text = "kuat_EEstart.10.e.fleet_exist"
				count_owned_fleet = { count = 0 limit = { has_fleet_flag = eternal_kuat_player_fleet } }
			}
			fail_text = {
				text = "kuat_EEstart.10.e.building_exist"
				NOT = { has_country_flag = kuat_get_eternalfleet_windup }
			}
		}
		hidden_effect = { 
			add_resource = { alloys = -20 mult = 500000 }
			set_timed_country_flag = { flag = kuat_get_eternalfleet_windup days = 720 }
			clear_variable = country_energy_tax_amount
			save_event_target_as = eternal_fleet_controller
			event_target:zakuul_system = { system_star = { while = { count = 5 create_eternal_origin_player_eternal_fleet = yes } } }
		}
		response_text = kuat_EEstart.10.e.free
		is_dialog_only = yes
	}
	option = {
		name = kuat_shipyard.exit
		default_hide_option = yes
	}
}

namespace = kuat_eternal_legacy
@standard_lower_days = 2
@standard_event_days = 4
@standard_random_days = 2
country_event = {
	id = kuat_eternal_legacy.1
	title = "kuat_eternal_legacy.1.name"
	desc = "kuat_eternal_legacy.1.desc"
	diplomatic = yes
	picture_event_data = { room = ancient_databank_room }
	custom_gui = "kuat_event_m_window"
	custom_gui_option = "kuat_event_m_option"
	show_sound = event_power_down
	is_triggered_only = yes
	trigger = {
		kuat_is_enable_eternal_origin = yes
		has_country_flag = etim_eternal_awakened
	}
	immediate = { country_event = { id = kuat_eternal_legacy.2 days = @standard_event_days random = @standard_random_days } }
	option = { name = kuat_eternal_legacy.1.a }
}
#start 混乱信号点
country_event = {
	id = kuat_eternal_legacy.2
	title = "kuat_eternal_legacy.2.name"
	desc = "kuat_eternal_legacy.2.desc"
	diplomatic = yes
	picture_event_data = { room = satellite_in_orbit_room }
	custom_gui = "kuat_event_window"
	custom_gui_option = "kuat_event_option"
	show_sound = event_power_down

	is_triggered_only = yes

	option = {
		name = kuat_eternal_legacy.2.a
		random_planet_within_border = {
			limit = { has_planet_flag = planet_Izax }
			create_archaeological_site = site_Eternal_outpost
			save_global_event_target_as = planet_Izax 
		}
		begin_event_chain = {
			event_chain = "Eternal_legacyancient_chain"
			target = ROOT
		}
		create_point_of_interest = {
			id = Eternal_legacyancient_poi.1
			name = "Eternal_legacyancient_1_poi"
			desc = "Eternal_legacyancient_1_poi_desc"
			event_chain = "Eternal_legacyancient_chain"
			location = event_target:planet_Izax
		}
		create_point_of_interest = {
			id = ag_legacy_stroy_recording.15
			name = "Eternal_legacyancient_1_poi"
			desc = "ag_legacy_stroy_recording_15_desc"
			event_chain = kuat_mission_6_chain
			location = event_target:planet_Izax
		}
		change_variable = { which = Eternal_legacyancient_chain_check_number value = 1 }
	}
}
# Stage 1 - 神秘前哨站
fleet_event = {
	id = kuat_eternal_legacy.3
	title = "kuat_eternal_legacy.3.name"
	desc = "kuat_eternal_legacy.3.desc"
	picture = GFX_evt_ship_under_attack
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.3.a
		small_artifact_reward = yes
	}
}
# Stage 2 - 类似结构
fleet_event = {
	id = kuat_eternal_legacy.4
	title = "kuat_eternal_legacy.4.name"
	desc = "kuat_eternal_legacy.4.desc"
	picture = GFX_evt_outpost
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.4.a
		medium_artifact_reward = yes
	}
}
# Stage 3 - 可编程物质
fleet_event = {
	id = kuat_eternal_legacy.5
	title = "kuat_eternal_legacy.5.name"
	desc = "kuat_eternal_legacy.5.desc"
	picture = GFX_evt_ancient_alien_temple
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.5.a
		small_artifact_reward = yes
	}
}
# Stage 4 - 超远程深空雷达
fleet_event = {
	id = kuat_eternal_legacy.6
	title = "kuat_eternal_legacy.6.name"
	desc = "kuat_eternal_legacy.6.desc"
	picture = GFX_evt_ancient_alien_temple
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.6.a
		medium_artifact_reward = yes
	}
}
# Stage 5 - 控制中心
fleet_event = {
	id = kuat_eternal_legacy.7
	title = "kuat_eternal_legacy.7.name"
	desc = "kuat_eternal_legacy.7.desc"
	picture = GFX_evt_ancient_databank
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.7.a
		medium_artifact_reward = yes
	}
}
# Stage 6 - 残存数据
fleet_event = {
	id = kuat_eternal_legacy.8
	title = "kuat_eternal_legacy.8.name"
	desc = "kuat_eternal_legacy.8.desc"
	picture = GFX_evt_ancient_databank
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.8.a
		large_artifact_reward = yes
		owner = {
			add_event_chain_counter = {
				event_chain = "Eternal_legacyancient_chain"
				counter = "Eternal_legacyancient"
				amount = 1
			}
			add_monthly_resource_mult = { resource = energy value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = consumer_goods value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = minerals value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = alloys value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = physics_research value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = society_research value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = engineering_research value = 12 min = 1000 }
			hidden_effect = { set_country_flag = discoveryancienteternal01 }
		}
	}
}

# 古代智能系统残骸
#start 轨道信号 
country_event = {
	id = kuat_eternal_legacy.10
	title = "kuat_eternal_legacy.10.name"
	desc = "kuat_eternal_legacy.10.desc"
	picture_event_data = { room = satellite_in_orbit_room }
	custom_gui = "kuat_event_window"
	custom_gui_option = "kuat_event_option"
	show_sound = event_power_down
	diplomatic = yes
	mean_time_to_happen = { days = @standard_event_days }

	trigger = {
		is_ai = no
		has_country_flag = discoveryancienteternal01
		any_planet_within_border = { has_planet_flag = planet_Scyva }
		NOT = { has_country_flag = discoveryancienteternal01_ALREADY }
	}

	immediate = {
		set_country_flag = discoveryancienteternal01_ALREADY
		random_planet_within_border = {
			limit = { has_planet_flag = planet_Scyva }
			create_archaeological_site = site_Eternal_legacysatellite
			save_global_event_target_as = planet_Scyva 
		}
	}

	option = {
		name = kuat_eternal_legacy.10.a
		create_point_of_interest = {
			id = Eternal_legacyancient_poi.2
			name = "Eternal_legacyancient_2_poi"
			desc = "Eternal_legacyancient_2_poi_desc"
			event_chain = "Eternal_legacyancient_chain"
			location = event_target:planet_Scyva
		}
		create_point_of_interest = {
			id = ag_legacy_stroy_recording.16
			name = "Eternal_legacyancient_2_poi"
			desc = "ag_legacy_stroy_recording_16_desc"
			event_chain = kuat_mission_6_chain
			location = event_target:planet_Scyva
		}
		change_variable = { which = Eternal_legacyancient_chain_check_number value = 1 }
	}
}
# Stage 1 - 接近卫星
fleet_event = {
	id = kuat_eternal_legacy.11
	title = "kuat_eternal_legacy.11.name"
	desc = "kuat_eternal_legacy.11.desc"
	picture = GFX_evt_satellite_in_orbit
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.11.a
		small_artifact_reward = yes
	}
}
# Stage 2 - 先进技术
fleet_event = {
	id = kuat_eternal_legacy.12
	title = "kuat_eternal_legacy.12.name"
	desc = "kuat_eternal_legacy.12.desc"
	picture = GFX_evt_satellite_in_orbit
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.12.a
		medium_artifact_reward = yes
	}
}
# Stage 3 - TXI-130
fleet_event = {
	id = kuat_eternal_legacy.13
	title = "kuat_eternal_legacy.13.name"
	desc = "kuat_eternal_legacy.13.desc"
	picture = GFX_evt_clocks
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.13.a
		small_artifact_reward = yes
	}
}
# Stage 4 - 等离子光矛
fleet_event = {
	id = kuat_eternal_legacy.14
	title = "kuat_eternal_legacy.14.name"
	desc = "kuat_eternal_legacy.14.desc"
	picture = GFX_evt_clocks
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.14.a
		medium_artifact_reward = yes
	}
}
# Stage 5 - 神秘设备
fleet_event = {
	id = kuat_eternal_legacy.15
	title = "kuat_eternal_legacy.15.name"
	desc = "kuat_eternal_legacy.15.desc"
	picture = GFX_evt_ancient_records
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.15.a
		medium_artifact_reward = yes
	}
}
# Stage 6 - 新发现
fleet_event = {
	id = kuat_eternal_legacy.16
	title = "kuat_eternal_legacy.16.name"
	desc = "kuat_eternal_legacy.16.desc"
	picture = GFX_evt_clocks
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.16.a
		large_artifact_reward = yes
		owner = {
			add_event_chain_counter = {
				event_chain = "Eternal_legacyancient_chain"
				counter = "Eternal_legacyancient"
				amount = 1
			}
			add_monthly_resource_mult = { resource = energy value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = consumer_goods value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = minerals value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = alloys value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = physics_research value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = society_research value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = engineering_research value = 12 min = 1000 }
			hidden_effect = { set_country_flag = discoveryancienteternal02 }
		}
	}
}

#start 不寻常的地表
country_event = {
	id = kuat_eternal_legacy.18
	title = "kuat_eternal_legacy.18.name"
	desc = "kuat_eternal_legacy.18.desc"
	picture_event_data = { room = strategic_coordination_center_room }
	custom_gui = "kuat_event_m_window"
	custom_gui_option = "kuat_event_m_option"
	show_sound = event_power_down
	diplomatic = yes
	fire_only_once = yes
	mean_time_to_happen = { days = @standard_event_days }
	
	trigger = {
		is_ai = no
		has_country_flag = discoveryancienteternal02
		NOT = { has_country_flag = discoveryancienteternal02_ALREADY }
		any_planet_within_border = { eternal_archaeological_limit = yes }
	}

	immediate = {
		set_country_flag = discoveryancienteternal02_ALREADY
		random_planet_within_border = {
			limit = { eternal_archaeological_limit = yes }
			save_event_target_as = Eternal_legacy03_Planet
		}
	}

	option = {
		name = kuat_eternal_legacy.18.a
		event_target:Eternal_legacy03_Planet = {
			create_archaeological_site = site_Eternal_Crashedbattleships
		}
		create_point_of_interest = {
			id = Eternal_legacyancient_poi.3
			name = "Eternal_legacyancient_3_poi"
			desc = "Eternal_legacyancient_3_poi_desc"
			event_chain = "Eternal_legacyancient_chain"
			location = event_target:Eternal_legacy03_Planet
		}
		create_point_of_interest = {
			id = ag_legacy_stroy_recording.17
			name = "Eternal_legacyancient_3_poi"
			desc = "ag_legacy_stroy_recording_17_desc"
			event_chain = kuat_mission_6_chain
			location = event_target:Eternal_legacy03_Planet
		}
		change_variable = { which = Eternal_legacyancient_chain_check_number value = 1 }
	}
}
# Stage 1 - 进入轨道
fleet_event = {
	id = kuat_eternal_legacy.19
	title = "kuat_eternal_legacy.19.name"
	desc = "kuat_eternal_legacy.19.desc"
	picture = GFX_evt_ship_in_orbit
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.19.a
		small_artifact_reward = yes
	}
}
# Stage 2 - 降落
fleet_event = {
	id = kuat_eternal_legacy.20
	title = "kuat_eternal_legacy.20.name"
	desc = "kuat_eternal_legacy.20.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.20.a
		medium_artifact_reward = yes
	}
}
# Stage 3 - 内部探索
fleet_event = {
	id = kuat_eternal_legacy.21
	title = "kuat_eternal_legacy.21.name"
	desc = "kuat_eternal_legacy.21.desc"
	picture = GFX_evt_ancient_databank
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.21.a
		small_artifact_reward = yes
	}
}
# Stage 4 - 舰桥
fleet_event = {
	id = kuat_eternal_legacy.22
	title = "kuat_eternal_legacy.22.name"
	desc = "kuat_eternal_legacy.22.desc"
	picture = GFX_evt_ancient_databank
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.22.a
		medium_artifact_reward = yes
	}
}
# Stage 5 - 货仓
fleet_event = {
	id = kuat_eternal_legacy.23
	title = "kuat_eternal_legacy.23.name"
	desc = "kuat_eternal_legacy.23.desc"
	picture = GFX_evt_ancient_databank
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.23.a
		medium_artifact_reward = yes
	}
}
# Stage 6 - 三维坐标
fleet_event = {
	id = kuat_eternal_legacy.24
	title = "kuat_eternal_legacy.24.name"
	desc = "kuat_eternal_legacy.24.desc"
	picture = GFX_evt_ancient_databank
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.24.a
		large_artifact_reward = yes
		owner = {
			add_event_chain_counter = {
				event_chain = "Eternal_legacyancient_chain"
				counter = "Eternal_legacyancient"
				amount = 1
			}
			add_monthly_resource_mult = { resource = energy value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = consumer_goods value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = minerals value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = alloys value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = physics_research value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = society_research value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = engineering_research value = 12 min = 1000 }
			hidden_effect = { set_country_flag = discoveryancienteternal03 }
		}
	}
}

# 银河帝国科研中心
# country_event = {
# 	id = kuat_eternal_legacy.25
# 	hide_window = yes
# 	is_triggered_only = yes
# 	fire_only_once = yes
# 	trigger = {
# 		is_ai = no
# 		has_country_flag = discoveryancienteternal03
# 	}
# 	immediate = { country_event = { id = kuat_eternal_legacy.26 days = @standard_event_days random = @standard_lower_days } }
# }
#start 求救信号
country_event = {
	id = kuat_eternal_legacy.26
	title = "kuat_eternal_legacy.26.name"
	desc = "kuat_eternal_legacy.26.desc"
	picture_event_data = { room = strategic_coordination_center_room }
	custom_gui = "kuat_event_window"
	custom_gui_option = "kuat_event_option"
	show_sound = event_power_down
	diplomatic = yes
	fire_only_once = yes
	mean_time_to_happen = { days = @standard_event_days }
	
	trigger = {
		is_ai = no
		has_country_flag = discoveryancienteternal03
		NOT = { has_country_flag = discoveryancienteternal03_ALREADY }
		any_planet_within_border = { eternal_archaeological_limit = yes }
	}
	
	immediate = {
		set_country_flag = discoveryancienteternal03_ALREADY
		random_planet_within_border = {
			limit = { eternal_archaeological_limit = yes }
			save_event_target_as = Eternal_legacy04_Planet
		}
	}

	option = {
		name = kuat_eternal_legacy.26.a
		event_target:Eternal_legacy04_Planet = {
			create_archaeological_site = site_Eternal_Mysteriousfacilities
		}
		create_point_of_interest = {
			id = Eternal_legacyancient_poi.4
			name = "Eternal_legacyancient_4_poi"
			desc = "Eternal_legacyancient_4_poi_desc"
			event_chain = "Eternal_legacyancient_chain"
			location = event_target:Eternal_legacy04_Planet
		}
		create_point_of_interest = {
			id = ag_legacy_stroy_recording.18
			name = "Eternal_legacyancient_4_poi"
			desc = "ag_legacy_stroy_recording_18_desc"
			event_chain = kuat_mission_6_chain
			location = event_target:Eternal_legacy04_Planet
		}
		change_variable = { which = Eternal_legacyancient_chain_check_number value = 1 }
	}
}
# Stage 1 - 神秘设施
fleet_event = {
	id = kuat_eternal_legacy.27
	title = "kuat_eternal_legacy.27.name"
	desc = "kuat_eternal_legacy.27.desc"
	picture = GFX_evt_outpost
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.27.a
		small_artifact_reward = yes
	}
}
# Stage 2 - 绝对机密
fleet_event = {
	id = kuat_eternal_legacy.28
	title = "kuat_eternal_legacy.28.name"
	desc = "kuat_eternal_legacy.28.desc"
	picture = GFX_evt_barren_dig_site
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.28.a
		medium_artifact_reward = yes
	}
}
# Stage 3 - 迷宫
fleet_event = {
	id = kuat_eternal_legacy.29
	title = "kuat_eternal_legacy.29.name"
	desc = "kuat_eternal_legacy.29.desc"
	picture = GFX_evt_sentry_guns
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.29.a
		small_artifact_reward = yes
	}
}
# Stage 4 - 时空管理局
fleet_event = {
	id = kuat_eternal_legacy.30
	title = "kuat_eternal_legacy.30.name"
	desc = "kuat_eternal_legacy.30.desc"
	picture = GFX_evt_ancient_databank
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.30.a
		medium_artifact_reward = yes
	}
}
# Stage 5 - 时间之外
fleet_event = {
	id = kuat_eternal_legacy.31
	title = "kuat_eternal_legacy.31.name"
	desc = "kuat_eternal_legacy.31.desc"
	picture = GFX_evt_ancient_databank
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.31.a
		medium_artifact_reward = yes
	}
}
# Stage 6 - 永恒存在
fleet_event = {
	id = kuat_eternal_legacy.32
	title = "kuat_eternal_legacy.32.name"
	desc = "kuat_eternal_legacy.32.desc"
	picture = GFX_evt_ruined_system
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.32.a
		large_artifact_reward = yes
		owner = {
			add_event_chain_counter = {
				event_chain = "Eternal_legacyancient_chain"
				counter = "Eternal_legacyancient"
				amount = 1
			}
			add_monthly_resource_mult = { resource = energy value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = consumer_goods value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = minerals value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = alloys value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = physics_research value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = society_research value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = engineering_research value = 12 min = 1000 }
			hidden_effect = { set_country_flag = discoveryancienteternal04 }
		}
	}
}

#start 帝国的蛛丝马迹
country_event = {
	id = kuat_eternal_legacy.340
	title = "kuat_eternal_legacy.340.name"
	desc = "kuat_eternal_legacy.340.desc"
	picture_event_data = { room = strategic_coordination_center_room }
	custom_gui = "kuat_event_window"
	custom_gui_option = "kuat_event_option"
	show_sound = event_power_down
	diplomatic = yes
	fire_only_once = yes
	mean_time_to_happen = { days = @standard_event_days }
	
	trigger = {
		is_ai = no
		has_country_flag = discoveryancienteternal04
		NOT = { has_country_flag = discoveryancienteternal04_ALREADY }
		any_planet_within_border = { eternal_archaeological_limit = yes }
	}
	
	immediate = {
		set_country_flag = discoveryancienteternal04_ALREADY
		random_planet_within_border = {
			limit = { eternal_archaeological_limit = yes }
			save_event_target_as = Eternal_legacy05_Planet
		}
	}

	option = {
		name = kuat_eternal_legacy.340.a
		event_target:Eternal_legacy05_Planet = {
			create_archaeological_site = site_Eternal_clues
		}
		create_point_of_interest = {
			id = Eternal_legacyancient_poi.5
			name = "Eternal_legacyancient_5_poi"
			desc = "Eternal_legacyancient_5_poi_desc"
			event_chain = "Eternal_legacyancient_chain"
			location = event_target:Eternal_legacy05_Planet
		}
		create_point_of_interest = {
			id = ag_legacy_stroy_recording.19
			name = "Eternal_legacyancient_5_poi"
			desc = "ag_legacy_stroy_recording_19_desc"
			event_chain = kuat_mission_6_chain
			location = event_target:Eternal_legacy05_Planet
		}
		change_variable = { which = Eternal_legacyancient_chain_check_number value = 1 }
	}
}
# Stage 1 - 奇怪设置
fleet_event = {
	id = kuat_eternal_legacy.34
	title = "kuat_eternal_legacy.34.name"
	desc = "kuat_eternal_legacy.34.desc"
	picture = GFX_evt_clocks
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.34.a
		small_artifact_reward = yes
	}
}
# Stage 2 - 奇怪设置
fleet_event = {
	id = kuat_eternal_legacy.35
	title = "kuat_eternal_legacy.35.name"
	desc = "kuat_eternal_legacy.35.desc"
	picture = GFX_evt_physics_research
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.35.a
		medium_artifact_reward = yes
	}
}
# Stage 3 - 数据计算
fleet_event = {
	id = kuat_eternal_legacy.36
	title = "kuat_eternal_legacy.36.name"
	desc = "kuat_eternal_legacy.36.desc"
	picture = GFX_evt_glitchy_matrix
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.36.a
		small_artifact_reward = yes
	}
}
# Stage 4 - 巨过分的加密
fleet_event = {
	id = kuat_eternal_legacy.37
	title = "kuat_eternal_legacy.37.name"
	desc = "kuat_eternal_legacy.37.desc"
	picture = GFX_evt_glitchy_matrix
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.37.a
		medium_artifact_reward = yes
	}
}
# Stage 5 - 精确坐标
fleet_event = {
	id = kuat_eternal_legacy.38
	title = "kuat_eternal_legacy.38.name"
	desc = "kuat_eternal_legacy.38.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.38.a
		medium_artifact_reward = yes
	}
}
# Stage 6 - 新发现
fleet_event = {
	id = kuat_eternal_legacy.39
	title = "kuat_eternal_legacy.39.name"
	desc = "kuat_eternal_legacy.39.desc"
	picture = GFX_evt_habitable_dig_site
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.39.a
		large_artifact_reward = yes
		owner = {
			add_event_chain_counter = {
				event_chain = "Eternal_legacyancient_chain"
				counter = "Eternal_legacyancient"
				amount = 1
			}
			add_monthly_resource_mult = { resource = energy value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = consumer_goods value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = minerals value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = alloys value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = physics_research value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = society_research value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = engineering_research value = 12 min = 1000 }
			hidden_effect = { set_country_flag = discoveryancienteternal05 }
		}
	}
}

# 先祖遗迹
#start 黑暗战争
country_event = {
	id = kuat_eternal_legacy.41
	title = "kuat_eternal_legacy.41.name"
	desc = "kuat_eternal_legacy.41.desc"
	picture_event_data = { room = contingency_planet_room }
	custom_gui = "kuat_event_window"
	custom_gui_option = "kuat_event_option"
	show_sound = event_power_down
	diplomatic = yes
	fire_only_once = yes
	mean_time_to_happen = { days = @standard_event_days }
	
	trigger = {
		is_ai = no
		has_country_flag = discoveryancienteternal05
		NOT = { has_country_flag = discoveryancienteternal05_ALREADY }
		any_planet_within_border = { eternal_archaeological_limit = yes }
	}
	
	immediate = {
		set_country_flag = discoveryancienteternal05_ALREADY
		random_planet_within_border = {
			limit = { eternal_archaeological_limit = yes }
			save_event_target_as = Eternal_legacy06_Planet
		}
	}

	option = {
		name = kuat_eternal_legacy.41.a
		event_target:Eternal_legacy06_Planet = {
			create_archaeological_site = site_Eternal_Scientificresearchcenter
		}
		create_point_of_interest = {
			id = Eternal_legacyancient_poi.6
			name = "Eternal_legacyancient_6_poi"
			desc = "Eternal_legacyancient_6_poi_desc"
			event_chain = "Eternal_legacyancient_chain"
			location = event_target:Eternal_legacy06_Planet
		}
		create_point_of_interest = {
			id = ag_legacy_stroy_recording.20
			name = "Eternal_legacyancient_6_poi"
			desc = "ag_legacy_stroy_recording_20_desc"
			event_chain = kuat_mission_6_chain
			location = event_target:Eternal_legacy06_Planet
		}
		change_variable = { which = Eternal_legacyancient_chain_check_number value = 1 }
	}
}
# Stage 1 - 抵达坐标
fleet_event = {
	id = kuat_eternal_legacy.42
	title = "kuat_eternal_legacy.42.name"
	desc = "kuat_eternal_legacy.42.desc"
	picture = GFX_evt_ship_in_orbit
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.42.a
		small_artifact_reward = yes
	}
}
# Stage 2 - 科研矩阵
fleet_event = {
	id = kuat_eternal_legacy.43
	title = "kuat_eternal_legacy.43.name"
	desc = "kuat_eternal_legacy.43.desc"
	picture = GFX_evt_ai_planet
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.43.a
		medium_artifact_reward = yes
	}
}
# Stage 3 - 科研中心
fleet_event = {
	id = kuat_eternal_legacy.44
	title = "kuat_eternal_legacy.44.name"
	desc = "kuat_eternal_legacy.44.desc"
	picture = GFX_evt_ai_planet
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.44.a
		small_artifact_reward = yes
	}
}
# Stage 4 - 大数据库
fleet_event = {
	id = kuat_eternal_legacy.45
	title = "kuat_eternal_legacy.45.name"
	desc = "kuat_eternal_legacy.45.desc"
	picture = GFX_evt_ancient_databank
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.45.a
		medium_artifact_reward = yes

	}
}
# Stage 5 - 陨星
fleet_event = {
	id = kuat_eternal_legacy.46
	title = "kuat_eternal_legacy.46.name"
	desc = "kuat_eternal_legacy.46.desc"
	picture = GFX_evt_ancient_records
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.46.a
		medium_artifact_reward = yes
	}
}
# Stage 6 - 新发现
fleet_event = {
	id = kuat_eternal_legacy.47
	title = "kuat_eternal_legacy.47.name"
	desc = "kuat_eternal_legacy.47.desc"
	picture = GFX_evt_ancient_databank
	show_sound = event_finding_loot

	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.47.a
		large_artifact_reward = yes
		owner = {
			add_event_chain_counter = {
				event_chain = "Eternal_legacyancient_chain"
				counter = "Eternal_legacyancient"
				amount = 1
			}
			add_monthly_resource_mult = { resource = energy value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = consumer_goods value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = minerals value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = alloys value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = physics_research value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = society_research value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = engineering_research value = 12 min = 1000 }
			hidden_effect = { set_country_flag = discoveryancienteternal06 }
		}
	}
}

# 永恒舰队的真相
country_event = {
	id = kuat_eternal_legacy.48
	title = "kuat_eternal_legacy.48.name"
	desc = "kuat_eternal_legacy.48.desc"
	picture_event_data = { room = Eternal_Empire_room }
	custom_gui = "kuat_event_m_window"
	custom_gui_option = "kuat_event_m_option"
	show_sound = event_power_down
	diplomatic = yes
	mean_time_to_happen = { days = @standard_event_days }
	
	trigger = {
		is_ai = no
		has_country_flag = discoveryancienteternal06
		NOT = { has_country_flag = discoveryancienteternal06_ALREADY }
		any_planet_within_border = { has_planet_flag = planet_Zildrog }
	}

	immediate = {
		set_country_flag = discoveryancienteternal06_ALREADY
		random_planet_within_border = {
			limit = { has_planet_flag = planet_Zildrog }
			create_archaeological_site = site_Eternal_systeam
			save_global_event_target_as = planet_Zildrog 
		}
	}

	option = { name = "kuat_eternal_legacy.48.a" }
}
# Stage 1 - 时空扭曲信号
fleet_event = {
	id = kuat_eternal_legacy.5004
	title = "kuat_eternal_legacy.5004.name"
	desc = "kuat_eternal_legacy.5004.desc"
	picture = GFX_evt_physics_research
	show_sound = event_wind_ruins
	
	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.5004.a
	}
}
# Stage 2 - 不可能的猜测
fleet_event = {
	id = kuat_eternal_legacy.5005
	title = "kuat_eternal_legacy.5005.name"
	desc = "kuat_eternal_legacy.5005.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_wind_ruins
	
	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.5005.a
		medium_artifact_reward = yes
	}
}
# Stage 3 - 奇怪的山体
fleet_event = {
	id = kuat_eternal_legacy.5006
	title = "kuat_eternal_legacy.5006.name"
	desc = "kuat_eternal_legacy.5006.desc"
	picture = GFX_evt_ancient_artifact
	show_sound = event_wind_ruins
	
	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.5006.a
		medium_artifact_reward = yes
	}	
}
# Stage 4 - 人造结构
fleet_event = {
	id = kuat_eternal_legacy.5007
	title = "kuat_eternal_legacy.5007.name"
	desc = "kuat_eternal_legacy.5007.desc"
	picture = GFX_evt_partition
	show_sound = event_wind_ruins
	
	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.5007.a
		medium_artifact_reward = yes
	}
}
# Stage 5 - 古代实验设施
fleet_event = {
	id = kuat_eternal_legacy.5008
	title = "kuat_eternal_legacy.5008.name" 
	desc = "kuat_eternal_legacy.5008.desc"
	picture = GFX_evt_civil_action
	show_sound = event_wind_ruins
	
	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.5008.a
		large_artifact_reward = yes
	}
}
# Stage 6 - 时空裂隙
fleet_event = {
	id = kuat_eternal_legacy.5009
	title = "kuat_eternal_legacy.5009.name" 
	desc = "kuat_eternal_legacy.5009.desc"
	picture = GFX_evt_synth_sabotage
	show_sound = event_wind_ruins
	
	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.5009.a
		medium_artifact_reward = yes
	}
}
# Stage 7 - 神之醒
fleet_event = {
	id = kuat_eternal_legacy.5010
	title = "kuat_eternal_legacy.5010.name" 
	desc = "kuat_eternal_legacy.5010.desc"
	picture = GFX_evt_ancient_databank
	show_sound = event_wind_ruins
	
	archaeology = yes

	is_triggered_only = yes
	
	immediate = {
		from = { set_site_progress_locked = yes }
	}

	after = { 
		from = { set_site_progress_locked = no } 
	}
	
	option = {
		name = kuat_eternal_legacy.5010.a
		hidden_effect = { owner = { 
			add_event_chain_counter = {
				event_chain = "Eternal_legacyancient_chain"
				counter = "Eternal_legacyancient"
				amount = 1
			}
			add_monthly_resource_mult = { resource = energy value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = consumer_goods value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = minerals value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = alloys value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = physics_research value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = society_research value = 12 min = 1000 }
			add_monthly_resource_mult = { resource = engineering_research value = 12 min = 1000 }
			set_country_flag = kuat_eternal_legacy_God_awakened
			create_country = {
				name = "Name_Eternal_Support"
				type = eternal_support
				name_list = Eternal_Fleet
				day_zero_contact = no
				flag = {
					icon = {
						category = "exe_invasion"
						file = "ge_o.dds"
					}
					background = {
						category = "backgrounds"
						file = "00_solid.dds"
					}
					colors = { "yellow" "black" "null" "null" }
				}
				effect = { 
					set_country_flag = protected_from_queen_storm
					save_global_event_target_as = eternal_support_country 
					add_modifier = { modifier = Elternal_creating }
				}
			}
			event_target:zakuul_system = { create_elternal_origin_system_warbase = { LOCK = yes DAYS = -1 } }
		} }
	}
}

#BY XIAOBEIFANG
country_event = {
	id = kuat_eternal_legacy.50101
	title = "kuat_eternal_legacy.50101.name"
	desc = "kuat_eternal_legacy.50101.desc"
	picture_event_data = { room = Eternal_Empire_room }
	custom_gui = "kuat_event_m_window"
	custom_gui_option = "kuat_event_m_option"
	show_sound = event_power_down
	diplomatic = yes
	mean_time_to_happen = { months = 1 }
	fire_only_once = yes
	trigger = { 
		kuat_is_enable_eternal_origin = yes 
		has_country_flag = kuat_eternal_legacy_God_awakened_finished 
	}
	option = {
		name = "kuat_eternal_legacy.50101.a"
		hidden_effect = { add_modifier = { modifier = kuat_eternal_audio_limited days = 360 } } 
	}
	option = {
		name = "kuat_eternal_legacy.50101.b"
		default_hide_option = yes
		hidden_effect = { 
			add_modifier = { modifier = kuat_eternal_investigation_histroy days = 360 } 
			country_event = { id = kuat_eternal_legacy.50102 days = 10 random = 10 }
		}  
	}
}

country_event = {
	id = kuat_eternal_legacy.50102
	title = "kuat_eternal_legacy.50102.name"
	desc = "kuat_eternal_legacy.50102.desc"
	picture_event_data = { room = Eternal_Empire_room }
	custom_gui = "kuat_event_window"
	custom_gui_option = "kuat_event_option"
	show_sound = event_power_down
	diplomatic = yes
	is_triggered_only = yes
	trigger = { kuat_is_enable_eternal_origin = yes }
	option = { name = "kuat_eternal_legacy.50102.a" }
	after = { country_event = { id = kuat_eternal_legacy.50103 days = 10 random = 10 } }
}

country_event = {
	id = kuat_eternal_legacy.50103
	title = "kuat_eternal_legacy.50103.name"
	desc = { trigger = {
		success_text = {
			NOT = { has_country_flag = kuat_eternal_legacy.50103.a.fired }
			text = "kuat_eternal_legacy.50103.a.desc"
		}
		success_text = {
			has_country_flag = kuat_eternal_legacy.50103.a.fired
			text = "kuat_eternal_legacy.50103.b.desc"
		}
	} }
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:ETERNAL_LEADER
		room = Eternal_Empire_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	show_sound = event_wind_ruins
	is_triggered_only = yes
	trigger = { 
		exists = event_target:eternal_support_country
		kuat_is_enable_eternal_origin = yes
	}
	option = { 
		name = kuat_eternal_legacy.50103.a 
		trigger = { NOT = { has_country_flag = kuat_eternal_legacy.50103.a.fired } }
		hidden_effect = { set_country_flag = kuat_eternal_legacy.50103.a.fired }
	}
	option = { 
		name = kuat_eternal_legacy.50103.b 
		trigger = { has_country_flag = kuat_eternal_legacy.50103.a.fired }
		hidden_effect = { add_unity_times_empire_size = { VALUE = 15 } }  
	}
	option = { 
		name = kuat_eternal_legacy.50103.c 
		hidden_effect = { add_unity_times_empire_size = { VALUE = 5 } } 
	}
}

#开始尝试解锁AI
country_event = {
	id = kuat_eternal_legacy.6000
	title = "kuat_eternal_legacy.6000.name"
	desc = "kuat_eternal_legacy.6000.desc"
	picture_event_data = { room = Eternal_Empire_room }
	custom_gui = "kuat_event_m_window"
	custom_gui_option = "kuat_event_m_option"
	show_sound = event_power_down
	diplomatic = yes
	mean_time_to_happen = { days = @standard_event_days }
	trigger = { 
		kuat_is_enable_eternal_origin = yes 
		has_country_flag = kuat_eternal_legacy_God_awakened
		NOT = { has_country_flag = kuat_eternal_legacy_God_awakened_already }
	}
	immediate = { set_country_flag = kuat_eternal_legacy_God_awakened_already }
	option = {
		name = "kuat_eternal_legacy.6000.a"
		hidden_effect = { 
			end_event_chain = Eternal_legacyancient_chain 
			enable_special_project = {
				name = exe_enable_eternal_AI
				location = event_target:zakuul_system.star owner = root
			}
		} 
	}
}

country_event = {
	id = kuat_eternal_legacy.49
	title = "kuat_eternal_legacy.49.name"
	desc = "kuat_eternal_legacy.49.desc"
	picture_event_data = { room = ancient_knowledge_room }
	custom_gui = "kuat_event_m_window"
	custom_gui_option = "kuat_event_m_option"
	show_sound = event_power_down
	diplomatic = yes
	is_triggered_only = yes
	option = {
		name = "kuat_eternal_legacy.49.a"
		hidden_effect = { 
			country_event = { id = kuat_eternal_legacy.50 days = 1 } 
			set_country_flag = eternal_origin_legacy_event_over
		} 
	}
}

country_event = {
	id = kuat_eternal_legacy.50
	title = "kuat_EEstart.4.title"
	desc = "kuat_EEstart.5.desc"
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:ETERNAL_LEADER
		room = Eternal_Empire_room
	}
	custom_gui = "kuat_event_diplomacy_window"
	custom_gui_option = "kuat_event_diplomacy_option"
	show_sound = event_wind_ruins
	is_triggered_only = yes
	trigger = { 
		exists = event_target:eternal_support_country
		kuat_is_enable_eternal_origin = yes
	}
	#恩多迪亚
	option = { 
		name = kuat_eternal_legacy.50.a 
		trigger = { has_country_flag = fire_once_contact_free }
		add_monthly_resource_mult = { resource = alloys value = 12 max = -2500 }
		is_dialog_only = yes
		response_text = kuat_eternal_legacy.50.a.resp 
	}
	option = { 
		name = kuat_eternal_legacy.50.a
		trigger = { has_country_flag = fire_once_contact_control }
		add_monthly_resource_mult = { resource = alloys value = 12 max = -5000 }
		is_dialog_only = yes
		response_text = kuat_eternal_legacy.50.b.resp 
	}
	#夸特是什么
	option = { 
		name = kuat_eternal_legacy.50.c 
		is_dialog_only = yes
		trigger = { has_country_flag = fire_once_contact_free }
		response_text = kuat_eternal_legacy.50.c.resp 
	}
	option = { 
		name = kuat_eternal_legacy.50.c 
		is_dialog_only = yes
		trigger = { has_country_flag = fire_once_contact_control }
		response_text = kuat_eternal_legacy.50.d.resp 
	}
	#这些阻挡不了我们（结束永恒起源所有前置）
	option = { 
		name = kuat_eternal_legacy.50.e
		trigger = { has_country_flag = fire_once_contact_free }
		hidden_effect = { set_country_flag = eternal_origin_legacy_event_over }
		add_monthly_resource_mult = { resource = unity value = 12 min = 100000 }
		response_text = kuat_eternal_legacy.50.e.resp 
	}
	option = { 
		name = kuat_eternal_legacy.50.e
		trigger = { has_country_flag = fire_once_contact_control }
		hidden_effect = { set_country_flag = eternal_origin_legacy_event_over }
		add_monthly_resource_mult = { resource = unity value = 12 min = 100000 }
		response_text = kuat_eternal_legacy.50.f.resp 
	}
}
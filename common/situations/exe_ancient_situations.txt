
#Eternal flagship
situation_unlocked_the_eternal_fleet = {
	picture = GFX_evt_em_war_1
	complete_icon_frame = GFX_situation_outcome_frame_blue
	complete_icon = GFX_situation_outcome_unknown
	fail_icon_frame = GFX_situation_outcome_frame_red
	fail_icon = GFX_situation_outcome_meh
	on_progress_complete = {
		custom_tooltip = situation_unknown_outcome_approach
		hidden_effect = {
			if = {
				limit = { current_situation_approach = situation_hositile_altitude }
				situation_event = { id = kuat_situation.6 }
			}
			else_if = {
				limit = { current_situation_approach = situation_netural_altitude }
				situation_event = { id = kuat_situation.7 }
			}
			else = { situation_event = { id = kuat_situation.8 } }
		}
	}
	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 25
			custom_tooltip = stage_unknown_effects
		}
		stage_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_blue
			end = 75
			on_first_enter = { situation_event = { id = kuat_situation.4 } }
			custom_tooltip = stage_unknown_effects
		}
		stage_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_blue
			end = 100
			on_first_enter = { situation_event = { id = kuat_situation.5 } }
			custom_tooltip = stage_unknown_effects
		}
	}
	#hositle
	approach = {
		name = "situation_hositile_altitude"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_red
		resources = {
			category = situations
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.25
				society_research = 0.25
				engineering_research = 0.25
				multiplier = target.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
		target_modifier = { planet_jobs_alloys_upkeep_mult = 0.5 }
	}
	#neutral
	approach = {
		name = "situation_netural_altitude"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_yellow
		resources = {
			category = situations
			produces = {
				trigger = {
					NOT = { current_stage = stage_1 }
				}
				alloys = 1
				multiplier = target.trigger:num_pops
			}
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.25
				society_research = 0.25
				engineering_research = 0.25
				multiplier = target.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	#friendly
	approach = {
		name = "situation_friendly_altitude"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_green
		resources = {
			category = situations
			produces = {
				trigger = { NOT = { current_stage = stage_1 } }
				alloys = 2
				multiplier = target.trigger:num_pops
			}
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.25
				society_research = 0.25
				engineering_research = 0.25
				multiplier = target.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	on_monthly = {
		random_events = {
			40 = 0
			20 = kuat_situation.1
			20 = kuat_situation.2
			20 = kuat_situation.3
		}
	}
	monthly_progress = {
		base = 10
		modifier = {
			add = -5
			desc = "situation_eternal_flagship_refuse_us_desc"
			current_situation_approach = situation_hositile_altitude
			has_situation_flag = kuat_very_hostile
		}
		modifier = {
			add = -3
			desc = "situation_eternal_flagship_refuse_us_desc"
			current_situation_approach = situation_hositile_altitude
			has_situation_flag = kuat_hostile
		}
		modifier = {
			add = 3
			desc = "situation_eternal_flagship_accept_us_desc"
			current_situation_approach = situation_netural_altitude
			has_situation_flag = kuat_counrsey
		}
		modifier = {
			add = 5
			desc = "situation_eternal_flagship_friendly_us_desc"
			current_situation_approach = situation_friendly_altitude
			has_situation_flag = kuat_acception_ai
		}
		modifier = {
			add = -5
			desc = "situation_eternal_flagship_friendly_us_desc"
			current_situation_approach = situation_friendly_altitude
			has_situation_flag = kuat_refuse_ai
		}
	}
	abort_trigger = { OR = {
		NOT = { exists = target.owner }
		target.owner = { NOT = { is_same_value = root.owner } }
	} }
}

#unlock the station
situation_unlocked_the_first_station = {
	picture = GFX_evt_star_neutron
	complete_icon_frame = GFX_situation_outcome_frame_blue
	complete_icon = GFX_situation_outcome_unknown
	fail_icon_frame = GFX_situation_outcome_frame_red
	fail_icon = GFX_situation_outcome_meh
	on_progress_complete = {
		custom_tooltip = situation_unknown_outcome_approach
		hidden_effect = {
			if = {
				limit = { current_situation_approach = situation_hositile_altitude }
				situation_event = { id = kuat_situation.14 }
			}
			else_if = {
				limit = { current_situation_approach = situation_netural_altitude }
				situation_event = { id = kuat_situation.15 }
			}
			else = { situation_event = { id = kuat_situation.16 } }
			target = { 
				remove_modifier = country_distorted_by_lost_eternal_station
				add_modifier = { modifier = country_distorted_by_lost_eternal_station }
			}
		}
	}
	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 25
			custom_tooltip = stage_unknown_effects
		}
		stage_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_blue
			end = 75
			on_first_enter = { situation_event = { id = kuat_situation.12 } }
			custom_tooltip = stage_unknown_effects
		}
		stage_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_blue
			end = 100
			on_first_enter = { situation_event = { id = kuat_situation.13 } }
			custom_tooltip = stage_unknown_effects
		}
	}
	#hositle
	approach = {
		name = "situation_hositile_altitude_station"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_red
		resources = {
			category = situations
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.25
				society_research = 0.25
				engineering_research = 0.25
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	#neutral
	approach = {
		name = "situation_netural_altitude_station"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_yellow
		resources = {
			category = situations
			produces = {
				trigger = {
					NOT = { current_stage = stage_1 }
				}
				alloys = 1
				multiplier = owner.trigger:num_pops
			}
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.25
				society_research = 0.25
				engineering_research = 0.25
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	#friendly
	approach = {
		name = "situation_friendly_altitude_station"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_green
		resources = {
			category = situations
			produces = {
				trigger = { NOT = { current_stage = stage_1 } }
				alloys = 2
				multiplier = owner.trigger:num_pops
			}
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.25
				society_research = 0.25
				engineering_research = 0.25
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	on_monthly = {
		random_events = {
			40 = 0
			20 = kuat_situation.9
			20 = kuat_situation.10
			20 = kuat_situation.11
		}
	}
	monthly_progress = {
		base = 10
		modifier = {
			add = 12
			desc = "situation_kuat_flagship_accept_us_desc"
			current_situation_approach = situation_netural_altitude
			has_situation_flag = kuat_counrsey
		}
		modifier = {
			add = 20
			desc = "situation_kuat_flagship_friendly_us_desc"
			current_situation_approach = situation_friendly_altitude
			has_situation_flag = kuat_acception_ai
		}
	}
	abort_trigger = { OR = {
		NOT = { exists = target }
		target = { NOT = { is_same_value = event_target:eternal_fleet_country } }
	} }
}
situation_unlocked_the_second_station = {
	picture = GFX_evt_star_neutron
	complete_icon_frame = GFX_situation_outcome_frame_blue
	complete_icon = GFX_situation_outcome_unknown
	fail_icon_frame = GFX_situation_outcome_frame_red
	fail_icon = GFX_situation_outcome_meh
	on_progress_complete = {
		custom_tooltip = situation_unknown_outcome_approach
		hidden_effect = {
			if = {
				limit = { current_situation_approach = situation_hositile_altitude }
				situation_event = { id = kuat_situation.14 }
			}
			else_if = {
				limit = { current_situation_approach = situation_netural_altitude }
				situation_event = { id = kuat_situation.15 }
			}
			else = { situation_event = { id = kuat_situation.16 } }
			target = { 
				remove_modifier = country_distorted_by_lost_eternal_station
				add_modifier = { modifier = country_distorted_by_lost_eternal_station multiplier = 2 }
			}
		}
	}
	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 25
			custom_tooltip = stage_unknown_effects
		}
		stage_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_blue
			end = 75
			on_first_enter = { situation_event = { id = kuat_situation.17 } }
			custom_tooltip = stage_unknown_effects
		}
		stage_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_blue
			end = 100
			on_first_enter = { situation_event = { id = kuat_situation.18 } }
			custom_tooltip = stage_unknown_effects
		}
	}
	#hositle
	approach = {
		name = "situation_hositile_altitude_station"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_red
		resources = {
			category = situations
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.25
				society_research = 0.25
				engineering_research = 0.25
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	#neutral
	approach = {
		name = "situation_netural_altitude_station"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_yellow
		resources = {
			category = situations
			produces = {
				trigger = {
					NOT = { current_stage = stage_1 }
				}
				alloys = 1
				multiplier = owner.trigger:num_pops
			}
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.25
				society_research = 0.25
				engineering_research = 0.25
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	#friendly
	approach = {
		name = "situation_friendly_altitude_station"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_green
		resources = {
			category = situations
			produces = {
				trigger = { NOT = { current_stage = stage_1 } }
				alloys = 2
				multiplier = owner.trigger:num_pops
			}
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.25
				society_research = 0.25
				engineering_research = 0.25
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	on_monthly = {
		random_events = {
			40 = 0
			20 = kuat_situation.9
			20 = kuat_situation.10
			20 = kuat_situation.11
		}
	}
	monthly_progress = {
		base = 10
		modifier = {
			add = 12
			desc = "situation_kuat_flagship_accept_us_desc"
			current_situation_approach = situation_netural_altitude
			has_situation_flag = kuat_counrsey
		}
		modifier = {
			add = 20
			desc = "situation_kuat_flagship_friendly_us_desc"
			current_situation_approach = situation_friendly_altitude
			has_situation_flag = kuat_acception_ai
		}
	}
	abort_trigger = { OR = {
		NOT = { exists = target }
		target = { NOT = { is_same_value = event_target:eternal_fleet_country } }
	} }
}
situation_unlocked_the_third_station = {
	picture = GFX_evt_star_neutron
	complete_icon_frame = GFX_situation_outcome_frame_blue
	complete_icon = GFX_situation_outcome_unknown
	fail_icon_frame = GFX_situation_outcome_frame_red
	fail_icon = GFX_situation_outcome_meh
	on_progress_complete = {
		custom_tooltip = situation_unknown_outcome_approach
		hidden_effect = {
			if = {
				limit = { current_situation_approach = situation_hositile_altitude }
				situation_event = { id = kuat_situation.14 }
			}
			else_if = {
				limit = { current_situation_approach = situation_netural_altitude }
				situation_event = { id = kuat_situation.15 }
			}
			else = { situation_event = { id = kuat_situation.16 } }
			target = { 
				remove_modifier = country_distorted_by_lost_eternal_station
				add_modifier = { modifier = country_distorted_by_lost_eternal_station multiplier = 3 }
			}
		}
	}
	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 25
			custom_tooltip = stage_unknown_effects
		}
		stage_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_blue
			end = 75
			on_first_enter = { situation_event = { id = kuat_situation.19 } }
			custom_tooltip = stage_unknown_effects
		}
		stage_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_blue
			end = 100
			on_first_enter = { situation_event = { id = kuat_situation.20 } }
			custom_tooltip = stage_unknown_effects
		}
	}
	#hositle
	approach = {
		name = "situation_hositile_altitude_station"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_red
		resources = {
			category = situations
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.25
				society_research = 0.25
				engineering_research = 0.25
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	#neutral
	approach = {
		name = "situation_netural_altitude_station"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_yellow
		resources = {
			category = situations
			produces = {
				trigger = {
					NOT = { current_stage = stage_1 }
				}
				alloys = 1
				multiplier = owner.trigger:num_pops
			}
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.25
				society_research = 0.25
				engineering_research = 0.25
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	#friendly
	approach = {
		name = "situation_friendly_altitude_station"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_green
		resources = {
			category = situations
			produces = {
				trigger = { NOT = { current_stage = stage_1 } }
				alloys = 2
				multiplier = target.trigger:num_pops
			}
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.25
				society_research = 0.25
				engineering_research = 0.25
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	on_monthly = {
		random_events = {
			40 = 0
			20 = kuat_situation.9
			20 = kuat_situation.10
			20 = kuat_situation.11
		}
	}
	monthly_progress = {
		base = 10
		modifier = {
			add = 12
			desc = "situation_kuat_flagship_accept_us_desc"
			current_situation_approach = situation_netural_altitude
			has_situation_flag = kuat_counrsey
		}
		modifier = {
			add = 20
			desc = "situation_kuat_flagship_friendly_us_desc"
			current_situation_approach = situation_friendly_altitude
			has_situation_flag = kuat_acception_ai
		}
	}
	abort_trigger = { OR = {
		NOT = { exists = target }
		target = { NOT = { is_same_value = event_target:eternal_fleet_country } }
	} }
}

#facility Area Datebank
situation_unlocked_the_A_Area = {
	picture = GFX_evt_black_hole
	complete_icon_frame = GFX_situation_outcome_frame_blue
	complete_icon = GFX_situation_outcome_unknown
	fail_icon_frame = GFX_situation_outcome_frame_red
	fail_icon = GFX_situation_outcome_meh
	on_progress_complete = {
		custom_tooltip = situation_unknown_outcome_approach
		hidden_effect = { situation_event = { id = kuat_situation.26 } }
	}
	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 25
			custom_tooltip = stage_unknown_effects
		}
		stage_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_blue
			end = 75
			on_first_enter = { situation_event = { id = kuat_situation.21 } }
			custom_tooltip = stage_unknown_effects
		}
		stage_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_blue
			end = 100
			on_first_enter = { situation_event = { id = kuat_situation.22 } }
			custom_tooltip = stage_unknown_effects
		}
	}
	#Enlarge
	approach = {
		name = "situation_enlarge_research"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_green
		resources = {
			category = situations
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.25
				society_research = 0.25
				engineering_research = 0.25
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	#Reduce
	approach = {
		name = "situation_reduce_research"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_yellow
		resources = {
			category = situations
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.125
				society_research = 0.125
				engineering_research = 0.125
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	on_monthly = {
		random_events = {
			40 = 0
			20 = kuat_situation.23
			20 = kuat_situation.24
			20 = kuat_situation.25
		}
	}
	monthly_progress = {
		base = 9.6
		modifier = {
			add = 3.4
			desc = "situation_facility_research_processing_faster_desc"
			current_situation_approach = situation_enlarge_research
			has_situation_flag = kuat_research_quickly
		}
		modifier = {
			add = -3.4
			desc = "situation_facility_research_processing_slower_desc"
			current_situation_approach = situation_reduce_research
			has_situation_flag = kuat_research_slowly
		}
	}
	abort_trigger = { NOT = { exists = target } }
}
situation_unlocked_the_B_Area = {
	picture = GFX_evt_star_pulsar
	complete_icon_frame = GFX_situation_outcome_frame_blue
	complete_icon = GFX_situation_outcome_unknown
	fail_icon_frame = GFX_situation_outcome_frame_red
	fail_icon = GFX_situation_outcome_meh
	on_progress_complete = {
		custom_tooltip = situation_unknown_outcome_approach
		hidden_effect = { situation_event = { id = kuat_situation.32 } }
	}
	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 25
			custom_tooltip = stage_unknown_effects
		}
		stage_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_blue
			end = 75
			on_first_enter = { situation_event = { id = kuat_situation.27 } }
			custom_tooltip = stage_unknown_effects
		}
		stage_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_blue
			end = 100
			on_first_enter = { situation_event = { id = kuat_situation.28 } }
			custom_tooltip = stage_unknown_effects
		}
	}
	#Enlarge
	approach = {
		name = "situation_enlarge_research"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_green
		resources = {
			category = situations
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.25
				society_research = 0.25
				engineering_research = 0.25
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	#Reduce
	approach = {
		name = "situation_reduce_research"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_yellow
		resources = {
			category = situations
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.125
				society_research = 0.125
				engineering_research = 0.125
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	on_monthly = {
		random_events = {
			40 = 0
			20 = kuat_situation.29
			20 = kuat_situation.30
			20 = kuat_situation.31
		}
	}
	monthly_progress = {
		base = 9.6
		modifier = {
			add = 3.4
			desc = "situation_facility_research_processing_faster_desc"
			current_situation_approach = situation_enlarge_research
			has_situation_flag = kuat_research_quickly
		}
		modifier = {
			add = -3.4
			desc = "situation_facility_research_processing_slower_desc"
			current_situation_approach = situation_reduce_research
			has_situation_flag = kuat_research_slowly
		}
	}
	abort_trigger = { NOT = { exists = target } }
}
situation_unlocked_the_C_Area = {
	picture = GFX_evt_star_neutron
	complete_icon_frame = GFX_situation_outcome_frame_blue
	complete_icon = GFX_situation_outcome_unknown
	fail_icon_frame = GFX_situation_outcome_frame_red
	fail_icon = GFX_situation_outcome_meh
	on_progress_complete = {
		custom_tooltip = situation_unknown_outcome_approach
		hidden_effect = { situation_event = { id = kuat_situation.38 } }
	}
	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 25
			custom_tooltip = stage_unknown_effects
		}
		stage_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_blue
			end = 75
			on_first_enter = { situation_event = { id = kuat_situation.33 } }
			custom_tooltip = stage_unknown_effects
		}
		stage_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_blue
			end = 100
			on_first_enter = { situation_event = { id = kuat_situation.34 } }
			custom_tooltip = stage_unknown_effects
		}
	}
	#Enlarge
	approach = {
		name = "situation_enlarge_research"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_green
		resources = {
			category = situations
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.25
				society_research = 0.25
				engineering_research = 0.25
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	#Reduce
	approach = {
		name = "situation_reduce_research"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_yellow
		resources = {
			category = situations
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.125
				society_research = 0.125
				engineering_research = 0.125
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	on_monthly = {
		random_events = {
			40 = 0
			20 = kuat_situation.35
			20 = kuat_situation.36
			20 = kuat_situation.37
		}
	}
	monthly_progress = {
		base = 9.6
		modifier = {
			add = 3.4
			desc = "situation_facility_research_processing_faster_desc"
			current_situation_approach = situation_enlarge_research
			has_situation_flag = kuat_research_quickly
		}
		modifier = {
			add = -3.4
			desc = "situation_facility_research_processing_slower_desc"
			current_situation_approach = situation_reduce_research
			has_situation_flag = kuat_research_slowly
		}
	}
	abort_trigger = { NOT = { exists = target } }
}
situation_unlocked_the_D_Area = {
	picture = GFX_evt_black_hole
	complete_icon_frame = GFX_situation_outcome_frame_blue
	complete_icon = GFX_situation_outcome_unknown
	fail_icon_frame = GFX_situation_outcome_frame_red
	fail_icon = GFX_situation_outcome_meh
	on_progress_complete = {
		custom_tooltip = situation_unknown_outcome_approach
		hidden_effect = { situation_event = { id = kuat_situation.44 } }
	}
	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 25
			custom_tooltip = stage_unknown_effects
		}
		stage_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_blue
			end = 75
			on_first_enter = { situation_event = { id = kuat_situation.39 } }
			custom_tooltip = stage_unknown_effects
		}
		stage_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_blue
			end = 100
			on_first_enter = { situation_event = { id = kuat_situation.40 } }
			custom_tooltip = stage_unknown_effects
		}
	}
	#Enlarge
	approach = {
		name = "situation_enlarge_research"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_green
		resources = {
			category = situations
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.25
				society_research = 0.25
				engineering_research = 0.25
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	#Reduce
	approach = {
		name = "situation_reduce_research"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_yellow
		resources = {
			category = situations
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.125
				society_research = 0.125
				engineering_research = 0.125
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	on_monthly = {
		random_events = {
			40 = 0
			20 = kuat_situation.41
			20 = kuat_situation.42
			20 = kuat_situation.43
		}
	}
	monthly_progress = {
		base = 9.6
		modifier = {
			add = 3.4
			desc = "situation_facility_research_processing_faster_desc"
			current_situation_approach = situation_enlarge_research
			has_situation_flag = kuat_research_quickly
		}
		modifier = {
			add = -3.4
			desc = "situation_facility_research_processing_slower_desc"
			current_situation_approach = situation_reduce_research
			has_situation_flag = kuat_research_slowly
		}
	}
	abort_trigger = { NOT = { exists = target } }
}
situation_unlocked_the_I_Area = {
	picture = GFX_evt_arctic
	complete_icon_frame = GFX_situation_outcome_frame_blue
	complete_icon = GFX_situation_outcome_unknown
	fail_icon_frame = GFX_situation_outcome_frame_red
	fail_icon = GFX_situation_outcome_meh
	on_progress_complete = {
		custom_tooltip = situation_unknown_outcome_approach
		hidden_effect = { situation_event = { id = kuat_situation.50 } }
	}
	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 25
			custom_tooltip = stage_unknown_effects
		}
		stage_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_blue
			end = 75
			on_first_enter = { situation_event = { id = kuat_situation.45 } }
			custom_tooltip = stage_unknown_effects
		}
		stage_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_blue
			end = 100
			on_first_enter = { situation_event = { id = kuat_situation.46 } }
			custom_tooltip = stage_unknown_effects
		}
	}
	#Enlarge
	approach = {
		name = "situation_enlarge_research"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_green
		resources = {
			category = situations
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.25
				society_research = 0.25
				engineering_research = 0.25
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	#Reduce
	approach = {
		name = "situation_reduce_research"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_yellow
		resources = {
			category = situations
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.125
				society_research = 0.125
				engineering_research = 0.125
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	on_monthly = {
		random_events = {
			40 = 0
			20 = kuat_situation.47
			20 = kuat_situation.48
			20 = kuat_situation.49
		}
	}
	monthly_progress = {
		base = 9.6
		modifier = {
			add = 3.4
			desc = "situation_facility_research_processing_faster_desc"
			current_situation_approach = situation_enlarge_research
			has_situation_flag = kuat_research_quickly
		}
		modifier = {
			add = -3.4
			desc = "situation_facility_research_processing_slower_desc"
			current_situation_approach = situation_reduce_research
			has_situation_flag = kuat_research_slowly
		}
	}
	abort_trigger = { OR = {
		NOT = { exists = target.owner }
		target.owner = { NOT = { is_same_value = root.owner } }
	} }
}

#find Infinite System
situation_find_infinite_system = {
	picture = GFX_evt_physics_research
	complete_icon_frame = GFX_situation_outcome_frame_blue
	complete_icon = GFX_situation_outcome_unknown
	fail_icon_frame = GFX_situation_outcome_frame_red
	fail_icon = GFX_situation_outcome_meh
	on_progress_complete = {
		custom_tooltip = situation_unknown_outcome_approach
		hidden_effect = { situation_event = { id = ag_kae_ge_invasion.252 } }
	}
	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 25
			custom_tooltip = stage_unknown_effects
		}
		stage_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_blue
			end = 75
			on_first_enter = { situation_event = { id = ag_kae_ge_invasion.250 } }
			custom_tooltip = stage_unknown_effects
		}
		stage_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_blue
			end = 100
			on_first_enter = { situation_event = { id = ag_kae_ge_invasion.251 } }
			custom_tooltip = stage_unknown_effects
		}
	}
	#Enlarge
	approach = {
		name = "situation_enlarge_research"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_green
		resources = {
			category = situations
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.25
				society_research = 0.25
				engineering_research = 0.25
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	#Reduce
	approach = {
		name = "situation_reduce_research"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_yellow
		resources = {
			category = situations
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.125
				society_research = 0.125
				engineering_research = 0.125
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	on_monthly = {
		random_events = {
			40 = 0
			20 = ag_kae_ge_invasion.248
			20 = ag_kae_ge_invasion.249
		}
	}
	monthly_progress = {
		base = 3.2
		modifier = {
			add = 0.8
			desc = "situation_facility_research_processing_faster_desc"
			current_situation_approach = situation_enlarge_research
			has_situation_flag = kuat_research_quickly
		}
		modifier = {
			add = -0.8
			desc = "situation_facility_research_processing_slower_desc"
			current_situation_approach = situation_reduce_research
			has_situation_flag = kuat_research_slowly
		}
	}
	abort_trigger = { OR = {
		NOT = { exists = target.owner }
		target.owner = { NOT = { is_same_value = root.owner } }
	} }
}

### Legacy event preface
situation_legacy_pretext_action = {
	picture = GFX_evt_ship_in_orbit
	complete_icon_frame = GFX_situation_outcome_frame_blue
	complete_icon = GFX_situation_outcome_unknown
	fail_icon_frame = GFX_situation_outcome_frame_red
	fail_icon = GFX_situation_outcome_meh
	on_progress_complete = {
		custom_tooltip = situation_unknown_outcome_approach
		hidden_effect = { owner = { country_event = { id = kuat_legacy.1 } } }
		destroy_situation = this
	}
	stages = {
		stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_blue
			end = 125
			custom_tooltip = stage_unknown_effects
		}
		stage_2 = { #
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_blue
			end = 250
			on_first_enter = {
				situation_event = { id = kuat_situation.53 }
			}
			custom_tooltip = stage_unknown_effects
		}
		stage_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_blue
			end = 375
			on_first_enter = {
				situation_event = { id = kuat_situation.54 }
			}
			custom_tooltip = stage_unknown_effects
		}
		stage_4 = {
			icon = GFX_situation_stage_4
			icon_background = GFX_situation_stage_frame_blue
			end = 500
			on_first_enter = {
				situation_event = { id = kuat_situation.55 }
			}
			custom_tooltip = stage_unknown_effects
		}
		stage_5 = {
			icon = GFX_situation_stage_5
			icon_background = GFX_situation_stage_frame_blue
			end = 625
			on_first_enter = {
				situation_event = { id = kuat_situation.56 }
			}
			custom_tooltip = stage_unknown_effects
		}
		stage_6 = {
			icon = GFX_situation_stage_6
			icon_background = GFX_situation_stage_frame_blue
			end = 750
			on_first_enter = {
				situation_event = { id = kuat_situation.57 }
			}
			custom_tooltip = stage_unknown_effects
		}
		stage_7 = {
			icon = GFX_situation_stage_7
			icon_background = GFX_situation_stage_frame_blue
			end = 875
			on_first_enter = {
				situation_event = { id = kuat_situation.58 }
			}
			custom_tooltip = stage_unknown_effects
		}
		stage_8 = {
			icon = GFX_situation_stage_8
			icon_background = GFX_situation_stage_frame_blue
			end = 1000
			on_first_enter = {
				situation_event = { id = kuat_situation.59 }
			}
			custom_tooltip = stage_unknown_effects
		}
	}
	#hositle
	approach = {
		name = "situation_hositile_altitude_station"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_red
		resources = {
			category = situations
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.25
				society_research = 0.25
				engineering_research = 0.25
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	#neutral
	approach = {
		name = "situation_netural_altitude_station"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_yellow
		resources = {
			category = situations
			produces = {
				trigger = { NOT = { current_stage = stage_1 } }
				alloys = 1
				multiplier = owner.trigger:num_pops
			}
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.25
				society_research = 0.25
				engineering_research = 0.25
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	#friendly
	approach = {
		name = "situation_friendly_altitude_station"
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_green
		resources = {
			category = situations
			produces = {
				trigger = { NOT = { current_stage = stage_1 } }
				alloys = 2
				multiplier = target.trigger:num_pops
			}
			upkeep = {
				trigger = { NOT = { current_stage = stage_1 } }
				physics_research = 0.25
				society_research = 0.25
				engineering_research = 0.25
				multiplier = owner.trigger:num_pops
			}
		}
		on_select = { custom_tooltip = approach_outcome_tooltip }
	}
	on_monthly = {
		random_events = {
			60 = 0
			5 = kuat_situation.60
			5 = kuat_situation.62
			5 = kuat_situation.63
			5 = kuat_situation.65
			5 = kuat_situation.66
			5 = kuat_situation.67
			5 = kuat_situation.68
			5 = kuat_situation.69
		}
	}
	monthly_progress = {
		base = 1
		modifier = {
			mult = 2
			desc = "situation_facility_research_processing_faster_desc"
			owner = { kuat_is_enable_shadow_origin = yes exists = event_target:fallen_empire_kuat has_technology = tech_sensors_4 }
		}
		modifier = {
			mult = 10
			desc = "situation_facility_research_processing_faster_desc"
			owner = { has_origin = origin_eternalthrone exists = event_target:eternal_support_country }
		}
		modifier = {
			set = 0
			desc = "situation_facility_research_processing_slower_desc"
			current_stage = stage_8
			owner = { NOR = {
				AND = { kuat_is_enable_shadow_origin = yes exists = event_target:fallen_empire_kuat }
				AND = { has_origin = origin_eternalthrone exists = event_target:eternal_support_country }
			} }
		}
		modifier = {
			set = 0
			desc = "situation_facility_legacy_progress_stop_noplanet_desc"
			current_stage = stage_8
			owner = { NOT = { any_planet_within_border = { kuat_is_legacy_arc_planet = yes } } }
		}
	}
	abort_trigger = { NOT = { exists = owner } }
}

#TO DO F设施瘟疫局势 虚界后裔入侵前兆
situation_plague_pop_deficit = {
	picture = GFX_evt_deficit
	category = negative
	fail_icon = GFX_situation_outcome_meh
	fail_icon_frame = GFX_situation_outcome_frame_green
	complete_icon = GFX_situation_outcome_bankrupcy
	complete_icon_frame = GFX_situation_outcome_frame_red

	stages = {
		deficit_first = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_red
			end = 25
			custom_tooltip = stage_unknown_effects
		}
		#ghost signal
		deficit_second = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_red
			end = 50
			on_first_enter = { situation_event = { id = kuat_situation.70 } }
			custom_tooltip = stage_unknown_effects
		}
		#ghost exist
		deficit_third = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_red
			end = 75
			on_first_enter = { situation_event = { id = kuat_situation.71 } }
			custom_tooltip = stage_unknown_effects
		}
		#ghost attack
		deficit_fourth = {	
			icon = GFX_situation_stage_4
			icon_background = GFX_situation_stage_frame_red
			end = 100
			on_first_enter = { situation_event = { id = kuat_situation.72 } }
			custom_tooltip = stage_unknown_effects
		}
		#ghost talk
		deficit_fifth = {	
			icon = GFX_situation_stage_5
			icon_background = GFX_situation_stage_frame_red
			end = 150
			on_first_enter = { situation_event = { id = kuat_situation.73 } }
			custom_tooltip = stage_unknown_effects
		}
		#ghost betrayer
		deficit_sixth = {	
			icon = GFX_situation_stage_6
			icon_background = GFX_situation_stage_frame_red
			end = 200
			on_first_enter = { situation_event = { id = kuat_situation.74 } }
			custom_tooltip = stage_unknown_effects
		}
		#ghost business
		deficit_seventh = {	
			icon = GFX_situation_stage_7
			icon_background = GFX_situation_stage_frame_red
			end = 300
			on_first_enter = { situation_event = { id = kuat_situation.75 } }
			custom_tooltip = stage_unknown_effects
		}
		#ghost true
		deficit_eighth = {	
			icon = GFX_situation_stage_8
			icon_background = GFX_situation_stage_frame_red
			end = 500
			on_first_enter = { situation_event = { id = kuat_situation.76 } }
			custom_tooltip = stage_unknown_effects
		}
	}

	on_progress_complete = {
		custom_tooltip = situation_unknown_outcome_approach
		hidden_effect = { owner = { country_event = { id = kuat_situation.77 } } }
		destroy_situation = this
	}

	monthly_progress = { 
		base = 10
		modifier = {
			add = event_target:global_event_country.kuat_plague_pops_dead
			event_target:global_event_country = { check_variable = { which = kuat_plague_pops_dead value > 0 } }
			desc = "situation_facility_plague_desc"
		}
		modifier = {
			factor = 2.5
			current_situation_approach = situation_plague_siton_altitude_station
			desc = "situation_facility_plague_desc"
		}
		modifier = {
			factor = 0.5 
			current_situation_approach = situation_plague_handon_altitude_station
			desc = "situation_facility_plague_desc"
		}
		modifier = {
			set = 0
			target = { NOT = { has_country_flag = fire_once_contact } }
			desc = "situation_facility_plague_desc"
		} 
	}

	#放任
	approach = {
		name = situation_plague_siton_altitude_station
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_red
		on_select = { 
			custom_tooltip = approach_outcome_tooltip 
			set_situation_flag = situation_plague_siton_altitude_station
		}
	}
	#处理
	approach = {
		name = situation_plague_handon_altitude_station
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_green
		on_select = { 
			custom_tooltip = approach_outcome_tooltip 
			set_situation_flag = situation_plague_handon_altitude_station
		}
	}
}
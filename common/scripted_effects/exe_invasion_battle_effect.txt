#scope check
# kuat_print_scope = {
# 	optimize_memory
# 	log = "------------------------------"
# 	log = "- Printing the current scopes (effect) -"
# 	log = "- This: \\[This.GetName]"
# 	log = "- Root: \\[Root.GetName]"
# 	log = "- Prev: \\[Prev.GetName]"
# 	log = "- PrevPrev: \\[PrevPrev.GetName]"
# 	log = "- PrevPrevPrev: \\[PrevPrevPrev.GetName]"
# 	log = "- PrevPrevPrevPrev: \\[PrevPrevPrevPrev.GetName]"
# 	log = "- From: \\[From.GetName]"
# 	log = "- FromFrom: \\[FromFrom.GetName]"
# 	log = "- FromFromFrom: \\[FromFromFrom.GetName]"
# 	log = "- FromFromFromFrom: \\[FromFromFromFrom.GetName]"
# 	log = "- This's Solar System: \\[This.GetStarName]"
# 	log = "- This's Planet: \\[This.Planet.GetName]"
# 	log = "- This's Sector: \\[This.Sector.GetName]"
# 	log = "- Root's Solar System: \\[Root.GetStarName]"
# 	log = "- Root's Owner's Name: \\[Root.Owner.GetName]"
# 	log = "- Root's Owner's Capital's Name: \\[Root.Owner.Capital.GetName]"
# 	log = "- Owner: \\[Owner.GetName]"
# 	log = "------------------------------"
# }

# scope: ship
@kuat_flagship_proection_mult = 0.1
eternal_increase_executor_power = {
	optimize_memory
	if = {
		limit = { NOT = { has_ship_flag = kuat_has_eternal_increase_executor_power_temple } }
		clear_ship_modifier = { modifier = ship_hull_mult DAYS = $DAYS$ subtract = @kuat_flagship_proection_mult }
		clear_ship_modifier = { modifier = shipclass_military_hull_mult DAYS = $DAYS$ subtract = @kuat_flagship_proection_mult }
		clear_ship_modifier = { modifier = ship_hull_regen_add_perc DAYS = $DAYS$ subtract = @kuat_flagship_proection_mult }

		[[TYPE] if = { limit = { has_hp <= @$TYPE$_increase_hp_T9 } add_modifier = { modifier = $TYPE$_increase_hp_T9 days = $DAYS$ } }
		else_if = { limit = { has_hp <= @$TYPE$_increase_hp_T8 } add_modifier = { modifier = $TYPE$_increase_hp_T8 days = $DAYS$ } }
		else_if = { limit = { has_hp <= @$TYPE$_increase_hp_T7 } add_modifier = { modifier = $TYPE$_increase_hp_T7 days = $DAYS$ } }
		else_if = { limit = { has_hp <= @$TYPE$_increase_hp_T6 } add_modifier = { modifier = $TYPE$_increase_hp_T6 days = $DAYS$ } }
		else_if = { limit = { has_hp <= @$TYPE$_increase_hp_T5 } add_modifier = { modifier = $TYPE$_increase_hp_T5 days = $DAYS$ } }
		else_if = { limit = { has_hp <= @$TYPE$_increase_hp_T4 } add_modifier = { modifier = $TYPE$_increase_hp_T4 days = $DAYS$ } }
		else_if = { limit = { has_hp <= @$TYPE$_increase_hp_T3 } add_modifier = { modifier = $TYPE$_increase_hp_T3 days = $DAYS$ } }
		else_if = { limit = { has_hp <= @$TYPE$_increase_hp_T2 } add_modifier = { modifier = $TYPE$_increase_hp_T2 days = $DAYS$ } }
		else_if = { limit = { has_hp <= @$TYPE$_increase_hp_T1 } add_modifier = { modifier = $TYPE$_increase_hp_T1 days = $DAYS$ } }]

		if = { limit = { kuat_is_flagship_system_protection = yes } set_disable_at_health = 0.01 }
		set_timed_ship_flag = { flag = kuat_has_eternal_increase_executor_power_temple days = $DAYS$ }
	}
}

increase_ship_hp_effect_change = {
	optimize_memory
	every_owned_ship = {
		if = {
			limit = { kuat_is_kuat_ship = yes }
			set_timed_ship_flag = { flag = kuat_executor_checkpoint days = $DAYS$ }
			eternal_increase_executor_power = { DAYS = $DAYS$ TYPE = $TYPE$ }
		}
		else_if = {
			limit = { kuat_is_kuat_ship = no NOT = { has_modifier = Eternal_submit } }
			set_timed_ship_flag = { flag = kuat_submit_checkpoint days = $DAYS$ }
			add_modifier = { modifier = Eternal_submit days = $DAYS$ }
		}
		ship_event = { id = exe_invasion.119 }
	}
}

clear_ship_modifier = {
	set_variable = { which = $modifier$_value_iep value = modifier:$modifier$ }
	[[subtract] subtract_variable = { which = $modifier$_value_iep value = $subtract$ }]
	[[change] change_variable = { which = $modifier$_value_iep value = $change$ }]
	[[divide] divide_variable = { which = $modifier$_value_iep value = $divide$ }]
	[[multiply] multiply_variable = { which = $modifier$_value_iep value = $multiply$ }]
	add_modifier = { modifier = iep_basic_$modifier$ multiplier = $modifier$_value_iep days = $DAYS$ } 
	clear_variable = $modifier$_value_iep
}

clear_ship_repeatable_modifier = {
	optimize_memory
	clear_repeatable_modifier = { TYPE = explosive	 				multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = kinetic  	 				multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = energy 	 				multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = strike_craft 	 			multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = gravity 	 				multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = psionic 	 				multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = anti_psionic 				multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = adv_kinetic 				multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = gravity_dummy 				multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = ag_ancient_weapon_buff_1 	multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = ag_ancient_weapon_buff_2 	multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = ag_ancient_weapon_buff_3 	multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = instant_kill_effect 		multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = difficulty_scale 			multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = difficulty_scale_player 	multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = SRA_SRA 					multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = SRA_RE_Core 				multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = H.D.energy 				multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = HD.M.kinetic 				multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = PrimaMateria 				multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = magicia 					multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = rulerule 					multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = fake_madoka 				multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = arcane				 		multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = cosmic 					multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = light_power 				multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = wsg_pantsu 				multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = tesla 						multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = sr_uf 						multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = gungnir 					multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = xianzhe 					multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = knife 						multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = lingli 					multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = magic 						multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = nytowith 					multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = light						multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = keto 						multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = Akso 						multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = LsScepter 					multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = son 						multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = prism 						multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = Electronic 				multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = beacon 					multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = aoe 						multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = fireworks 					multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = kancolle 					multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = kancolle_shinkai 			multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = aon_rpg_attack 			multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = aon_rpg_magic 				multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = sfdoll 					multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = nano 						multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = KZ_VOY_magic 				multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = KZ_VOY_wind_magic 			multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = KZ_VOY_time_magic 			multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = KZ_VOY_earth_magic 		multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = KZ_VOY_pyromancy_magic 	multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = KZ_VOY_lightning_magic 	multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = KZ_VOY_bright_magic 		multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = KZ_VOY_dark_magic 			multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = KZ_VOY_space_magic 		multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = KZ_VOY_aqua_magic 			multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = KZ_VOY_life_magic 			multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = KZ_VOY_temporal 			multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = ge_void_energy 			multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = magi 						multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = charm 						multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = mystical 					multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = close_combat 				multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = critical 					multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = fgosw_block 				multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = fgosw_battle_continuation 	multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = fgosw_only_one 			multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = fgosw_multi_level 			multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = fgosw_skill_saber 			multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = fgosw_skill_archer 		multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = fgosw_skill_lancer 		multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = fgosw_skill_rider			multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = fgosw_skill_caster 		multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = fgosw_skill_assassin 		multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = fgosw_skill_berserker 		multiply = $multiply$ DAYS = $DAYS$ }
	clear_repeatable_modifier = { TYPE = blackash 					multiply = $multiply$ DAYS = $DAYS$ }
}

remove_increase_hp_modifier = {
	remove_modifier = $TYPE$_increase_hp_T9
	remove_modifier = $TYPE$_increase_hp_T8
	remove_modifier = $TYPE$_increase_hp_T7
	remove_modifier = $TYPE$_increase_hp_T6
	remove_modifier = $TYPE$_increase_hp_T5
	remove_modifier = $TYPE$_increase_hp_T4
	remove_modifier = $TYPE$_increase_hp_T3
	remove_modifier = $TYPE$_increase_hp_T2
	remove_modifier = $TYPE$_increase_hp_T1
}

#旗舰与循环增益系统清理
remove_executor_power = {
	optimize_memory
	remove_modifier = Eternal_submit
	remove_modifier = superlazier_super_power_enhance
	remove_ship_flag = kuat_has_eternal_increase_executor_power_temple
	remove_increase_hp_modifier = { TYPE = kt }
	remove_increase_hp_modifier = { TYPE = ee }
	remove_standard_modifier_system = { TITLE = iep_basic }
	remove_repeatable_modifier_base_and_change_base = yes
	remove_repetable_modifier_iep = yes
}
remove_executor_power_fleet = {
	optimize_memory
	every_owned_ship = { remove_executor_power = yes }
}

#移除基本脚本
remove_standard_modifier_system = {
	remove_modifier = $TITLE$_ship_shield_penetration_mult
	remove_modifier = $TITLE$_ship_armor_penetration_mult			
	remove_modifier = $TITLE$_ship_armor_damage_mult				
	remove_modifier = $TITLE$_ship_shield_damage_mult				
	remove_modifier = $TITLE$_ship_hull_damage_mult				
	remove_modifier = $TITLE$_ship_tracking_mult	
	remove_modifier = $TITLE$_ship_accuracy_mult				
	remove_modifier = $TITLE$_ship_weapon_damage						
	remove_modifier = $TITLE$_ship_hull_regen_add_perc			
	remove_modifier = $TITLE$_ship_armor_regen_add_perc			
	remove_modifier = $TITLE$_ship_shield_regen_add_perc		
	remove_modifier = $TITLE$_ship_hull_regen_add_static			
	remove_modifier = $TITLE$_ship_armor_regen_add_static			
	remove_modifier = $TITLE$_ship_shield_regen_add_static	
	remove_modifier = $TITLE$_shipclass_military_hull_mult
	remove_modifier = $TITLE$_ship_speed_mult
	remove_modifier = $TITLE$_ship_hull_mult		
	remove_modifier = $TITLE$_ship_armor_mult						
	remove_modifier = $TITLE$_ship_shield_mult			
	remove_modifier = $TITLE$_ship_shield_reduction	
	remove_modifier = $TITLE$_ship_armor_reduction								
	remove_modifier = $TITLE$_ship_weapon_range_mult						
	remove_modifier = $TITLE$_ship_fire_rate_mult							
	remove_modifier = $TITLE$_ship_tracking_add							
	remove_modifier = $TITLE$_ship_accuracy_add							
	remove_modifier = $TITLE$_ship_armor_add								
	remove_modifier = $TITLE$_ship_shield_add
	remove_modifier = $TITLE$_ship_armor_hardening_add
	remove_modifier = $TITLE$_ship_shield_hardening_add
	remove_modifier = $TITLE$_ship_disengage_chance_reduction
	remove_modifier = $TITLE$_component_lifesteal_add
	remove_modifier = $TITLE$_ship_steal_defeated_ship_chance
	remove_modifier = $TITLE$_fleet_capture_defeated_leader_chance
}

clear_repeatable_modifier = {
	optimize_memory
	if = {
		limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_damage_mult value > 0 } }
		clear_ship_modifier = { modifier = weapon_type_$TYPE$_weapon_damage_mult multiply = $multiply$ DAYS = $DAYS$ }
	}
	if = {
		limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_fire_rate_mult value > 0 } }
		clear_ship_modifier = { modifier = weapon_type_$TYPE$_weapon_fire_rate_mult multiply = $multiply$ DAYS = $DAYS$ }
	}
}

remove_repetable_modifier = {
	optimize_memory
	remove_modifier = $TITLE$_weapon_type_$TYPE$_weapon_damage_mult
	remove_modifier = $TITLE$_weapon_type_$TYPE$_weapon_fire_rate_mult
}

# initial = 0  min = 0.25  small = 0.5  medium = 0.75  max = 0.99  origin = 1
# double = 2  fifth = 5  Tenth = 10  one_of_fourth = 25  one_of_double = 50  hundred = 100  million = 1000000  billion = 2000000
random_list_eternal_fleet_rate = {
	optimize_memory
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = explosive }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = kinetic }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = energy }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = strike_craft }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = arcane }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = cosmic }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = gravity }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = psionic }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = anti_psionic }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = adv_kinetic }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = gravity_dummy }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = ag_ancient_weapon_buff_1 }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = ag_ancient_weapon_buff_2 }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = ag_ancient_weapon_buff_3 }
	set_repeatable_eternal_fleet_mult_damage_to_rate = { TYPE = instant_kill_effect }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = difficulty_scale }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = difficulty_scale_player }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = SRA_SRA }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = SRA_RE_Core }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = H.D.energy }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = HD.M.kinetic }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = PrimaMateria }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = light_power }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = wsg_pantsu }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = tesla }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = kancolle }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = kancolle_shinkai }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = magicia }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = rulerule }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = fake_madoka }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = sr_uf }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = gungnir }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = xianzhe }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = knife }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = lingli }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = magic }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = nytowith }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = light }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = keto }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = Akso }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = LsScepter }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = son }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = prism }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = Electronic }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = beacon }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = aoe }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = fireworks }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = aon_rpg_attack }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = aon_rpg_magic }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = sfdoll }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = nano }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = KZ_VOY_magic }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = KZ_VOY_wind_magic }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = KZ_VOY_time_magic }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = KZ_VOY_earth_magic }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = KZ_VOY_pyromancy_magic }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = KZ_VOY_lightning_magic }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = KZ_VOY_bright_magic }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = KZ_VOY_dark_magic }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = KZ_VOY_space_magic }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = KZ_VOY_aqua_magic }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = KZ_VOY_life_magic }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = KZ_VOY_temporal }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = ge_void_energy }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = magi }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = charm }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = mystical }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = close_combat }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = critical }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = fgosw_block }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = fgosw_battle_continuation }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = fgosw_only_one }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = fgosw_multi_level }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = fgosw_skill_saber }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = fgosw_skill_archer }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = fgosw_skill_lancer }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = fgosw_skill_rider }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = fgosw_skill_caster }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = fgosw_skill_assassin }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = fgosw_skill_berserker }
	set_repeatable_eternal_fleet_mult_rate_to_damage = { TYPE = blackash }
}
set_repeatable_eternal_fleet_mult_rate_to_damage = {
	optimize_memory
	if = {
		limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_fire_rate_mult value > 0 } }
		set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_fire_rate_mult PARAMATER2 = weapon_type_$TYPE$_weapon_damage_mult UNIT = initial RATE = -0.75 } 
		# if = {
		# 	limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_fire_rate_mult value > 200 } }
		# 	set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_fire_rate_mult PARAMATER2 = weapon_type_$TYPE$_weapon_damage_mult UNIT = origin RATE = -0.65 } 
		# }
		# else_if = {
		# 	limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_fire_rate_mult value > 100 } }
		# 	set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_fire_rate_mult PARAMATER2 = weapon_type_$TYPE$_weapon_damage_mult UNIT = origin RATE = -0.70 } 
		# }
		# else_if = {
		# 	limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_fire_rate_mult value > 90 } }
		# 	set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_fire_rate_mult PARAMATER2 = weapon_type_$TYPE$_weapon_damage_mult UNIT = origin RATE = -0.75 } 
		# }
		# else_if = {
		# 	limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_fire_rate_mult value > 80 } }
		# 	set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_fire_rate_mult PARAMATER2 = weapon_type_$TYPE$_weapon_damage_mult UNIT = origin RATE = -0.80 } 
		# }
		# else_if = {
		# 	limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_fire_rate_mult value > 70 } }
		# 	set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_fire_rate_mult PARAMATER2 = weapon_type_$TYPE$_weapon_damage_mult UNIT = origin RATE = -0.85 } 
		# }
		# else_if = {
		# 	limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_fire_rate_mult value > 60 } }
		# 	set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_fire_rate_mult PARAMATER2 = weapon_type_$TYPE$_weapon_damage_mult UNIT = origin RATE = -0.80 } 
		# }
		# else_if = {
		# 	limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_fire_rate_mult value > 50 } }
		# 	set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_fire_rate_mult PARAMATER2 = weapon_type_$TYPE$_weapon_damage_mult UNIT = origin RATE = -0.85 } 
		# }
		# else_if = {
		# 	limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_fire_rate_mult value > 40 } }
		# 	set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_fire_rate_mult PARAMATER2 = weapon_type_$TYPE$_weapon_damage_mult UNIT = origin RATE = -0.90 } 
		# }
		# else_if = {
		# 	limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_fire_rate_mult value > 30 } }
		# 	set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_fire_rate_mult PARAMATER2 = weapon_type_$TYPE$_weapon_damage_mult UNIT = origin RATE = -0.95 } 
		# }
		# else_if = {
		# 	limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_fire_rate_mult value > 20 } }
		# 	set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_fire_rate_mult PARAMATER2 = weapon_type_$TYPE$_weapon_damage_mult UNIT = origin RATE = -0.90 } 
		# }
		# else_if = {
		# 	limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_fire_rate_mult value > 1 } }
		# 	set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_fire_rate_mult PARAMATER2 = weapon_type_$TYPE$_weapon_damage_mult UNIT = origin RATE = -1 } 
		# }
	}
}
set_repeatable_eternal_fleet_mult_damage_to_rate = {
	optimize_memory
	if = {
		limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_damage_mult value > 0 } }
		set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_damage_mult PARAMATER2 = weapon_type_$TYPE$_weapon_fire_rate_mult UNIT = initial RATE = 0 } 
		# if = {
		# 	limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_damage_mult value > 200 } }
		# 	set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_damage_mult PARAMATER2 = weapon_type_$TYPE$_weapon_fire_rate_mult UNIT = Tenth RATE = -0.01 } 
		# }
		# else_if = {
		# 	limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_damage_mult value > 100 } }
		# 	set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_damage_mult PARAMATER2 = weapon_type_$TYPE$_weapon_fire_rate_mult UNIT = Tenth RATE = -0.10 } 
		# }
		# else_if = {
		# 	limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_damage_mult value > 90 } }
		# 	set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_damage_mult PARAMATER2 = weapon_type_$TYPE$_weapon_fire_rate_mult UNIT = Tenth RATE = -0.20 } 
		# }
		# else_if = {
		# 	limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_damage_mult value > 80 } }
		# 	set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_damage_mult PARAMATER2 = weapon_type_$TYPE$_weapon_fire_rate_mult UNIT = Tenth RATE = -0.30 } 
		# }
		# else_if = {
		# 	limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_damage_mult value > 70 } }
		# 	set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_damage_mult PARAMATER2 = weapon_type_$TYPE$_weapon_fire_rate_mult UNIT = Tenth RATE = -0.40 } 
		# }
		# else_if = {
		# 	limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_damage_mult value > 60 } }
		# 	set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_damage_mult PARAMATER2 = weapon_type_$TYPE$_weapon_fire_rate_mult UNIT = Tenth RATE = -0.50 } 
		# }
		# else_if = {
		# 	limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_damage_mult value > 50 } }
		# 	set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_damage_mult PARAMATER2 = weapon_type_$TYPE$_weapon_fire_rate_mult UNIT = Tenth RATE = -0.60 } 
		# }
		# else_if = {
		# 	limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_damage_mult value > 40 } }
		# 	set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_damage_mult PARAMATER2 = weapon_type_$TYPE$_weapon_fire_rate_mult UNIT = Tenth RATE = -0.70 } 
		# }
		# else_if = {
		# 	limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_damage_mult value > 30 } }
		# 	set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_damage_mult PARAMATER2 = weapon_type_$TYPE$_weapon_fire_rate_mult UNIT = Tenth RATE = -0.80 } 
		# }
		# else_if = {
		# 	limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_damage_mult value > 20 } }
		# 	set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_damage_mult PARAMATER2 = weapon_type_$TYPE$_weapon_fire_rate_mult UNIT = Tenth RATE = -0.98 } 
		# }
		# else_if = {
		# 	limit = { check_modifier_value = { modifier = weapon_type_$TYPE$_weapon_damage_mult value > 10 } }
		# 	set_standard_battle_repeatable_modifier = { PARAMATER1 = weapon_type_$TYPE$_weapon_damage_mult PARAMATER2 = weapon_type_$TYPE$_weapon_fire_rate_mult UNIT = Tenth RATE = -0.99 } 
		# }
	}
}

# THIS: SOLAR SYSTEM
setup_invinciable_protection_pragram = {
	optimize_memory
	if = {
		limit = { is_in_combat = yes }
		every_owned_ship = {
			if = { 
				limit = { NOT = { has_ship_flag = fire_ship_var } } 
				random_list_eternal_fleet_rate = yes 
				set_ship_flag = fire_ship_var
			}
			$KEY$ = { netrual = yes frendly = yes AUTO = yes }
			set_ship_flag = is_modifiering 
		}
		fleet_event = { id = $ID$ days = 1 }
	}
	else = { clear_battleship_modifier_fixed_ship = yes }
}
setup_invinciable_attacketion_pragram = {
	optimize_memory
	if = {
		limit = { is_in_combat = yes }
		every_owned_ship = {
			if = { 
				limit = { NOT = { has_ship_flag = fire_ship_var } } 
				random_list_eternal_fleet_rate = yes 
				set_ship_flag = fire_ship_var
			}
			$KEY$ = { netrual = yes hostile = yes AUTO = yes }
			set_ship_flag = is_modifiering 
		}
		fleet_event = { id = $ID$ days = 1 }
	}
	else = { clear_battleship_modifier_fixed_ship = yes }
}

# initial = 0  min = 0.25  small = 0.5  medium = 0.75  large = 0.90  max = 0.99  origin = 1
# double = 2  fifth = 5  Tenth = 10  one_of_fourth = 25  one_of_double = 50  hundred = 100 double_hundred = 200  million = 1000000  billion = 5000000
set_easy_eternal_fleet_mult_modifier = {
	optimize_memory
	[[netrual] 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_speed_mult 					RELATION = "<"  OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_hardening_add 			RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_hardening_add 			RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_fire_rate_mult 				RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_hull_regen_add_static			RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_regen_add_static			RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_regen_add_static		RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_hull_regen_add_perc 			RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_regen_add_perc 			RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_regen_add_perc 			RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_steal_defeated_ship_chance 	RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = fleet_capture_defeated_leader_chance RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
	]

	[[hostile] 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_penetration_mult 		RELATION = "!=" OUTPUT_VALUE = 1 		UNIT_VALUE = -1 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_penetration_mult 		RELATION = "!=" OUTPUT_VALUE = 1 		UNIT_VALUE = -1 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_disengage_chance_reduction 	RELATION = "!=" OUTPUT_VALUE = 1 		UNIT_VALUE = -1 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_damage_mult 				RELATION = "!=" OUTPUT_VALUE = 3 		UNIT_VALUE = -3 } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_damage_mult 			RELATION = "!=" OUTPUT_VALUE = 3 		UNIT_VALUE = -3 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_hull_damage_mult				RELATION = "!=" OUTPUT_VALUE = 3 		UNIT_VALUE = -3 } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_weapon_damage 					RELATION = "!=" OUTPUT_VALUE = 3 		UNIT_VALUE = -3 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = component_lifesteal_add 			RELATION = ">"  OUTPUT_VALUE = 1 		UNIT_VALUE = -1 }
	]

	[[frendly] 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_damage_mult 				RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_damage_mult				RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_hull_damage_mult				RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_hull_mult 						RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_mult						RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }    
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_mult					RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }    
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_weapon_range_mult 				RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_tracking_mult 					RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }   
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_accuracy_mult 					RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_tracking_add 					RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_accuracy_add					RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_add 					RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }   
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_add 						RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }  
		set_eternal_fleet_standard_modifier					= { PARAMATER = ship_shield_reduction 				RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_reduction 				RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
	]

	[[AUTO]
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_weapon_damage					RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_penetration_mult		RELATION = "!=" OUTPUT_VALUE = 0		UNIT_VALUE = 0 } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_penetration_mult			RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
	]
}

set_normal_eternal_fleet_mult_modifier = {
	optimize_memory
	[[netrual] 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_speed_mult 					RELATION = "<"  OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_hardening_add 			RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_hardening_add 			RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_fire_rate_mult 				RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_hull_regen_add_static			RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_regen_add_static			RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_regen_add_static		RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_hull_regen_add_perc 			RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_regen_add_perc 			RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_regen_add_perc 			RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_steal_defeated_ship_chance 	RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = fleet_capture_defeated_leader_chance RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
	]

	[[hostile] 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_penetration_mult 		RELATION = "!=" OUTPUT_VALUE = -1 		UNIT_VALUE = 1 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_penetration_mult 		RELATION = "!=" OUTPUT_VALUE = -1 		UNIT_VALUE = 1 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_disengage_chance_reduction 	RELATION = "!=" OUTPUT_VALUE = 1 		UNIT_VALUE = -1 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_damage_mult 				RELATION = "!=" OUTPUT_VALUE = -0.25 	UNIT_VALUE = 0.25 } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_damage_mult 			RELATION = "!=" OUTPUT_VALUE = -0.25 	UNIT_VALUE = 0.25 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_hull_damage_mult				RELATION = "!=" OUTPUT_VALUE = -0.25 	UNIT_VALUE = 0.25 } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_weapon_damage 					RELATION = "!=" OUTPUT_VALUE = -0.25 	UNIT_VALUE = 0.25 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = component_lifesteal_add 			RELATION = ">"  OUTPUT_VALUE = 1 		UNIT_VALUE = -1 }
	]

	[[frendly] 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_damage_mult 				RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_damage_mult				RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_hull_damage_mult				RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_hull_mult 						RELATION = "<"  OUTPUT_VALUE = 0.5 		UNIT_VALUE = -0.5 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_mult						RELATION = "<"  OUTPUT_VALUE = 0.5 		UNIT_VALUE = -0.5 }    
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_mult					RELATION = "<"  OUTPUT_VALUE = 0.5 		UNIT_VALUE = -0.5 }    
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_weapon_range_mult 				RELATION = "<"  OUTPUT_VALUE = 0.5 		UNIT_VALUE = -0.5 } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_tracking_mult 					RELATION = "<"  OUTPUT_VALUE = 0.5 		UNIT_VALUE = -0.5 }   
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_accuracy_mult 					RELATION = "<"  OUTPUT_VALUE = 0.5 		UNIT_VALUE = -0.5 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_tracking_add 					RELATION = "!=" OUTPUT_VALUE = 50 		UNIT_VALUE = -50 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_accuracy_add					RELATION = "!=" OUTPUT_VALUE = 50 		UNIT_VALUE = -50 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_add 					RELATION = "!=" OUTPUT_VALUE = 500000 	UNIT_VALUE = -500000 }   
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_add 						RELATION = "!=" OUTPUT_VALUE = 500000 	UNIT_VALUE = -500000 }  
		set_eternal_fleet_standard_modifier					= { PARAMATER = ship_shield_reduction 				RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_reduction 				RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
	]

	[[AUTO]
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_weapon_damage					RELATION = "<"  OUTPUT_VALUE = 0.5		UNIT_VALUE = -0.5 } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_penetration_mult		RELATION = "<"  OUTPUT_VALUE = 0.5		UNIT_VALUE = -0.5 } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_penetration_mult			RELATION = "<"  OUTPUT_VALUE = 0.5 		UNIT_VALUE = -0.5 }
	]
}
 
set_difiicult_eternal_fleet_mult_modifier = {
	optimize_memory
	[[netrual] 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_speed_mult 					RELATION = "<"  OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_hardening_add 			RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_hardening_add 			RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_fire_rate_mult 				RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_hull_regen_add_static			RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_regen_add_static			RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_regen_add_static		RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_hull_regen_add_perc 			RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_regen_add_perc 			RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_regen_add_perc 			RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_steal_defeated_ship_chance 	RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = fleet_capture_defeated_leader_chance RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
	]
	
	[[hostile] 
		set_eternal_fleet_standard_modifier 			= { PARAMATER = component_lifesteal_add 			RELATION = ">"  OUTPUT_VALUE = 1 	UNIT_VALUE = -1 }
		set_eternal_fleet_standard_modifier 			= { PARAMATER = ship_shield_penetration_mult 		RELATION = "!=" OUTPUT_VALUE = -1 	UNIT_VALUE = 1 }
		set_eternal_fleet_standard_modifier 			= { PARAMATER = ship_armor_penetration_mult 		RELATION = "!=" OUTPUT_VALUE = -1 	UNIT_VALUE = 1 }
		set_eternal_fleet_standard_modifier 			= { PARAMATER = ship_disengage_chance_reduction 	RELATION = "!=" OUTPUT_VALUE = 1 	UNIT_VALUE = -1 }
		set_eternal_fleet_damage_modifier 				= { PARAMATER = ship_armor_damage_mult				RELATION = "!="	UNIT = origin		UNIT1 = medium		UNIT2 = small		UNIT3 = max }  
		set_eternal_fleet_damage_modifier 				= { PARAMATER = ship_shield_damage_mult				RELATION = "!="	UNIT = origin		UNIT1 = medium		UNIT2 = small		UNIT3 = max } 
		set_eternal_fleet_damage_modifier 				= { PARAMATER = ship_hull_damage_mult 				RELATION = "!="	UNIT = origin		UNIT1 = medium		UNIT2 = small		UNIT3 = max }  
		set_eternal_fleet_damage_modifier 				= { PARAMATER = ship_weapon_damage 					RELATION = "!="	UNIT = origin		UNIT1 = medium		UNIT2 = small		UNIT3 = max }
	]

	[[frendly] 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_damage_mult 				RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_damage_mult				RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_hull_damage_mult				RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_hull_mult 						RELATION = "<"  OUTPUT_VALUE = 1 		UNIT_VALUE = -1 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_mult						RELATION = "<"  OUTPUT_VALUE = 1 		UNIT_VALUE = -1 }   
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_penetration_mult		RELATION = "<"  OUTPUT_VALUE = 1		UNIT_VALUE = -1 } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_penetration_mult			RELATION = "<"  OUTPUT_VALUE = 1		UNIT_VALUE = -1 }  
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_mult					RELATION = "<"  OUTPUT_VALUE = 1 		UNIT_VALUE = -1 }    
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_weapon_range_mult 				RELATION = "<"  OUTPUT_VALUE = 1 		UNIT_VALUE = -1 } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_tracking_mult 					RELATION = "<"  OUTPUT_VALUE = 1 		UNIT_VALUE = -1 }   
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_accuracy_mult 					RELATION = "<"  OUTPUT_VALUE = 1 		UNIT_VALUE = -1 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_tracking_add 					RELATION = "!=" OUTPUT_VALUE = 100 		UNIT_VALUE = -100 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_accuracy_add					RELATION = "!=" OUTPUT_VALUE = 100 		UNIT_VALUE = -100 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_add 					RELATION = "!=" OUTPUT_VALUE = 1000000 	UNIT_VALUE = -1000000 }   
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_add 						RELATION = "!=" OUTPUT_VALUE = 1000000 	UNIT_VALUE = -1000000 }  
		set_eternal_fleet_standard_modifier					= { PARAMATER = ship_shield_reduction 				RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_reduction 				RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
	]

	[[AUTO]
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_weapon_damage							RELATION = "<"  OUTPUT_VALUE = value:kuat_dynamic_OUTPUT_value		UNIT_VALUE = value:kuat_dynamic_UNIT_value } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = weapon_type_energy_weapon_damage_mult		RELATION = "<"  OUTPUT_VALUE = value:kuat_dynamic_OUTPUT_value		UNIT_VALUE = value:kuat_dynamic_UNIT_value } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = weapon_type_kinetic_weapon_damage_mult		RELATION = "<"  OUTPUT_VALUE = value:kuat_dynamic_OUTPUT_value		UNIT_VALUE = value:kuat_dynamic_UNIT_value } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = weapon_type_explosive_weapon_damage_mult	RELATION = "<"  OUTPUT_VALUE = value:kuat_dynamic_OUTPUT_value		UNIT_VALUE = value:kuat_dynamic_UNIT_value } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = weapon_type_strike_craft_weapon_damage_mult	RELATION = "<"  OUTPUT_VALUE = value:kuat_dynamic_OUTPUT_value		UNIT_VALUE = value:kuat_dynamic_UNIT_value } 
	]
}

set_ban_eternal_fleet_mult_modifier = {
	optimize_memory
	[[netrual] 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_speed_mult 					RELATION = "<"  OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_hardening_add 			RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_hardening_add 			RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_fire_rate_mult 				RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_hull_regen_add_static			RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_regen_add_static			RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_regen_add_static		RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_hull_regen_add_perc 			RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_regen_add_perc 			RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_regen_add_perc 			RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_steal_defeated_ship_chance 	RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = fleet_capture_defeated_leader_chance RELATION = "!=" OUTPUT_VALUE = 0 	UNIT_VALUE = 0 }
	] 
	
	[[hostile] 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = component_lifesteal_add 			RELATION = ">"  OUTPUT_VALUE = 1 	UNIT_VALUE = -1 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_penetration_mult 		RELATION = "!=" OUTPUT_VALUE = -1 	UNIT_VALUE = 1 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_penetration_mult 		RELATION = "!=" OUTPUT_VALUE = -1 	UNIT_VALUE = 1 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_disengage_chance_reduction 	RELATION = "!=" OUTPUT_VALUE = 1 	UNIT_VALUE = -1 }
		set_eternal_fleet_damage_modifier 					= { PARAMATER = ship_armor_damage_mult				RELATION = "!=" UNIT = origin		UNIT1 = max		UNIT2 = medium		UNIT3 = maxul }  
		set_eternal_fleet_damage_modifier 					= { PARAMATER = ship_shield_damage_mult				RELATION = "!="	UNIT = origin		UNIT1 = max		UNIT2 = medium		UNIT3 = maxul } 
		set_eternal_fleet_damage_modifier 					= { PARAMATER = ship_hull_damage_mult 				RELATION = "!="	UNIT = origin		UNIT1 = max		UNIT2 = medium		UNIT3 = maxul }  
		set_eternal_fleet_damage_modifier 					= { PARAMATER = ship_weapon_damage 					RELATION = "!="	UNIT = origin		UNIT1 = max		UNIT2 = medium		UNIT3 = maxul }
	] 

	[[frendly] 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_damage_mult 				RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_damage_mult				RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_hull_damage_mult				RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_penetration_mult		RELATION = "<"  OUTPUT_VALUE = 2		UNIT_VALUE = -2 } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_penetration_mult			RELATION = "<"  OUTPUT_VALUE = 2		UNIT_VALUE = -2 }  
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_hull_mult 						RELATION = "<"  OUTPUT_VALUE = 2 		UNIT_VALUE = -2 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_mult						RELATION = "<"  OUTPUT_VALUE = 2 		UNIT_VALUE = -2 }    
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_mult					RELATION = "<"  OUTPUT_VALUE = 2 		UNIT_VALUE = -2 }    
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_weapon_range_mult 				RELATION = "<"  OUTPUT_VALUE = 2 		UNIT_VALUE = -2 } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_tracking_mult 					RELATION = "<"  OUTPUT_VALUE = 2 		UNIT_VALUE = -2 }   
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_accuracy_mult 					RELATION = "<"  OUTPUT_VALUE = 2 		UNIT_VALUE = -2 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_tracking_add 					RELATION = "!=" OUTPUT_VALUE = 200 		UNIT_VALUE = -200 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_accuracy_add					RELATION = "!=" OUTPUT_VALUE = 200 		UNIT_VALUE = -200 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_shield_add 					RELATION = "!=" OUTPUT_VALUE = 2000000 	UNIT_VALUE = -2000000 }   
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_add 						RELATION = "!=" OUTPUT_VALUE = 2000000 	UNIT_VALUE = -2000000 }  
		set_eternal_fleet_standard_modifier					= { PARAMATER = ship_shield_reduction 				RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_armor_reduction 				RELATION = "!=" OUTPUT_VALUE = 0 		UNIT_VALUE = 0 }
	]

	[[AUTO]
		set_eternal_fleet_standard_modifier 				= { PARAMATER = ship_weapon_damage							RELATION = "<"  OUTPUT_VALUE = value:kuat_dynamic_OUTPUT_value		UNIT_VALUE = value:kuat_dynamic_UNIT_value } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = weapon_type_energy_weapon_damage_mult		RELATION = "<"  OUTPUT_VALUE = value:kuat_dynamic_OUTPUT_value		UNIT_VALUE = value:kuat_dynamic_UNIT_value } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = weapon_type_kinetic_weapon_damage_mult		RELATION = "<"  OUTPUT_VALUE = value:kuat_dynamic_OUTPUT_value		UNIT_VALUE = value:kuat_dynamic_UNIT_value } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = weapon_type_explosive_weapon_damage_mult	RELATION = "<"  OUTPUT_VALUE = value:kuat_dynamic_OUTPUT_value		UNIT_VALUE = value:kuat_dynamic_UNIT_value } 
		set_eternal_fleet_standard_modifier 				= { PARAMATER = weapon_type_strike_craft_weapon_damage_mult	RELATION = "<"  OUTPUT_VALUE = value:kuat_dynamic_OUTPUT_value		UNIT_VALUE = value:kuat_dynamic_UNIT_value } 
	]
}

# tip:script scope available in penetration modifier, other will be error.
# parameter： modifier.
# UNIT_VALUE: modifier change units.
# OUTPUT_VALUE: target value of modifier.
# TYPE: value class type, for example change\subtract.
# SUPPORT: + OR -  
set_eternal_fleet_standard_modifier = {
	optimize_memory
	if = { 
		limit = { 
			NOR = { 
				has_ship_flag = $PARAMATER$_ship_cooldown 
				has_ship_flag = is_modifiering
			}
			check_modifier_value = { modifier = $PARAMATER$ value $RELATION$ $OUTPUT_VALUE$ }
		}
		export_modifier_to_variable = { modifier = $PARAMATER$ variable = $PARAMATER$_value }
		change_variable = { which = $PARAMATER$_value value = $UNIT_VALUE$ }
		add_modifier = { modifier = basic_$PARAMATER$ multiplier = $PARAMATER$_value }
		if = { limit = { is_variable_set = $PARAMATER$_value } clear_variable = $PARAMATER$_value }
		set_timed_ship_flag = { flag = $PARAMATER$_ship_cooldown days = 1 }
	} 
	else_if = { 
		limit = { 
			has_ship_flag = is_modifiering 
			NOT = { has_ship_flag = $PARAMATER$_ship_cooldown }
			check_modifier_value = { modifier = $PARAMATER$ value $RELATION$ $OUTPUT_VALUE$ }
		}
		export_modifier_to_variable = { modifier = $PARAMATER$ variable = change_$PARAMATER$_value }
		change_variable = { which = change_$PARAMATER$_value value = $UNIT_VALUE$ }
		change_variable = { which = debug_change_$PARAMATER$_value value = change_$PARAMATER$_value }
		add_modifier = { modifier = change_basic_$PARAMATER$ multiplier = debug_change_$PARAMATER$_value }
		if = { limit = { is_variable_set = change_$PARAMATER$_value } clear_variable = change_$PARAMATER$_value }
		set_timed_ship_flag = { flag = $PARAMATER$_ship_cooldown days = 1 }
	}
}

# tip:script scope available in armor/shield/powerpoint modifier, other will be error.
# parameter： modifier  
# UNIT：Non flagship value  
# UNIT1：flagship value
# SUPPORT: -
set_eternal_fleet_damage_modifier = {
	optimize_memory
	if = {
		limit = { 
			NOR = { has_ship_flag = $PARAMATER$_ship_cooldown has_ship_flag = is_modifiering }
			check_modifier_value = { modifier = $PARAMATER$ value > @mult_modifer_mult_$UNIT$_value } 
		}
		export_modifier_to_variable = { modifier = $PARAMATER$ variable = $PARAMATER$_value }
		change_variable = { which = $PARAMATER$_value value = @modifer_mult_$UNIT$_value }
		add_modifier = { modifier = basic_$PARAMATER$ multiplier = $PARAMATER$_value }
		if = { limit = { is_variable_set = $PARAMATER$_value } clear_variable = $PARAMATER$_value }
		set_timed_ship_flag = { flag = $PARAMATER$_ship_cooldown days = 1 }
	} 
	else_if = { 
		limit = { 
			has_ship_flag = is_modifiering NOT = { has_ship_flag = $PARAMATER$_ship_cooldown } 
			fleet = { has_fleet_flag = has_kuat_flagship_system }
		}
		if = { # -99
			limit = { 
				fleet = { has_fleet_flag = kuat_super_flagship_lack_support }
				check_modifier_value = { modifier = $PARAMATER$ value $RELATION$ @mult_modifer_mult_$UNIT3$_value } 
			}
			export_modifier_to_variable = { modifier = $PARAMATER$ variable = change_$PARAMATER$_value }
			change_variable = { which = change_$PARAMATER$_value value = @modifer_mult_$UNIT3$_value }
			change_variable = { which = debug_change_$PARAMATER$_value value = change_$PARAMATER$_value }
			add_modifier = { modifier = change_basic_$PARAMATER$ multiplier = debug_change_$PARAMATER$_value }
			if = { limit = { is_variable_set = change_$PARAMATER$_value } clear_variable = change_$PARAMATER$_value }
			set_timed_ship_flag = { flag = $PARAMATER$_ship_cooldown days = 1 }
		}
		else_if = {
			limit = { NOT = { fleet = { has_fleet_flag = kuat_super_flagship_lack_support } } }
			if = { # -99
				limit = { 
					NOT = { fleet = { has_fleet_flag = has_kuat_subflagship_system } }
					check_modifier_value = { modifier = $PARAMATER$ value $RELATION$ @mult_modifer_mult_$UNIT1$_value } 
				}
				export_modifier_to_variable = { modifier = $PARAMATER$ variable = change_$PARAMATER$_value }
				change_variable = { which = change_$PARAMATER$_value value = @modifer_mult_$UNIT1$_value }
				change_variable = { which = debug_change_$PARAMATER$_value value = change_$PARAMATER$_value }
				add_modifier = { modifier = change_basic_$PARAMATER$ multiplier = debug_change_$PARAMATER$_value }
				if = { limit = { is_variable_set = change_$PARAMATER$_value } clear_variable = change_$PARAMATER$_value }
				set_timed_ship_flag = { flag = $PARAMATER$_ship_cooldown days = 1 }
			}
			else_if = { #-75
				limit = {  
					fleet = { has_fleet_flag = has_kuat_subflagship_system }
					check_modifier_value = { modifier = $PARAMATER$ value $RELATION$ @mult_modifer_mult_$UNIT2$_value } 
				}
				export_modifier_to_variable = { modifier = $PARAMATER$ variable = change_$PARAMATER$_value }
				change_variable = { which = change_$PARAMATER$_value value = @modifer_mult_$UNIT2$_value }
				change_variable = { which = debug_change_$PARAMATER$_value value = change_$PARAMATER$_value }
				add_modifier = { modifier = change_basic_$PARAMATER$ multiplier = debug_change_$PARAMATER$_value }
				if = { limit = { is_variable_set = change_$PARAMATER$_value } clear_variable = change_$PARAMATER$_value }
				set_timed_ship_flag = { flag = $PARAMATER$_ship_cooldown days = 1 }
			}
		}
	}
}
# tip:script scope available in all modifier about protecting ship
# parameter： the modifier  
# UNIT：Non flagship value  
# RELATION： < > or = 
# SUPPORT: +
set_eternal_fleet_protection_modifier = {
	optimize_memory
	if = {
		limit = { 
			NOR = { 
				has_ship_flag = $PARAMATER$_ship_cooldown 
				has_ship_flag = is_modifiering
			}
		}
		if = {
			limit = { 
				fleet = { NOT = { has_fleet_flag = has_kuat_flagship_system_addon_repeatable } }
				check_modifier_value = { modifier = $PARAMATER$ value $RELATION$ @modifer_mult_$UNIT$_value } 
			}
			export_modifier_to_variable = { modifier = $PARAMATER$ variable = $PARAMATER$_value }
			subtract_variable = { which = $PARAMATER$_value value = @modifer_mult_$UNIT$_value }
			add_modifier = { modifier = basic_$PARAMATER$ multiplier = $PARAMATER$_value }
			if = { limit = { is_variable_set = $PARAMATER$_value } clear_variable = $PARAMATER$_value }
			set_timed_ship_flag = { flag = $PARAMATER$_ship_cooldown days = 1 }
		}
		else_if = {
			limit = { 
				fleet = { has_fleet_flag = has_kuat_flagship_system_addon_repeatable }
				check_modifier_value = { modifier = $PARAMATER$ value $RELATION$ @modifer_mult_$UNIT1$_value } 
			}
			export_modifier_to_variable = { modifier = $PARAMATER$ variable = $PARAMATER$_value }
			subtract_variable = { which = $PARAMATER$_value value = @modifer_mult_$UNIT1$_value }
			add_modifier = { modifier = basic_$PARAMATER$ multiplier = $PARAMATER$_value }
			if = { limit = { is_variable_set = $PARAMATER$_value } clear_variable = $PARAMATER$_value }
			set_timed_ship_flag = { flag = $PARAMATER$_ship_cooldown days = 1 }
		}
	} 
	else_if = { 
		limit = { 
			has_ship_flag = is_modifiering  
			NOT = { has_ship_flag = $PARAMATER$_ship_cooldown } 
		}
		if = {
			limit = { 
				fleet = { NOT = { has_fleet_flag = has_kuat_flagship_system_addon_repeatable } }
				check_modifier_value = { modifier = $PARAMATER$ value $RELATION$ @modifer_mult_$UNIT$_value } 
			}
			export_modifier_to_variable = { modifier = $PARAMATER$ variable = change_$PARAMATER$_value }
			subtract_variable = { which = change_$PARAMATER$_value value = @modifer_mult_$UNIT$_value }
			change_variable = { which = debug_change_$PARAMATER$_value value = change_$PARAMATER$_value }
			add_modifier = { modifier = change_basic_$PARAMATER$ multiplier = debug_change_$PARAMATER$_value }
			if = { limit = { is_variable_set = change_$PARAMATER$_value } clear_variable = change_$PARAMATER$_value }
			set_timed_ship_flag = { flag = $PARAMATER$_ship_cooldown days = 1 }
		}
		else_if = {
			limit = { 
				fleet = { has_fleet_flag = has_kuat_flagship_system_addon_repeatable }
				check_modifier_value = { modifier = $PARAMATER$ value $RELATION$ @modifer_mult_$UNIT1$_value } 
			}
			export_modifier_to_variable = { modifier = $PARAMATER$ variable = change_$PARAMATER$_value }
			subtract_variable = { which = change_$PARAMATER$_value value = @modifer_mult_$UNIT1$_value }
			change_variable = { which = debug_change_$PARAMATER$_value value = change_$PARAMATER$_value }
			add_modifier = { modifier = change_basic_$PARAMATER$ multiplier = debug_change_$PARAMATER$_value }
			if = { limit = { is_variable_set = change_$PARAMATER$_value } clear_variable = change_$PARAMATER$_value }
			set_timed_ship_flag = { flag = $PARAMATER$_ship_cooldown days = 1 }
		}
	}
}


# tip:script scope available in repeatable technology
# parameter1： the repeatable fire rate modifier(input)
# parameter1： the repeatable damage modifier(output)
# UNIT：Value standard
set_standard_battle_repeatable_modifier = {
	optimize_memory
	if = {
		limit = { 
			NOR = { 
				has_ship_flag = repeatable_$PARAMATER1$_ship_cooldown 
				has_ship_flag = is_modifiering
			} 
		}

		export_modifier_to_variable = { modifier = $PARAMATER1$ variable = $PARAMATER1$_value }
		subtract_variable = { which = $PARAMATER1$_value value = @modifer_mult_$UNIT$_value }
		add_modifier = { modifier = basic_$PARAMATER1$ multiplier = $PARAMATER1$_value }

		set_variable = { which = $PARAMATER2$_value value = $PARAMATER1$_value }
		multiply_variable = { which = $PARAMATER2$_value value = $RATE$ }
		add_modifier = { modifier = basic_$PARAMATER2$ multiplier = $PARAMATER2$_value }

		clear_variable = $PARAMATER1$_value clear_variable = $PARAMATER2$_value
		set_timed_ship_flag = { flag = repeatable_$PARAMATER1$_ship_cooldown days = 1 }
	} 
	else_if = { 
		limit = { 
			has_ship_flag = is_modifiering
			NOT = { has_ship_flag = repeatable_$PARAMATER1$_ship_cooldown } 
		}

		export_modifier_to_variable = { modifier = $PARAMATER1$ variable = change_$PARAMATER1$_value }
		subtract_variable = { which = change_$PARAMATER1$_value value = @modifer_mult_$UNIT$_value }
		change_variable = { which = debug_change_$PARAMATER1$_value value = change_$PARAMATER1$_value }
		add_modifier = { modifier = change_basic_$PARAMATER1$ multiplier = debug_change_$PARAMATER1$_value }

		set_variable = { which = change_$PARAMATER2$_value value = change_$PARAMATER1$_value }
		multiply_variable = { which = change_$PARAMATER2$_value value = $RATE$ }
		change_variable = { which = debug_change_$PARAMATER2$_value value = change_$PARAMATER2$_value }
		add_modifier = { modifier = change_basic_$PARAMATER2$ multiplier = debug_change_$PARAMATER2$_value }

		clear_variable = change_$PARAMATER1$_value clear_variable = change_$PARAMATER2$_value
		set_timed_ship_flag = { flag = repeatable_$PARAMATER1$_ship_cooldown days = 1 }
	}
}

# tip:script scope available in superlazer waepon it is special weapn script only for superweapon
# parameter1： the repeatable fire rate modifier(input)
# parameter1： the repeatable damage modifier(output)
# UNIT：Value standard
set_standard_battle_superlazer_weapon_keeping_modifier = {
	optimize_memory
	if = {
		limit = { 
			NOR = { 
				has_ship_flag = superlazer_$PARAMATER1$_ship_cooldown 
				has_ship_flag = is_modifiering
			} 
		}

		export_modifier_to_variable = { modifier = $PARAMATER1$ variable = super_lazer_$PARAMATER1$_var }
		add_modifier = { modifier = super_lazer_$PARAMATER1$_modifier multiplier = super_lazer_$PARAMATER1$_var }

		clear_variable = super_lazer_$PARAMATER1$_var
		set_timed_ship_flag = { flag = superlazer_$PARAMATER1$_ship_cooldown days = 1 }
	} 
	else_if = { 
		limit = { 
			has_ship_flag = is_modifiering
			NOT = { has_ship_flag = superlazer_$PARAMATER1$_ship_cooldown } 
		}

		export_modifier_to_variable = { modifier = $PARAMATER1$ variable = debug_super_lazer_$PARAMATER1$_var }
		export_modifier_to_variable = { modifier = $PARAMATER2$ variable = debug_super_lazer_$PARAMATER2$_var }
		change_variable = { which = final_super_lazer_$PARAMATER1$_var value = debug_super_lazer_$PARAMATER1$_var }
		change_variable = { which = final_super_lazer_$PARAMATER1$_var value = debug_super_lazer_$PARAMATER2$_var }
		add_modifier = { modifier = debug_super_lazer_$PARAMATER1$_modifier multiplier = final_super_lazer_$PARAMATER1$_var }

		clear_variable = debug_super_lazer_$PARAMATER1$_var clear_variable = debug_super_lazer_$PARAMATER2$_var
		set_timed_ship_flag = { flag = superlazer_$PARAMATER1$_ship_cooldown days = 1 }
	}
}

clear_superlazer_system_fixed_ship = {
	optimize_memory
	remove_ship_flag = is_modifiering_superlazer 
	remove_ship_flag = is_modifiering_power_superlazer
	remove_modifier = superlazier_super_power_enhance
	clear_variable = super_lazer_ship_fire_rate_mult_var
	remove_modifier = super_lazer_ship_fire_rate_mult_modifier
	clear_variable = debug_super_lazer_ship_fire_rate_mult_var
	clear_variable = debug_super_lazer_weapon_type_kuat_superlazer_scale_weapon_fire_rate_mult_var
	clear_variable = final_super_lazer_ship_fire_rate_mult_var
	remove_modifier = debug_super_lazer_ship_fire_rate_mult_modifier
	remove_ship_flag = fire_ship_var
}

# base modifier script
set_invasion_fleet_basic_modifier = { 
	optimize_memory
	add_modifier = { modifier = $SUB$ multiplier = $FACTOR$ days = $DAYS|-1$ } 
}

# 重置一切
clear_battleship_modifier_fixed_ship = {
	optimize_memory
	every_owned_ship = {
		remove_executor_power = yes
		remove_standard_modifier_system = { TITLE = basic }
		remove_standard_modifier_system = { TITLE = change_basic }
		remove_ship_modifier_trigger_flag = yes
		remove_all_ship_modifier_change_basic_variable = yes
	}
	remove_fleet_modifier_trigger_flag = yes
}

remove_all_ship_modifier_change_basic_variable = {
	optimize_memory
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_hull_regen_add_static }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_armor_regen_add_static }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_shield_regen_add_static }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_shield_regen_add_perc }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_armor_regen_add_perc }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_hull_regen_add_perc }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_disengage_chance_reduction }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_armor_hardening_add }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_shield_hardening_add }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_shield_penetration_mult }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_armor_penetration_mult }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_hull_mult }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_shield_mult }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_armor_mult }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_shield_reduction }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_armor_reduction }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_weapon_range_mult }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_fire_rate_mult }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_weapon_damage }
	remove_ship_modifier_change_basic_variable = { PARAMATER = weapon_type_explosive_weapon_damage_mult }
	remove_ship_modifier_change_basic_variable = { PARAMATER = weapon_type_energy_weapon_damage_mult }
	remove_ship_modifier_change_basic_variable = { PARAMATER = weapon_type_kinetic_weapon_damage_mult }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_tracking_mult }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_tracking_add }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_accuracy_mult }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_accuracy_add }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_shield_add }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_armor_add }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_hull_damage_mult }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_shield_damage_mult }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_armor_damage_mult }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_speed_mult }
	remove_ship_modifier_change_basic_variable = { PARAMATER = component_lifesteal_add }
	remove_ship_modifier_change_basic_variable = { PARAMATER = ship_steal_defeated_ship_chance }
	remove_ship_modifier_change_basic_variable = { PARAMATER = fleet_capture_defeated_leader_chance }

	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = explosive }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = kinetic }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = energy }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = strike_craft }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = arcane }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = cosmic }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = gravity }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = psionic }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = anti_psionic }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = adv_kinetic }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = gravity_dummy }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = ag_ancient_weapon_buff_1 }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = ag_ancient_weapon_buff_2 }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = ag_ancient_weapon_buff_3 }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = instant_kill_effect }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = difficulty_scale }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = difficulty_scale_player }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = SRA_SRA }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = SRA_RE_Core }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = H.D.energy }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = HD.M.kinetic }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = PrimaMateria }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = light_power }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = wsg_pantsu }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = tesla }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = kancolle }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = kancolle_shinkai }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = magicia }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = rulerule }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = fake_madoka }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = sr_uf }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = gungnir }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = xianzhe }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = knife }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = lingli }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = magic }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = nytowith }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = light }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = keto }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = Akso }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = LsScepter }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = son }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = prism }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = Electronic }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = beacon }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = aoe }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = fireworks }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = aon_rpg_attack }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = aon_rpg_magic }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = sfdoll }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = nano }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = KZ_VOY_magic }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = KZ_VOY_wind_magic }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = KZ_VOY_time_magic }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = KZ_VOY_earth_magic }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = KZ_VOY_pyromancy_magic }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = KZ_VOY_lightning_magic }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = KZ_VOY_bright_magic }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = KZ_VOY_dark_magic }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = KZ_VOY_space_magic }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = KZ_VOY_aqua_magic }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = KZ_VOY_life_magic }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = KZ_VOY_temporal }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = ge_void_energy }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = magi }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = charm }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = mystical }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = close_combat }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = critical }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = fgosw_block }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = fgosw_battle_continuation }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = fgosw_only_one }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = fgosw_multi_level }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = fgosw_skill_saber }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = fgosw_skill_archer }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = fgosw_skill_lancer }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = fgosw_skill_rider }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = fgosw_skill_caster }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = fgosw_skill_assassin }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = fgosw_skill_berserker }
	remove_repeatable_ship_modifier_change_basic_vairable = { TYPE = blackash }
}

remove_repeatable_modifier_base_and_change_base = {
	optimize_memory
	remove_repetable_modifier = { TITLE = change_basic TYPE = explosive }
	remove_repetable_modifier = { TITLE = change_basic TYPE = kinetic }
	remove_repetable_modifier = { TITLE = change_basic TYPE = energy }
	remove_repetable_modifier = { TITLE = change_basic TYPE = strike_craft }
	remove_repetable_modifier = { TITLE = change_basic TYPE = gravity }
	remove_repetable_modifier = { TITLE = change_basic TYPE = psionic }
	remove_repetable_modifier = { TITLE = change_basic TYPE = anti_psionic }
	remove_repetable_modifier = { TITLE = change_basic TYPE = adv_kinetic }
	remove_repetable_modifier = { TITLE = change_basic TYPE = gravity_dummy }
	remove_repetable_modifier = { TITLE = change_basic TYPE = ag_ancient_weapon_buff_1 }
	remove_repetable_modifier = { TITLE = change_basic TYPE = ag_ancient_weapon_buff_2 }
	remove_repetable_modifier = { TITLE = change_basic TYPE = ag_ancient_weapon_buff_3 }
	remove_repetable_modifier = { TITLE = change_basic TYPE = instant_kill_effect }
	remove_repetable_modifier = { TITLE = change_basic TYPE = difficulty_scale }
	remove_repetable_modifier = { TITLE = change_basic TYPE = difficulty_scale_player }
	remove_repetable_modifier = { TITLE = change_basic TYPE = SRA_SRA }
	remove_repetable_modifier = { TITLE = change_basic TYPE = SRA_RE_Core }
	remove_repetable_modifier = { TITLE = change_basic TYPE = H.D.energy }
	remove_repetable_modifier = { TITLE = change_basic TYPE = HD.M.kinetic }
	remove_repetable_modifier = { TITLE = change_basic TYPE = PrimaMateria }
	remove_repetable_modifier = { TITLE = change_basic TYPE = magicia }
	remove_repetable_modifier = { TITLE = change_basic TYPE = rulerule }
	remove_repetable_modifier = { TITLE = change_basic TYPE = fake_madoka }
	remove_repetable_modifier = { TITLE = change_basic TYPE = arcane }
	remove_repetable_modifier = { TITLE = change_basic TYPE = cosmic }
	remove_repetable_modifier = { TITLE = change_basic TYPE = light_power }
	remove_repetable_modifier = { TITLE = change_basic TYPE = wsg_pantsu }
	remove_repetable_modifier = { TITLE = change_basic TYPE = tesla }
	remove_repetable_modifier = { TITLE = change_basic TYPE = sr_uf }
	remove_repetable_modifier = { TITLE = change_basic TYPE = gungnir }
	remove_repetable_modifier = { TITLE = change_basic TYPE = xianzhe }
	remove_repetable_modifier = { TITLE = change_basic TYPE = knife }
	remove_repetable_modifier = { TITLE = change_basic TYPE = lingli }
	remove_repetable_modifier = { TITLE = change_basic TYPE = magic }
	remove_repetable_modifier = { TITLE = change_basic TYPE = nytowith }
	remove_repetable_modifier = { TITLE = change_basic TYPE = light }
	remove_repetable_modifier = { TITLE = change_basic TYPE = keto }
	remove_repetable_modifier = { TITLE = change_basic TYPE = Akso }
	remove_repetable_modifier = { TITLE = change_basic TYPE = LsScepter }
	remove_repetable_modifier = { TITLE = change_basic TYPE = son }
	remove_repetable_modifier = { TITLE = change_basic TYPE = prism }
	remove_repetable_modifier = { TITLE = change_basic TYPE = Electronic }
	remove_repetable_modifier = { TITLE = change_basic TYPE = beacon }
	remove_repetable_modifier = { TITLE = change_basic TYPE = aoe }
	remove_repetable_modifier = { TITLE = change_basic TYPE = fireworks }
	remove_repetable_modifier = { TITLE = change_basic TYPE = kancolle }
	remove_repetable_modifier = { TITLE = change_basic TYPE = kancolle_shinkai }
	remove_repetable_modifier = { TITLE = change_basic TYPE = aon_rpg_attack }
	remove_repetable_modifier = { TITLE = change_basic TYPE = aon_rpg_magic }
	remove_repetable_modifier = { TITLE = change_basic TYPE = sfdoll }
	remove_repetable_modifier = { TITLE = change_basic TYPE = nano }
	remove_repetable_modifier = { TITLE = change_basic TYPE = KZ_VOY_magic }
	remove_repetable_modifier = { TITLE = change_basic TYPE = KZ_VOY_wind_magic }
	remove_repetable_modifier = { TITLE = change_basic TYPE = KZ_VOY_time_magic }
	remove_repetable_modifier = { TITLE = change_basic TYPE = KZ_VOY_earth_magic }
	remove_repetable_modifier = { TITLE = change_basic TYPE = KZ_VOY_pyromancy_magic }
	remove_repetable_modifier = { TITLE = change_basic TYPE = KZ_VOY_lightning_magic }
	remove_repetable_modifier = { TITLE = change_basic TYPE = KZ_VOY_bright_magic }
	remove_repetable_modifier = { TITLE = change_basic TYPE = KZ_VOY_dark_magic }
	remove_repetable_modifier = { TITLE = change_basic TYPE = KZ_VOY_space_magic }
	remove_repetable_modifier = { TITLE = change_basic TYPE = KZ_VOY_aqua_magic }
	remove_repetable_modifier = { TITLE = change_basic TYPE = KZ_VOY_life_magic }
	remove_repetable_modifier = { TITLE = change_basic TYPE = KZ_VOY_temporal }
	remove_repetable_modifier = { TITLE = change_basic TYPE = ge_void_energy }
	remove_repetable_modifier = { TITLE = change_basic TYPE = magi }
	remove_repetable_modifier = { TITLE = change_basic TYPE = charm }
	remove_repetable_modifier = { TITLE = change_basic TYPE = mystical }
	remove_repetable_modifier = { TITLE = change_basic TYPE = close_combat }
	remove_repetable_modifier = { TITLE = change_basic TYPE = critical }
	remove_repetable_modifier = { TITLE = change_basic TYPE = fgosw_block }
	remove_repetable_modifier = { TITLE = change_basic TYPE = fgosw_battle_continuation }
	remove_repetable_modifier = { TITLE = change_basic TYPE = fgosw_only_one }
	remove_repetable_modifier = { TITLE = change_basic TYPE = fgosw_multi_level }
	remove_repetable_modifier = { TITLE = change_basic TYPE = fgosw_skill_saber }
	remove_repetable_modifier = { TITLE = change_basic TYPE = fgosw_skill_archer }
	remove_repetable_modifier = { TITLE = change_basic TYPE = fgosw_skill_lancer }
	remove_repetable_modifier = { TITLE = change_basic TYPE = fgosw_skill_rider }
	remove_repetable_modifier = { TITLE = change_basic TYPE = fgosw_skill_caster }
	remove_repetable_modifier = { TITLE = change_basic TYPE = fgosw_skill_assassin }
	remove_repetable_modifier = { TITLE = change_basic TYPE = fgosw_skill_berserker }
	remove_repetable_modifier = { TITLE = change_basic TYPE = blackash }
	
	remove_repetable_modifier = { TITLE = basic TYPE = explosive }
	remove_repetable_modifier = { TITLE = basic TYPE = kinetic }
	remove_repetable_modifier = { TITLE = basic TYPE = energy }
	remove_repetable_modifier = { TITLE = basic TYPE = strike_craft }
	remove_repetable_modifier = { TITLE = basic TYPE = gravity }
	remove_repetable_modifier = { TITLE = basic TYPE = psionic }
	remove_repetable_modifier = { TITLE = basic TYPE = anti_psionic }
	remove_repetable_modifier = { TITLE = basic TYPE = adv_kinetic }
	remove_repetable_modifier = { TITLE = basic TYPE = gravity_dummy }
	remove_repetable_modifier = { TITLE = basic TYPE = ag_ancient_weapon_buff_1 }
	remove_repetable_modifier = { TITLE = basic TYPE = ag_ancient_weapon_buff_2 }
	remove_repetable_modifier = { TITLE = basic TYPE = ag_ancient_weapon_buff_3 }
	remove_repetable_modifier = { TITLE = basic TYPE = instant_kill_effect }
	remove_repetable_modifier = { TITLE = basic TYPE = difficulty_scale }
	remove_repetable_modifier = { TITLE = basic TYPE = difficulty_scale_player }
	remove_repetable_modifier = { TITLE = basic TYPE = SRA_SRA }
	remove_repetable_modifier = { TITLE = basic TYPE = SRA_RE_Core }
	remove_repetable_modifier = { TITLE = basic TYPE = H.D.energy }
	remove_repetable_modifier = { TITLE = basic TYPE = HD.M.kinetic }
	remove_repetable_modifier = { TITLE = basic TYPE = PrimaMateria }
	remove_repetable_modifier = { TITLE = basic TYPE = magicia }
	remove_repetable_modifier = { TITLE = basic TYPE = rulerule }
	remove_repetable_modifier = { TITLE = basic TYPE = fake_madoka }
	remove_repetable_modifier = { TITLE = basic TYPE = arcane }
	remove_repetable_modifier = { TITLE = basic TYPE = cosmic }
	remove_repetable_modifier = { TITLE = basic TYPE = light_power }
	remove_repetable_modifier = { TITLE = basic TYPE = wsg_pantsu }
	remove_repetable_modifier = { TITLE = basic TYPE = tesla }
	remove_repetable_modifier = { TITLE = basic TYPE = sr_uf }
	remove_repetable_modifier = { TITLE = basic TYPE = gungnir }
	remove_repetable_modifier = { TITLE = basic TYPE = xianzhe }
	remove_repetable_modifier = { TITLE = basic TYPE = knife }
	remove_repetable_modifier = { TITLE = basic TYPE = lingli }
	remove_repetable_modifier = { TITLE = basic TYPE = magic }
	remove_repetable_modifier = { TITLE = basic TYPE = nytowith }
	remove_repetable_modifier = { TITLE = basic TYPE = light }
	remove_repetable_modifier = { TITLE = basic TYPE = keto }
	remove_repetable_modifier = { TITLE = basic TYPE = Akso }
	remove_repetable_modifier = { TITLE = basic TYPE = LsScepter }
	remove_repetable_modifier = { TITLE = basic TYPE = son }
	remove_repetable_modifier = { TITLE = basic TYPE = prism }
	remove_repetable_modifier = { TITLE = basic TYPE = Electronic }
	remove_repetable_modifier = { TITLE = basic TYPE = beacon }
	remove_repetable_modifier = { TITLE = basic TYPE = aoe }
	remove_repetable_modifier = { TITLE = basic TYPE = fireworks }
	remove_repetable_modifier = { TITLE = basic TYPE = kancolle }
	remove_repetable_modifier = { TITLE = basic TYPE = kancolle_shinkai }
	remove_repetable_modifier = { TITLE = basic TYPE = aon_rpg_attack }
	remove_repetable_modifier = { TITLE = basic TYPE = aon_rpg_magic }
	remove_repetable_modifier = { TITLE = basic TYPE = sfdoll }
	remove_repetable_modifier = { TITLE = basic TYPE = nano }
	remove_repetable_modifier = { TITLE = basic TYPE = KZ_VOY_magic }
	remove_repetable_modifier = { TITLE = basic TYPE = KZ_VOY_wind_magic }
	remove_repetable_modifier = { TITLE = basic TYPE = KZ_VOY_time_magic }
	remove_repetable_modifier = { TITLE = basic TYPE = KZ_VOY_earth_magic }
	remove_repetable_modifier = { TITLE = basic TYPE = KZ_VOY_pyromancy_magic }
	remove_repetable_modifier = { TITLE = basic TYPE = KZ_VOY_lightning_magic }
	remove_repetable_modifier = { TITLE = basic TYPE = KZ_VOY_bright_magic }
	remove_repetable_modifier = { TITLE = basic TYPE = KZ_VOY_dark_magic }
	remove_repetable_modifier = { TITLE = basic TYPE = KZ_VOY_space_magic }
	remove_repetable_modifier = { TITLE = basic TYPE = KZ_VOY_aqua_magic }
	remove_repetable_modifier = { TITLE = basic TYPE = KZ_VOY_life_magic }
	remove_repetable_modifier = { TITLE = basic TYPE = KZ_VOY_temporal }
	remove_repetable_modifier = { TITLE = basic TYPE = ge_void_energy }
	remove_repetable_modifier = { TITLE = basic TYPE = magi }
	remove_repetable_modifier = { TITLE = basic TYPE = charm }
	remove_repetable_modifier = { TITLE = basic TYPE = mystical }
	remove_repetable_modifier = { TITLE = basic TYPE = close_combat }
	remove_repetable_modifier = { TITLE = basic TYPE = critical }
	remove_repetable_modifier = { TITLE = basic TYPE = fgosw_block }
	remove_repetable_modifier = { TITLE = basic TYPE = fgosw_battle_continuation }
	remove_repetable_modifier = { TITLE = basic TYPE = fgosw_only_one }
	remove_repetable_modifier = { TITLE = basic TYPE = fgosw_multi_level }
	remove_repetable_modifier = { TITLE = basic TYPE = fgosw_skill_saber }
	remove_repetable_modifier = { TITLE = basic TYPE = fgosw_skill_archer }
	remove_repetable_modifier = { TITLE = basic TYPE = fgosw_skill_lancer }
	remove_repetable_modifier = { TITLE = basic TYPE = fgosw_skill_rider }
	remove_repetable_modifier = { TITLE = basic TYPE = fgosw_skill_caster }
	remove_repetable_modifier = { TITLE = basic TYPE = fgosw_skill_assassin }
	remove_repetable_modifier = { TITLE = basic TYPE = fgosw_skill_berserker }
	remove_repetable_modifier = { TITLE = basic TYPE = blackash }
}

remove_repetable_modifier_iep = {
	remove_repetable_modifier = { TITLE = iep_basic TYPE = explosive }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = kinetic }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = energy }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = strike_craft }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = gravity }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = psionic }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = anti_psionic }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = adv_kinetic }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = gravity_dummy }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = ag_ancient_weapon_buff_1 }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = ag_ancient_weapon_buff_2 }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = ag_ancient_weapon_buff_3 }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = instant_kill_effect }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = difficulty_scale }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = difficulty_scale_player }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = SRA_SRA }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = SRA_RE_Core }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = H.D.energy }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = HD.M.kinetic }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = PrimaMateria }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = magicia }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = rulerule }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = fake_madoka }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = arcane }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = cosmic }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = light_power }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = wsg_pantsu }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = tesla }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = sr_uf }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = gungnir }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = xianzhe }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = knife }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = lingli }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = magic }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = nytowith }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = light }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = keto }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = Akso }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = LsScepter }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = son }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = prism }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = Electronic }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = beacon }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = aoe }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = fireworks }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = kancolle }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = kancolle_shinkai }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = aon_rpg_attack }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = aon_rpg_magic }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = sfdoll }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = nano }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = KZ_VOY_magic }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = KZ_VOY_wind_magic }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = KZ_VOY_time_magic }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = KZ_VOY_earth_magic }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = KZ_VOY_pyromancy_magic }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = KZ_VOY_lightning_magic }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = KZ_VOY_bright_magic }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = KZ_VOY_dark_magic }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = KZ_VOY_space_magic }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = KZ_VOY_aqua_magic }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = KZ_VOY_life_magic }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = KZ_VOY_temporal }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = ge_void_energy }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = magi }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = charm }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = mystical }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = close_combat }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = critical }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = fgosw_block }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = fgosw_battle_continuation }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = fgosw_only_one }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = fgosw_multi_level }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = fgosw_skill_saber }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = fgosw_skill_archer }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = fgosw_skill_lancer }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = fgosw_skill_rider }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = fgosw_skill_caster }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = fgosw_skill_assassin }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = fgosw_skill_berserker }
	remove_repetable_modifier = { TITLE = iep_basic TYPE = blackash }
}

remove_ship_modifier_trigger_flag = {
	optimize_memory
	remove_ship_flag = is_modifiering
	remove_ship_flag = fire_ship_var
	remove_ship_flag = kuat_runing_kuat_support_trigger_eternal_return
}
remove_fleet_modifier_trigger_flag = {
	optimize_memory
	fleet = {
		kuat_star_flagship_base_fleet_clear_calculation = { ID = 1 SCOPE = solar_system }
		kuat_star_flagship_base_fleet_clear_calculation = { ID = 1.5 SCOPE = solar_system }
		kuat_star_flagship_base_fleet_clear_calculation = { ID = 3 SCOPE = solar_system }
		remove_fleet_flag = kuat_star_flagship_nonsupport_battle_times_sutrat_placeholder
		remove_fleet_flag = kuat_super_flagship_lack_support
		remove_fleet_flag = eternal_learned_leader 
		remove_fleet_flag = has_kuat_flagship_system
		remove_fleet_flag = has_kuat_subflagship_system
		remove_fleet_flag = has_kuat_disable_checkpoint
		remove_fleet_flag = has_kuat_flagship_system_addon_repeatable
		clear_variable = infinite_faction_battle_duplicate_ship
		remove_fleet_flag = fire_fleet_var
		remove_fleet_flag = is_modifiering_fleet
	}
}

remove_ship_modifier_change_basic_variable = {
	optimize_memory
	clear_variable = debug_change_$PARAMATER$_value
}

remove_repeatable_ship_modifier_change_basic_vairable = {
	optimize_memory
	clear_variable = debug_change_weapon_type_$TYPE$_weapon_fire_rate_mult_value
	clear_variable = debug_change_weapon_type_$TYPE$_weapon_damage_mul_value
}

kuat_reduce_hp_percent = {
	optimize_memory
	export_trigger_value_to_variable = { trigger = has_hp variable = exist_hp_value }
	multiply_variable = { which = exist_hp_value value = 0.01 }
	multiply_variable = { which = exist_hp_value value = $value$ }
	damage_ship = exist_hp_value clear_variable = exist_hp_value
}

kuat_set_epsilon_obelisk_code = {
	optimize_memory
	random_list = {
		10 = { set_planet_flag = kuat_epsilon_obelisk_$kuat_obelisk_seq$_$kuat_position$_0 event_target:global_event_country = { set_variable = { which = kuat_epsilon_obelisk_$kuat_obelisk_seq$_$kuat_position$ value = 0 } } }
		10 = { set_planet_flag = kuat_epsilon_obelisk_$kuat_obelisk_seq$_$kuat_position$_1 event_target:global_event_country = { set_variable = { which = kuat_epsilon_obelisk_$kuat_obelisk_seq$_$kuat_position$ value = 1 } } }
		10 = { set_planet_flag = kuat_epsilon_obelisk_$kuat_obelisk_seq$_$kuat_position$_2 event_target:global_event_country = { set_variable = { which = kuat_epsilon_obelisk_$kuat_obelisk_seq$_$kuat_position$ value = 2 } } }
		10 = { set_planet_flag = kuat_epsilon_obelisk_$kuat_obelisk_seq$_$kuat_position$_3 event_target:global_event_country = { set_variable = { which = kuat_epsilon_obelisk_$kuat_obelisk_seq$_$kuat_position$ value = 3 } } }
		10 = { set_planet_flag = kuat_epsilon_obelisk_$kuat_obelisk_seq$_$kuat_position$_4 event_target:global_event_country = { set_variable = { which = kuat_epsilon_obelisk_$kuat_obelisk_seq$_$kuat_position$ value = 4 } } }
		10 = { set_planet_flag = kuat_epsilon_obelisk_$kuat_obelisk_seq$_$kuat_position$_5 event_target:global_event_country = { set_variable = { which = kuat_epsilon_obelisk_$kuat_obelisk_seq$_$kuat_position$ value = 5 } } }
		10 = { set_planet_flag = kuat_epsilon_obelisk_$kuat_obelisk_seq$_$kuat_position$_6 event_target:global_event_country = { set_variable = { which = kuat_epsilon_obelisk_$kuat_obelisk_seq$_$kuat_position$ value = 6 } } }
		10 = { set_planet_flag = kuat_epsilon_obelisk_$kuat_obelisk_seq$_$kuat_position$_7 event_target:global_event_country = { set_variable = { which = kuat_epsilon_obelisk_$kuat_obelisk_seq$_$kuat_position$ value = 7 } } }
		10 = { set_planet_flag = kuat_epsilon_obelisk_$kuat_obelisk_seq$_$kuat_position$_8 event_target:global_event_country = { set_variable = { which = kuat_epsilon_obelisk_$kuat_obelisk_seq$_$kuat_position$ value = 8 } } }
		10 = { set_planet_flag = kuat_epsilon_obelisk_$kuat_obelisk_seq$_$kuat_position$_9 event_target:global_event_country = { set_variable = { which = kuat_epsilon_obelisk_$kuat_obelisk_seq$_$kuat_position$ value = 9 } } }
	}
}

kuat_invinciable_battle_random_effect = {
	optimize_memory
	random_list = {
		100 = {
			modifier = {
				divide = event_target:global_event_country.eternal_fleet_return_index
				event_target:global_event_country = { check_variable = { which = eternal_fleet_return_index value > 0 } }
			}
			modifier = { factor = 100 has_ship_flag = kuat_clear_ship_modifier_target }
			modifier = { divide = 100 has_global_flag = kuat_impulse_mod_settings }
			no_events = yes
		}
		#150 total 50 useful 100 noneless
		10 = {
			modifier = {
				factor = 0
				OR = {
					has_ship_flag = kuat_clear_ship_modifier_target
					owner = { is_invisable_faction = yes }
					has_global_flag = kuat_impulse_mod_settings
				}
			}
			kuat_reduce_hp_percent = { value = 1 }
			set_timed_ship_flag = { flag = kuat_clear_ship_modifier_target days = 1 }
		}
		10 = {
			modifier = {
				factor = 0
				OR = {
					has_ship_flag = kuat_clear_ship_modifier_target
					owner = { is_invisable_faction = yes }
					has_global_flag = kuat_impulse_mod_settings
				}
			}
			kuat_reduce_hp_percent = { value = 2 }
			set_timed_ship_flag = { flag = kuat_clear_ship_modifier_target days = 2 }
		}
		5 = {
			modifier = {
				factor = 0
				OR = {
					has_ship_flag = kuat_clear_ship_modifier_target
					owner = { is_invisable_faction = yes }
					has_global_flag = kuat_impulse_mod_settings
				}
			}
			kuat_reduce_hp_percent = { value = 5 }
			set_timed_ship_flag = { flag = kuat_clear_ship_modifier_target days = 5 }
		}
		5 = {
			modifier = {
				factor = 0
				OR = {
					has_ship_flag = kuat_clear_ship_modifier_target
					owner = { is_invisable_faction = yes }
					has_global_flag = kuat_impulse_mod_settings
				}
			}
			kuat_reduce_hp_percent = { value = 7 }
			set_timed_ship_flag = { flag = kuat_clear_ship_modifier_target days = 6 }
		}
		5 = {
			modifier = {
				factor = 0
				OR = {
					has_ship_flag = kuat_clear_ship_modifier_target
					owner = { is_invisable_faction = yes }
					has_global_flag = kuat_impulse_mod_settings
				}
			}
			kuat_reduce_hp_percent = { value = 10 }
			set_timed_ship_flag = { flag = kuat_clear_ship_modifier_target days = 7 }
		}
		#POWERRRRR
		8 = {
			modifier = {
				factor = 0
				OR = {
					has_ship_flag = kuat_clear_ship_modifier_target
					owner = { is_invisable_faction = yes }
					NOT = { has_global_flag = kuat_impulse_mod_settings }
				}
			}
			kuat_reduce_hp_percent = { value = 20 }
			set_timed_ship_flag = { flag = kuat_clear_ship_modifier_target days = 5 }
		}
		5 = {
			modifier = {
				factor = 0
				OR = {
					has_ship_flag = kuat_clear_ship_modifier_target
					owner = { is_invisable_faction = yes }
					NOT = { has_global_flag = kuat_impulse_mod_settings }
				}
			}
			kuat_reduce_hp_percent = { value = 30 }
			set_timed_ship_flag = { flag = kuat_clear_ship_modifier_target days = 6 }
		}
		2 = {
			modifier = {
				factor = 0
				OR = {
					has_ship_flag = kuat_clear_ship_modifier_target
					owner = { is_invisable_faction = yes }
					NOT = { has_global_flag = kuat_impulse_mod_settings }
				}
			}
			kuat_reduce_hp_percent = { value = 40 }
			set_timed_ship_flag = { flag = kuat_clear_ship_modifier_target days = 7 }
		}
	}
	reroll_random = yes
}

kuat_upgrade_epsilon_obelisk = {
	optimize_memory
	if = {
		limit = { exists = owner }
		owner = { save_event_target_as = kuat_target_megastructure_owner }
		switch = {
			trigger = has_megastructure_flag
			kuat_epsilon_obelisk_1 = { solar_system = {
				spawn_megastructure = {
					type = kuat_epsilon_obelisk_$kuat_target_level$
					coords_from = prev
					owner = event_target:kuat_target_megastructure_owner
					init_effect = { set_megastructure_flag = kuat_epsilon_obelisk_1 }
				}
			} }
			kuat_epsilon_obelisk_2 = { solar_system = {
				spawn_megastructure = {
					type = kuat_epsilon_obelisk_$kuat_target_level$
					coords_from = prev
					owner = event_target:kuat_target_megastructure_owner
					init_effect = { set_megastructure_flag = kuat_epsilon_obelisk_2 }
				}
			} }
			kuat_epsilon_obelisk_3 = { solar_system = {
				spawn_megastructure = {
					type = kuat_epsilon_obelisk_$kuat_target_level$
					coords_from = prev
					owner = event_target:kuat_target_megastructure_owner
					init_effect = { set_megastructure_flag = kuat_epsilon_obelisk_3 }
				}
			} }
		}
	}
	else = {
		switch = {
			trigger = has_megastructure_flag
			kuat_epsilon_obelisk_1 = { solar_system = {
				spawn_megastructure = {
					type = kuat_epsilon_obelisk_$kuat_target_level$
					coords_from = prev
					init_effect = { set_megastructure_flag = kuat_epsilon_obelisk_1 }
				}
			} }
			kuat_epsilon_obelisk_2 = { solar_system = {
				spawn_megastructure = {
					type = kuat_epsilon_obelisk_$kuat_target_level$
					coords_from = prev
					init_effect = { set_megastructure_flag = kuat_epsilon_obelisk_2 }
				}
			} }
			kuat_epsilon_obelisk_3 = { solar_system = {
				spawn_megastructure = {
					type = kuat_epsilon_obelisk_$kuat_target_level$
					coords_from = prev
					init_effect = { set_megastructure_flag = kuat_epsilon_obelisk_3 }
				}
			} }
		}
	}
	remove_megastructure = this
}

#fromfromfrom: enemy fleet
#fromfrom: eternal fleet
kuat_copy_leader_learning_system = {
	optimize_memory
	if = {
		limit = { 
			fromfromfrom = { 
				exists = leader
				leader = { 
					leader_class = commander 
					NOR = { 
						has_leader_flag = eternal_learned_leader 
						has_leader_flag = SOP_eddy
					} 
				}
				NOT = { has_fleet_flag = eternal_learned_leader } 
			} 
			from = { is_ai = no }
		}
		fromfromfrom = {
			set_fleet_flag = eternal_learned_leader
			leader = { 
				set_timed_leader_flag = { flag = eternal_learned_leader days = 180 } 
				save_event_target_as = eternal_learned_leader
			}
			root = {
				clone_leader = { 
					class = commander target = event_target:eternal_learned_leader
					effect = { 
						save_event_target_as = eternal_learned_leader_copy 
						copy_flags_and_variables_from = event_target:eternal_learned_leader
					} 
				}
				fromfrom = {
					if = {
						limit = { NOT = { has_fleet_flag = have_learned_leader } }
						if = {
							limit = { exists = leader }
							leader = { kill_leader = { show_notification = no } }
						}
						assign_leader = event_target:eternal_learned_leader_copy
						set_timed_fleet_flag = { flag = have_learned_leader days = 180 }
					}
					else = { owner = { 
						random_owned_fleet = {
							limit = { NOT = { has_fleet_flag = have_learned_leader } }
							if = {
								limit = { exists = leader }
								leader = { kill_leader = { show_notification = no } }
							}
							assign_leader = event_target:eternal_learned_leader_copy
							set_timed_fleet_flag = { flag = have_learned_leader days = 180 }
						}
					} }
				}
				from = { country_event = { id = exe_invasion.141 } }
			}
		}
	}
}

#scope: fleet
mult_half_variable = {
	optimize_memory
	export_trigger_value_to_variable = { trigger = count_owned_ship variable = $WHICH$ } #总
	set_variable = { which = $WHICH$_half value = $WHICH$ } #检查总
	multiply_variable = { which = $WHICH$_half value = $VALUE$ }
	round_variable = $WHICH$_half
}

#补给系统
kuat_star_flagship_checksum = {
	optimize_memory
	if = {
		limit = { count_fleet_in_system = {
			count < kuat_super_flagship_$ID$_enough_support_var
			limit = { has_fleet_flag = kuat_super_flagship_$ID$_enough_support_@prev }
		} }
		export_trigger_value_to_variable = {
			trigger = count_fleet_in_system
			parameters = { limit = { has_fleet_flag = kuat_super_flagship_$ID$_enough_support_@prev } }
			variable = kuat_super_flagship_$ID$_enough_support_var_pending
		}
		subtract_variable = {
			which = kuat_super_flagship_$ID$_enough_support_var
			value = kuat_super_flagship_$ID$_enough_support_var_pending
		}
		multiply_variable = {
			which = kuat_super_flagship_$ID$_enough_support_var
			value = $ID$
		}
		change_variable = { which = kuat_support_battle_add_variable value = kuat_super_flagship_$ID$_enough_support_var }
		clear_variable = kuat_super_flagship_$ID$_enough_support_var_pending
		clear_variable = kuat_super_flagship_$ID$_enough_support_var

		every_fleet_in_system = {
			limit = { 
				is_in_combat = yes 
				owner = { is_invisable_faction = no is_ai = no }
				has_enable_flag_ship_system_true = yes 
			}
			kuat_star_flagship_caculation = yes
		}
	}
}

kuat_star_flagship_base_calculate = {
	optimize_memory
	solar_system = { 
		subtract_variable = { which = kuat_support_battle_add_variable value = $ID$ }
		prev = {  
			every_owned_ship = {
				limit = { 
					kuat_is_kuat_ship = yes
					NOT = { has_ship_flag = kuat_runing_kuat_support_trigger_eternal_return } 
				}
				set_ship_flag = kuat_runing_kuat_support_trigger_eternal_return
				clear_ship_repeatable_modifier = { multiply = -$ID$ DAYS = -1 }
			}
			remove_fleet_flag = kuat_super_flagship_lack_support
			set_fleet_flag = kuat_super_flagship_$ID$_enough_support_@prev
			set_fleet_flag = kuat_super_flagship_$ID$_enough_support
		}
		change_variable = { which = kuat_super_flagship_$ID$_enough_support_var value = 1 }
		if = {
			limit = { NOT = { has_star_flag = kuat_super_flagship_$ID$_enough_support } }
			set_star_flag = kuat_super_flagship_$ID$_enough_support
		}
	}
}

kuat_star_flagship_clear_all_caculation = {
	clear_variable = kuat_support_battle_add_variable 
	every_fleet_in_system = {
		kuat_star_flagship_base_fleet_clear_calculation = { ID = 1 }
		kuat_star_flagship_base_fleet_clear_calculation = { ID = 1.5 }
		kuat_star_flagship_base_fleet_clear_calculation = { ID = 3 }
	}
	kuat_star_flagship_base_system_clear_calculation = { ID = 1 }
	kuat_star_flagship_base_system_clear_calculation = { ID = 1.5 }
	kuat_star_flagship_base_system_clear_calculation = { ID = 3 }
}

kuat_star_flagship_base_system_clear_calculation = {
	optimize_memory
	remove_star_flag = kuat_super_flagship_$ID$_enough_support
	clear_variable = kuat_super_flagship_$ID$_enough_support_var
}

kuat_star_flagship_base_fleet_clear_calculation = {
	optimize_memory
	remove_fleet_flag = kuat_super_flagship_$ID$_enough_support
	remove_fleet_flag = kuat_super_flagship_$ID$_enough_support_@$SCOPE|prev$
}

kuat_star_flagship_caculation = {
	optimize_memory
	if = { 
		limit = { 
			kuat_fleet_cap_occupy = { ID = 3 } 
			solar_system = { check_variable = { which = kuat_support_battle_add_variable value >= 3 } }
		} 
		kuat_star_flagship_base_calculate = { ID = 3 }
	}
	else_if = { 
		limit = { 
			kuat_fleet_cap_occupy = { ID = 1.5 } 
			solar_system = { check_variable = { which = kuat_support_battle_add_variable value >= 1.5 } }
		}  
		kuat_star_flagship_base_calculate = { ID = 1.5 }
	}
	else_if = { 
		limit = { 
			kuat_fleet_cap_occupy = { ID = 1 } 
			solar_system = { check_variable = { which = kuat_support_battle_add_variable value >= 1 } }
		} 
		kuat_star_flagship_base_calculate = { ID = 1 }
	}
	else_if = {
		limit = { kuat_fleet_cap_flag_condition = yes }
		solar_system = { prev = { 
			remove_repetable_modifier_iep = yes
			kuat_star_flagship_base_fleet_clear_calculation = { ID = 1 }
			kuat_star_flagship_base_fleet_clear_calculation = { ID = 1.5 }
			kuat_star_flagship_base_fleet_clear_calculation = { ID = 3 }
			set_fleet_flag = kuat_super_flagship_lack_support 
		} }
	}
}
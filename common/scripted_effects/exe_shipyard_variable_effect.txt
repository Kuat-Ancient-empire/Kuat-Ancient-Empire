##GET KUAT SHIPYARD ALLOYS
kuat_shipyard_add_resource = {
	add_resource = { alloys = $first_alloys$ }
}

#cost
get_running_variable_alloys_bought = {
	kuat_shipyard_add_resource = { first_alloys = @\[ $first_alloys$ * $basic$ * -1 ] }
}

get_ship_alloys_bounght = {
	if = {
		limit = { has_country_flag = building_the_Venguard }
		get_running_variable_alloys_bought = { first_alloys = 300000 basic = $basic$ }
	}
	else_if = {
		limit = { has_country_flag = building_the_eclipse }
		get_running_variable_alloys_bought = { first_alloys = 300000 basic = $basic$ }
	}
	else_if = {
		limit = { has_country_flag = building_the_donimance }
		get_running_variable_alloys_bought = { first_alloys = 150000 basic = $basic$ }
	}
	else_if = {
		limit = { has_country_flag = building_the_empire }
		if = {
			limit = { has_country_flag = fire_five_impirial }
			get_running_variable_alloys_bought = { first_alloys = 300000 basic = $basic$ }
		} 
		else = { get_running_variable_alloys_bought = { first_alloys = 50000 basic = $basic$ } }
	}
	else_if = {
		limit = { has_country_flag = building_the_horriwer }
		if = {
			limit = { has_country_flag = fire_five_impirial }
			get_running_variable_alloys_bought = { first_alloys = 120000 basic = $basic$ }
		} 
		else = { get_running_variable_alloys_bought = { first_alloys = 20000 basic = $basic$ } }
	}
	else_if = {
		limit = { has_country_flag = building_the_raider }
		if = {
			limit = { has_country_flag = fire_five_impirial }
			get_running_variable_alloys_bought = { first_alloys = 30000 basic = $basic$ }
		} 
		else = { get_running_variable_alloys_bought = { first_alloys = 5000 basic = $basic$ } }
	}
}

get_variable_alloys_bought = {
	if = {
		limit = { event_target:fallen_empire_kuat = { opinion = { who = root value > 999 } } }
		get_ship_alloys_bounght = { basic = 0.75 }
	} 
	else_if = {
		limit = { event_target:fallen_empire_kuat = { opinion = { who = root value > 899 } } }
		get_ship_alloys_bounght = { basic = 0.8 }
	}
	else_if = {
		limit = { event_target:fallen_empire_kuat = { opinion = { who = root value > 699 } } }
		get_ship_alloys_bounght = { basic = 0.85 }
	}
	else_if = {
		limit = { event_target:fallen_empire_kuat = { opinion = { who = root value > 499 } } }
		get_ship_alloys_bounght = { basic = 0.9 }
	}
	else_if = {
		limit = { event_target:fallen_empire_kuat = { opinion = { who = root value > 299 } } }
		get_ship_alloys_bounght = { basic = 0.95 }
	}
	else_if = {
		limit = { OR = {
			event_target:fallen_empire_kuat = { opinion = { who = root value > 99 } }
			root = { has_ascension_perk = ap_shenhai_silent }
		} }
		get_ship_alloys_bounght = { basic = 1 }
	}
}

#increase
get_running_variable_alloys = {
	kuat_shipyard_add_resource = { first_alloys = @\[ $first_alloys$ * $basic$ ] }
}

get_ship_alloys = {
	if = {
		limit = { has_country_flag = building_the_Venguard }
		get_running_variable_alloys = { first_alloys = 300000 basic = $basic$ }
	}
	else_if = {
		limit = { has_country_flag = building_the_eclipse }
		get_running_variable_alloys = { first_alloys = 300000 basic = $basic$ }
	}
	else_if = {
		limit = { has_country_flag = building_the_donimance }
		get_running_variable_alloys = { first_alloys = 150000 basic = $basic$ }
	}
	else_if = {
		limit = { has_country_flag = building_the_empire }
		if = {
			limit = { has_country_flag = fire_five_impirial }
			get_running_variable_alloys = { first_alloys = 300000 basic = $basic$ }
		} 
		else = { get_running_variable_alloys = { first_alloys = 50000 basic = $basic$ } }
	}
	else_if = {
		limit = { has_country_flag = building_the_horriwer }
		if = {
			limit = { has_country_flag = fire_five_impirial }
			get_running_variable_alloys = { first_alloys = 120000 basic = $basic$ }
		}
		else = { get_running_variable_alloys = { first_alloys = 20000 basic = $basic$ } }
	}
	else_if = {
		limit = { has_country_flag = building_the_raider }
		if = {
			limit = { has_country_flag = fire_five_impirial }
			get_running_variable_alloys = { first_alloys = 30000 basic = $basic$ }
		} 
		else = { get_running_variable_alloys = { first_alloys = 5000 basic = $basic$ } }
	}
}

get_variable_alloys = {
	if = {
		limit = { event_target:fallen_empire_kuat = { opinion = { who = root value > 999 } } }
		get_ship_alloys = { basic = 0.75 }
	} 
	else_if = {
		limit = { event_target:fallen_empire_kuat = { opinion = { who = root value > 899 } } }
		get_ship_alloys = { basic = 0.8 }
	}
	else_if = {
		limit = { event_target:fallen_empire_kuat = { opinion = { who = root value > 699 } } }
		get_ship_alloys = { basic = 0.85 }
	}
	else_if = {
		limit = { event_target:fallen_empire_kuat = { opinion = { who = root value > 499 } } }
		get_ship_alloys = { basic = 0.9 }
	}
	else_if = {
		limit = { event_target:fallen_empire_kuat = { opinion = { who = root value > 299 } } }
		get_ship_alloys = { basic = 0.95 }
	}
	else_if = {
		limit = { OR = {
			event_target:fallen_empire_kuat = { opinion = { who = root value > 99 } }
			root = { has_ascension_perk = ap_shenhai_silent }
		} }
		get_ship_alloys = { basic = 1 }
	}
}

#variable for tips
get_screen_alloys_need = {
	set_variable = { which = ship_alloys value = $second_alloys$ }
	round_variable = ship_alloys
}

get_screen_second_alloys_need = {
	set_variable = { which = five_ship_alloys value = $third_alloys$ }
	round_variable = five_ship_alloys
}

get_running_variable_screen_alloys = {
	get_screen_alloys_need = { second_alloys = @\[ $second_alloys$ * $basic$ ] }
}

get_running_second_variable_screen_alloys = {
	get_screen_second_alloys_need = { third_alloys = @\[ $third_alloys$ * $basic$ ] }
}

get_ship_screen_alloys = {
	if = {
		limit = { has_country_flag = building_the_eclipse }
		get_running_variable_screen_alloys = { second_alloys = 300000 basic = $basic$ }
	}
	else_if = {
		limit = { has_country_flag = building_the_Venguard }
		get_running_variable_screen_alloys = { second_alloys = 300000 basic = $basic$ }
	}
	else_if = {
		limit = { has_country_flag = building_the_donimance }
		get_running_variable_screen_alloys = { second_alloys = 150000 basic = $basic$ }
	}
	else_if = {
		limit = { has_country_flag = building_the_empire }
		get_running_second_variable_screen_alloys = { third_alloys = 300000 basic = $basic$ }
		get_running_variable_screen_alloys = { second_alloys = 50000 basic = $basic$ }
	}
	else_if = {
		limit = { has_country_flag = building_the_horriwer }
		get_running_second_variable_screen_alloys = { third_alloys = 120000 basic = $basic$ }
		get_running_variable_screen_alloys = { second_alloys = 20000 basic = $basic$ }
	}
	else_if = {
		limit = { has_country_flag = building_the_raider }
		get_running_second_variable_screen_alloys = { third_alloys = 30000 basic = $basic$ }
		get_running_variable_screen_alloys = { second_alloys = 5000 basic = $basic$ }
	}
}

get_variable_screen_alloys = {
	if = {
		limit = { event_target:fallen_empire_kuat = { opinion = { who = root value > 999 } } }
		get_ship_screen_alloys = { basic = 0.75 }
	} 
	else_if = {
		limit = { event_target:fallen_empire_kuat = { opinion = { who = root value > 899 } } }
		get_ship_screen_alloys = { basic = 0.8 }
	}
	else_if = {
		limit = { event_target:fallen_empire_kuat = { opinion = { who = root value > 699 } } }
		get_ship_screen_alloys = { basic = 0.85 }
	}
	else_if = {
		limit = { event_target:fallen_empire_kuat = { opinion = { who = root value > 499 } } }
		get_ship_screen_alloys = { basic = 0.9 }
	}
	else_if = {
		limit = { event_target:fallen_empire_kuat = { opinion = { who = root value > 299 } } }
		get_ship_screen_alloys = { basic = 0.95 }
	}
	else_if = {
		limit = { OR = {
			event_target:fallen_empire_kuat = { opinion = { who = root value > 99 } }
			root = { has_ascension_perk = ap_shenhai_silent }
		} }
		get_ship_screen_alloys = { basic = 1 }
	}
}

initial_kuat_shipyard = { hidden_effect = {
	if = {
		limit = { 
			has_global_flag = install_kuat_mod 
			NOR = { has_origin = origin_kuat_apocalyptic has_origin = origin_eternalthrone }
		}
		country_event = { id = kuat_shipyard.1 }
	}
	else_if = {
		limit = { 
			has_global_flag = install_kuat_mod 
			has_origin = origin_kuat_apocalyptic
		}
		country_event = { id = kuat_origin.9 }
	}
} }
##check allow
##GET KUAT SHIPYARD ALLOYS
kuat_shipyard_check_allow_resource = {
	resource_stockpile_compare = {
		resource = alloys
		value >= $first_alloys$
	}
}

#cost
get_running_variable_check_allow_alloys = {
	kuat_shipyard_check_allow_resource = { first_alloys = @\[ $first_alloys$ * $basic$ ] }
}

get_variable_alloys_check_allow = {
	if = {
		limit = { event_target:fallen_empire_kuat = { opinion = { who = root value > 999 } } }
		if = {
			limit = { OR = { has_country_flag = building_the_eclipse has_country_flag = building_the_knigjt_hammer_executor } }
			get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|300000$ basic = 0.2 }
		}
		else_if = {
			limit = { has_country_flag = building_the_donimance }
			get_running_variable_check_allow_alloys = { first_alloys =  $variable_alloys|100000$ basic = 0.2 }
		}
		else_if = {
			limit = { has_country_flag = building_the_balletor }
			get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|30000$ basic = 0.2 }
		}
		else_if = {
			limit = { has_country_flag = building_the_empire }
			if = {
				limit = { has_country_flag = fire_five_impirial }
				get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|50000$ basic = 0.2 }
			} else = { get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|10000$ basic = 0.2 } }
		}
		else_if = {
			limit = { has_country_flag = building_the_horriwer }
			if = {
				limit = { has_country_flag = fire_five_impirial }
				get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|40000$ basic = 0.2 }
			} else = { get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|8000$ basic = 0.2 } }
		}
	} 
	else_if = {
		limit = { event_target:fallen_empire_kuat = { opinion = { who = root value > 899 } } }
		if = {
			limit = { OR = { has_country_flag = building_the_eclipse has_country_flag = building_the_knigjt_hammer_executor } }
			get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|300000$ basic = 0.4 }
		}
		else_if = {
			limit = { has_country_flag = building_the_donimance }
			get_running_variable_check_allow_alloys = { first_alloys =  $variable_alloys|100000$ basic = 0.4 }
		}
		else_if = {
			limit = { has_country_flag = building_the_balletor }
			get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|30000$ basic = 0.4 }
		}
		else_if = {
			limit = { has_country_flag = building_the_empire }
			if = {
				limit = { has_country_flag = fire_five_impirial }
				get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|50000$ basic = 0.4 }
			} else = { get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|10000$ basic = 0.4 } }
		}
		else_if = {
			limit = { has_country_flag = building_the_horriwer }
			if = {
				limit = { has_country_flag = fire_five_impirial }
				get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|40000$ basic = 0.4 }
			} else = { get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|8000$ basic = 0.4 } }
		}
	}
	else_if = {
		limit = { event_target:fallen_empire_kuat = { opinion = { who = root value > 699 } } }
		if = {
			limit = { OR = { has_country_flag = building_the_eclipse has_country_flag = building_the_knigjt_hammer_executor } }
			get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|300000$ basic = 0.6 }
		}
		else_if = {
			limit = { has_country_flag = building_the_donimance }
			get_running_variable_check_allow_alloys = { first_alloys =  $variable_alloys|100000$ basic = 0.6 }
		}
		else_if = {
			limit = { has_country_flag = building_the_balletor }
			get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|30000$ basic = 0.6 }
		}
		else_if = {
			limit = { has_country_flag = building_the_empire }
			if = {
				limit = { has_country_flag = fire_five_impirial }
				get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|50000$ basic = 0.6 }
			} else = { get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|10000$ basic = 0.6 } }
		}
		else_if = {
			limit = { has_country_flag = building_the_horriwer }
			if = {
				limit = { has_country_flag = fire_five_impirial }
				get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|40000$ basic = 0.6 }
			} else = { get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|8000$ basic = 0.6 } }
		}
	}
	else_if = {
		limit = { event_target:fallen_empire_kuat = { opinion = { who = root value > 499 } } }
		if = {
			limit = { OR = { has_country_flag = building_the_eclipse has_country_flag = building_the_knigjt_hammer_executor } }
			get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|300000$ basic = 0.8 }
		}
		else_if = {
			limit = { has_country_flag = building_the_donimance }
			get_running_variable_check_allow_alloys = { first_alloys =  $variable_alloys|100000$ basic = 0.8 }
		}
		else_if = {
			limit = { has_country_flag = building_the_balletor }
			get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|30000$ basic = 0.8 }
		}
		else_if = {
			limit = { has_country_flag = building_the_empire }
			if = {
				limit = { has_country_flag = fire_five_impirial }
				get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|50000$ basic = 0.8 }
			} else = { get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|10000$ basic = 0.8 } }
		}
		else_if = {
			limit = { has_country_flag = building_the_horriwer }
			if = {
				limit = { has_country_flag = fire_five_impirial }
				get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|40000$ basic = 0.8 }
			} else = { get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|8000$ basic = 0.8 } }
		}
	}
	else_if = {
		limit = { event_target:fallen_empire_kuat = { opinion = { who = root value > 299 } } }
		if = {
			limit = { OR = { has_country_flag = building_the_eclipse has_country_flag = building_the_knigjt_hammer_executor } }
			get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|300000$ basic = 0.9 }
		}
		else_if = {
			limit = { has_country_flag = building_the_donimance }
			get_running_variable_check_allow_alloys = { first_alloys =  $variable_alloys|100000$ basic = 0.9 }
		}
		else_if = {
			limit = { has_country_flag = building_the_balletor }
			get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|30000$ basic = 0.9 }
		}
		else_if = {
			limit = { has_country_flag = building_the_empire }
			if = {
				limit = { has_country_flag = fire_five_impirial }
				get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|50000$ basic = 0.9 }
			} else = { get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|10000$ basic = 0.9 } }
		}
		else_if = {
			limit = { has_country_flag = building_the_horriwer }
			if = {
				limit = { has_country_flag = fire_five_impirial }
				get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|40000$ basic = 0.9 }
			} else = { get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|8000$ basic = 0.9 } }
		}
	}
	else_if = {
		limit = { event_target:fallen_empire_kuat = { opinion = { who = root value > 99 } } }
		if = {
			limit = { OR = { has_country_flag = building_the_eclipse has_country_flag = building_the_knigjt_hammer_executor } }
			get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|300000$ basic = 1 }
		}
		else_if = {
			limit = { has_country_flag = building_the_donimance }
			get_running_variable_check_allow_alloys = { first_alloys =  $variable_alloys|100000$ basic = 1 }
		}
		else_if = {
			limit = { has_country_flag = building_the_balletor }
			get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|30000$ basic = 1 }
		}
		else_if = {
			limit = { has_country_flag = building_the_empire }
			if = {
				limit = { has_country_flag = fire_five_impirial }
				get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|50000$ basic = 1 }
			} else = { get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|10000$ basic = 1 } }
		}
		else_if = {
			limit = { has_country_flag = building_the_horriwer }
			if = {
				limit = { has_country_flag = fire_five_impirial }
				get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|40000$ basic = 1 }
			} else = { get_running_variable_check_allow_alloys = { first_alloys = $variable_alloys|8000$ basic = 1 } }
		}
	}
}
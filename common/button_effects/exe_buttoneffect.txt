#Scope type varies depending on what is selected
# This = selected object or player country
# From = player country
# STAR_WAR_MENUE_1 = {
# 	potential = {
# 		always = yes
# 	}
# 	allow = {
# 		hidden_trigger = {
# 			has_global_flag = install_kuat_mod
# 		}
# 	}
# 	effect = {
# 		custom_tooltip = "TOPBAR_MENU_STAR_WAR"
# 		country_event = { id = exe_invasion.1000 }
# 	}
# }

#diffult
kuat_set_difficulty_group = {
	potential = { always = yes }
	allow = { always = yes }
	effect = { }
}
kuat_set_difficulty_easy = {
	potential = { hidden_trigger = { NOT = { has_global_flag = special_exe_invasion } } }
	allow = { hidden_trigger = { always = yes } }
	effect = {
		custom_tooltip = "exe_invasion.1001.c"
		custom_tooltip = "exe_invasion.1001.c.tooltip"
		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_global_flag = ban_exe_invasion
						has_global_flag = normal_exe_invasion
						has_global_flag = difficult_exe_invasion
						has_global_flag = fire_diificult_option
					}
				}
				remove_global_flag = ban_exe_invasion
				remove_global_flag = normal_exe_invasion
				remove_global_flag = difficult_exe_invasion
				remove_global_flag = fire_diificult_option
			}
			set_global_flag = easy_exe_invasion
		}
	}
}
kuat_set_difficulty_easy_alt = {
	potential = {
		hidden_trigger = {  has_global_flag = easy_exe_invasion } 
	}
	allow = {
		hidden_trigger = { always = yes }
	}
	effect = {
		custom_tooltip = "exe_invasion.1001.c"
		custom_tooltip = "exe_invasion.1009.desc"
	}
}
kuat_set_difficulty_normal = {
	potential = {
		hidden_trigger = { NOT = { has_global_flag = special_exe_invasion } }
	}
	allow = {
		hidden_trigger = { always = yes }
	}
	effect = {
		custom_tooltip = "exe_invasion.1001.b"
		custom_tooltip = "exe_invasion.1001.b.tooltip"
		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_global_flag = ban_exe_invasion
						has_global_flag = easy_exe_invasion
						has_global_flag = difficult_exe_invasion
						has_global_flag = fire_diificult_option
					}
				}
				remove_global_flag = ban_exe_invasion
				remove_global_flag = easy_exe_invasion
				remove_global_flag = difficult_exe_invasion
				remove_global_flag = fire_diificult_option
			}
			set_global_flag = normal_exe_invasion
			set_global_flag = fire_diificult_option
		}
	}
}
kuat_set_difficulty_normal_alt = {
	potential = {
		hidden_trigger = { has_global_flag = normal_exe_invasion }
	}
	allow = {
		hidden_trigger = { always = yes }
	}
	effect = {
		custom_tooltip = "exe_invasion.1001.b"
		custom_tooltip = "exe_invasion.1009.normal"
	}
}
kuat_set_difficulty_hard_1 = {
	potential = {
		hidden_trigger = { NOT = { has_global_flag = special_exe_invasion } }
	}
	allow = {
		hidden_trigger = { always = yes }
	}
	effect = {
		custom_tooltip = "exe_invasion.1001.d"
		custom_tooltip = "exe_invasion.1001.d.tooltip"
		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_global_flag = ban_exe_invasion
						has_global_flag = normal_exe_invasion
						has_global_flag = easy_exe_invasion
						has_global_flag = fire_diificult_option
					}
				}
				remove_global_flag = ban_exe_invasion
				remove_global_flag = normal_exe_invasion
				remove_global_flag = easy_exe_invasion
				remove_global_flag = fire_diificult_option
			}
			set_global_flag = difficult_exe_invasion
			set_global_flag = fire_diificult_option
		}
	}
}
kuat_set_difficulty_hard_1_alt = {
	potential = {
		hidden_trigger = { has_global_flag = difficult_exe_invasion }
	}
	allow = {
		hidden_trigger = { always = yes }
	}
	effect = {
		custom_tooltip = "exe_invasion.1001.d"
		custom_tooltip = "exe_invasion.1009.difficult"
		# if = {
		# 	limit = { has_global_flag = has_ancient_empire_mod }
		# 	custom_tooltip = "exe_invasion.1009.addon"
		# }
		if = {
			limit = { has_global_flag = has_swgs_mod }
			custom_tooltip = "exe_invasion.1010.addon"
		}
	}
}
kuat_set_difficulty_ban = {
	potential = {
		hidden_trigger = { NOT = { has_global_flag = special_exe_invasion } }
	}
	allow = {
		hidden_trigger = { always = yes }
	}
	effect = {
		custom_tooltip = "exe_invasion.1001.a"
		custom_tooltip = "exe_invasion.1001.a.tooltip"
		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_global_flag = easy_exe_invasion
						has_global_flag = normal_exe_invasion
						has_global_flag = difficult_exe_invasion
						has_global_flag = fire_diificult_option
					}
				}
				remove_global_flag = easy_exe_invasion
				remove_global_flag = normal_exe_invasion
				remove_global_flag = difficult_exe_invasion
				remove_global_flag = fire_diificult_option
			}
			set_global_flag = ban_exe_invasion
		}
	}
}
kuat_set_difficulty_ban_alt = {
	potential = {
		hidden_trigger = { has_global_flag = ban_exe_invasion }
	}
	allow = {
		hidden_trigger = { always = yes }
	}
	effect = {
		custom_tooltip = "exe_invasion.1001.a"
		custom_tooltip = "exe_invasion.1009.ban"
	}
}


#return
kuat_set_return_group = {
	potential = { always = yes }
	allow = { always = yes }
	effect = { }
}
kuat_set_return_one = {
	potential = { always = yes }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option NOT = { has_origin = origin_kuat_apocalyptic } } }
	effect = {
		custom_tooltip = "exe_invasion.1010.e"
		custom_tooltip = "exe_invasion.1010.e.tooltip"
		hidden_effect = {
			remove_global_flag = ban_kuat_return
			remove_global_flag = begin_kuat_return
			set_global_flag = begin_kuat_return
		}
	}
}
kuat_set_return_one_alt = {
	potential = { hidden_trigger = { has_global_flag = begin_kuat_return } }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option NOT = { has_origin = origin_kuat_apocalyptic } } }
	effect = {
		custom_tooltip = "exe_invasion.1010.e"
		custom_tooltip = "exe_invasion.1010.begin"
		# if = {
		# 	limit = { has_global_flag = has_ancient_empire_mod }
		# 	custom_tooltip = "exe_invasion.1009.addon"
		# }
		if = {
			limit = { has_global_flag = has_swgs_mod }
			custom_tooltip = "exe_invasion.1010.addon"
		}
	}
}
kuat_set_return_two = {
	potential = { always = yes }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option NOT = { has_origin = origin_kuat_apocalyptic } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.e"
		custom_tooltip = "exe_invasion.1001.e.tooltip"
		hidden_effect = {
			remove_global_flag = begin_kuat_return
			remove_global_flag = ban_kuat_return
			set_global_flag = ban_kuat_return
		}
	}
}
kuat_set_return_two_alt = {
	potential = { hidden_trigger = { has_global_flag = ban_kuat_return } }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option NOT = { has_origin = origin_kuat_apocalyptic } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.e"
		custom_tooltip = "exe_invasion.1010.ban"
		# if = {
		# 	limit = { has_global_flag = has_ancient_empire_mod }
		# 	custom_tooltip = "exe_invasion.1009.addon"
		# }
		if = {
			limit = { has_global_flag = has_swgs_mod }
			custom_tooltip = "exe_invasion.1010.addon"
		}
	}
}

#return
kuat_set_check_group = {
	potential = { always = yes }
	allow = { always = yes }
	effect = { }
}
kuat_set_check_one = {
	potential = { always = yes }
	allow = { always = yes }
	effect = {
		custom_tooltip = "exe_invasion.1112.e"
		custom_tooltip = "exe_invasion.1112.e.tooltip"
		custom_tooltip = "exe_invasion.1112.tooltip"
		hidden_effect = {
			remove_global_flag = disable_modifer_check
			set_global_flag = enable_modifer_check
		}
	}
}
kuat_set_check_one_alt = {
	potential = { hidden_trigger = {
		has_global_flag = enable_modifer_check
	} }
	allow = { always = yes }
	effect = {
		custom_tooltip = "exe_invasion.1112.e"
		custom_tooltip = "exe_invasion.1112.e.enable"
	}
}
kuat_set_check_two = {
	potential = { always = yes }
	allow = { always = yes }
	effect = {
		custom_tooltip = "exe_invasion.1111.e"
		custom_tooltip = "exe_invasion.1111.e.tooltip"
		custom_tooltip = "exe_invasion.1111.tooltip"
		hidden_effect = {
			remove_global_flag = enable_modifer_check
			set_global_flag = disable_modifer_check
		}
	}
}
kuat_set_check_two_alt = {
	potential = { hidden_trigger = {
		has_global_flag = disable_modifer_check
	} }
	allow = { always = yes }
	effect = {
		custom_tooltip = "exe_invasion.1111.e"
		custom_tooltip = "exe_invasion.1111.e.disbale"
	}
}

#Final crisis
kuat_final_crisis_group = {
	potential = { always = yes }
	allow = { always = yes }
	effect = { }
}
kuat_final_crisis_enable = {
	potential = { always = yes }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option NOT = { has_origin = origin_kuat_apocalyptic } } }
	effect = {
		custom_tooltip = "exe_invasion.1010.e"
		custom_tooltip = "exe_invasion.1010.h.tooltip"
		hidden_effect = {
			remove_global_flag = ban_eternal_return
			remove_global_flag = begin_eternal_return
			set_global_flag = begin_eternal_return
		}
	}
}
kuat_final_crisis_enable_alt = {
	potential = { hidden_trigger = { has_global_flag = begin_eternal_return } }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option NOT = { has_origin = origin_kuat_apocalyptic } } }
	effect = {
		custom_tooltip = "exe_invasion.1010.e"
		custom_tooltip = "exe_invasion.1010.h.begin"
	}
}
kuat_final_crisis_disable = {
	potential = { always = yes }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option NOT = { has_origin = origin_kuat_apocalyptic } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.e"
		custom_tooltip = "exe_invasion.1001.h.tooltip"
		hidden_effect = {
			remove_global_flag = begin_eternal_return
			remove_global_flag = ban_eternal_return
			set_global_flag = ban_eternal_return
		}
	}
}
kuat_final_crisis_disable_alt = {
	potential = { hidden_trigger = { has_global_flag = ban_eternal_return } }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option NOT = { has_origin = origin_kuat_apocalyptic } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.e"
		custom_tooltip = "exe_invasion.1010.h.ban"
	}
}

#shipyard
kuat_set_shipyard_add = {
	potential = { always = yes }
	allow = { 
		from = {
			custom_tooltip = {
				fail_text = kuat_shipyard.check
				get_variable_alloys_check_allow = yes
			}
		} 
	}
	effect = {
		custom_tooltip = "exe_shipyard.a"
		if = {
			limit = { from = { has_country_flag = building_the_horriwer } }
			from = {
				set_country_flag = fired_horriwer
				hidden_effect = { 
					change_variable = { which = horriwer_queue value = 5 } 
					get_variable_alloys_bought = yes
				}
			}
		}
		else_if = {
			limit = { from = { has_country_flag = building_the_empire } }
			from = {
				set_country_flag = fired_empire
				hidden_effect = { 
					change_variable = { which = empire_queue value = 5 } 
					get_variable_alloys_bought = yes
				}
			}
		}
		else_if = {
			limit = { from = { has_country_flag = building_the_balletor } }
			from = {
				set_country_flag = fired_balletor
				hidden_effect = { 
					change_variable = { which = balletor_queue value = 5 } 
					get_variable_alloys_bought = yes
				}
			}
		}
	}
}
kuat_set_shipyard_dicrease = {
	potential = { always = yes }
	allow = { 
		hidden_trigger = { 
			from = {
				OR = {
					check_variable = { which = horriwer_queue value > 0 } 
					check_variable = { which = empire_queue value > 0 }
					check_variable = { which = balletor_queue value > 0 }
				}
			}
		} 
	}
	effect = {
		custom_tooltip = "exe_shipyard.b"
		if = {
			limit = { from = { has_country_flag = building_the_horriwer } }
			from = {
				set_country_flag = fired_horriwer
				hidden_effect = { 
					subtract_variable = { which = horriwer_queue value = 5 } 
					get_variable_alloys = yes
				}
			}
		}
		else_if = {
			limit = { from = { has_country_flag = building_the_empire } }
			from = {
				set_country_flag = fired_empire
				hidden_effect = { 
					subtract_variable = { which = empire_queue value = 5 } 
					get_variable_alloys = yes
				}
			}
		}
		else_if = {
			limit = { from = { has_country_flag = building_the_balletor } }
			from = {
				set_country_flag = fired_balletor
				hidden_effect = { 
					subtract_variable = { which = balletor_queue value = 5 } 
					get_variable_alloys = yes
				}
			}
		}
	}
}
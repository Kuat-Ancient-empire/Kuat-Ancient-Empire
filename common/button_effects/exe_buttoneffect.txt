#Scope type varies depending on what is selected
# This = selected object or player country
# From = player country
# STAR_WAR_MENUE_1 = {
# 	potential = {
# 		always = yes
# 	}
# 	allow = {
# 		hidden_trigger = {
# 			has_global_flag = install_kuat_mod
# 		}
# 	}
# 	effect = {
# 		custom_tooltip = "TOPBAR_MENU_STAR_WAR"
# 		country_event = { id = exe_invasion.1000 }
# 	}
# }
kuat_set_forcetrigger_order_66_group = {
	potential = { always = yes }
	allow = { hidden_trigger = { is_scope_type = country } }
	effect = {  
		custom_tooltip = "kuat_set_forcetrigger_order_66_group_tip"
		hidden_effect = { from = { 
			if = {
				limit = { check_variable = { which = order_66_games_value value < 66 } }
				change_variable = { which = order_66_games_value value = 1 } 
			}
			else_if = {
				limit = { check_variable = { which = order_66_games_value value = 66 } }
				kuat_origin_give_all_ship_and_tech = yes
				play_sound = swfo_starkillerbase_completed_speech
				clear_variable = order_66_games_value
			}
		} }
	}
}

#diffult
kuat_set_difficulty_group = {
	potential = { always = yes }
	allow = { always = yes }
	effect = { }
}
kuat_set_difficulty_easy = {
	potential = { hidden_trigger = { always = yes } }
	allow = { hidden_trigger = { from = { has_origin = origin_kuat_shadow } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.c"
		custom_tooltip = "exe_invasion.1001.c.tooltip"
		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_global_flag = ban_exe_invasion
						has_global_flag = normal_exe_invasion
						has_global_flag = difficult_exe_invasion
						has_global_flag = fire_diificult_option
					}
				}
				remove_global_flag = ban_exe_invasion
				remove_global_flag = normal_exe_invasion
				remove_global_flag = difficult_exe_invasion
				remove_global_flag = fire_diificult_option
			}
			set_global_flag = easy_exe_invasion
			from = { end_event_chain = kuat_mission_6_chain }
			set_global_flag = fire_diificult_option
			from = { country_event = { id = exe_invasion.1004 } }
		}
	}
}
kuat_set_difficulty_easy_alt = {
	potential = {
		hidden_trigger = {  has_global_flag = easy_exe_invasion } 
	}
	allow = { hidden_trigger = { from = { has_origin = origin_kuat_shadow } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.c"
		custom_tooltip = "exe_invasion.1009.desc"
	}
}
kuat_set_difficulty_normal = {
	potential = { hidden_trigger = { always = yes } }
	allow = { hidden_trigger = { from = { has_origin = origin_kuat_shadow } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.b"
		custom_tooltip = "exe_invasion.1001.b.tooltip"
		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_global_flag = ban_exe_invasion
						has_global_flag = easy_exe_invasion
						has_global_flag = difficult_exe_invasion
						has_global_flag = fire_diificult_option
					}
				}
				remove_global_flag = ban_exe_invasion
				remove_global_flag = easy_exe_invasion
				remove_global_flag = difficult_exe_invasion
				remove_global_flag = fire_diificult_option
			}
			set_global_flag = normal_exe_invasion
			from = { end_event_chain = kuat_mission_6_chain }
			set_global_flag = fire_diificult_option
			from = { country_event = { id = exe_invasion.1004 } }
		}
	}
}
kuat_set_difficulty_normal_alt = {
	potential = { hidden_trigger = { has_global_flag = normal_exe_invasion } }
	allow = { hidden_trigger = { from = { has_origin = origin_kuat_shadow } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.b"
		custom_tooltip = "exe_invasion.1009.normal"
	}
}
kuat_set_difficulty_hard_1 = {
	potential = { hidden_trigger = { always = yes } }
	allow = { hidden_trigger = { from = { has_origin = origin_kuat_shadow } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.d"
		custom_tooltip = "exe_invasion.1001.d.tooltip"
		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_global_flag = ban_exe_invasion
						has_global_flag = normal_exe_invasion
						has_global_flag = easy_exe_invasion
						has_global_flag = fire_diificult_option
					}
				}
				remove_global_flag = ban_exe_invasion
				remove_global_flag = normal_exe_invasion
				remove_global_flag = easy_exe_invasion
				remove_global_flag = fire_diificult_option
			}
			set_global_flag = difficult_exe_invasion
			set_global_flag = fire_diificult_option
			from = { country_event = { id = exe_invasion.1004 } }
		}
	}
}
kuat_set_difficulty_hard_1_alt = {
	potential = { hidden_trigger = { has_global_flag = difficult_exe_invasion } }
	allow = { hidden_trigger = { from = { has_origin = origin_kuat_shadow } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.d"
		custom_tooltip = "exe_invasion.1009.difficult"
	}
}
kuat_set_difficulty_ban = {
	potential = { hidden_trigger = { always = yes } }
	allow = { hidden_trigger = { from = { has_origin = origin_kuat_shadow } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.g"
		custom_tooltip = "exe_invasion.1001.g.tooltip"
		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_global_flag = easy_exe_invasion
						has_global_flag = normal_exe_invasion
						has_global_flag = difficult_exe_invasion
						has_global_flag = fire_diificult_option
					}
				}
				remove_global_flag = easy_exe_invasion
				remove_global_flag = normal_exe_invasion
				remove_global_flag = difficult_exe_invasion
				remove_global_flag = fire_diificult_option
			}
			set_global_flag = ban_exe_invasion
			set_global_flag = fire_diificult_option
			from = { country_event = { id = exe_invasion.1004 } }
		}
	}
}
kuat_set_difficulty_ban_alt = {
	potential = { hidden_trigger = { has_global_flag = ban_exe_invasion } }
	allow = { hidden_trigger = { from = { has_origin = origin_kuat_shadow } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.g"
		custom_tooltip = "exe_invasion.1009.ban"
	}
}

#dynamic modifier system
kuat_set_check_group = {
	potential = { always = yes }
	allow = { always = yes }
	effect = { }
}
kuat_set_check_one = {
	potential = { always = yes }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option has_origin = origin_kuat_shadow } }
	effect = {
		custom_tooltip = "exe_invasion.1112.e"
		custom_tooltip = "exe_invasion.1112.e.tooltip"
		custom_tooltip = "exe_invasion.1112.tooltip"
		hidden_effect = {
			remove_global_flag = disable_modifer_check
			set_global_flag = enable_modifer_check
		}
	}
}
kuat_set_check_one_alt = {
	potential = { hidden_trigger = {
		has_global_flag = enable_modifer_check
	} }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option has_origin = origin_kuat_shadow } }
	effect = {
		custom_tooltip = "exe_invasion.1112.e"
		custom_tooltip = "exe_invasion.1112.e.enable"
	}
}
kuat_set_check_two = {
	potential = { always = yes }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option has_origin = origin_kuat_shadow } }
	effect = {
		custom_tooltip = "exe_invasion.1111.e"
		custom_tooltip = "exe_invasion.1111.e.tooltip"
		custom_tooltip = "exe_invasion.1111.tooltip"
		hidden_effect = {
			remove_global_flag = enable_modifer_check
			set_global_flag = disable_modifer_check
		}
	}
}
kuat_set_check_two_alt = {
	potential = { hidden_trigger = {
		has_global_flag = disable_modifer_check
	} }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option has_origin = origin_kuat_shadow } }
	effect = {
		custom_tooltip = "exe_invasion.1111.e"
		custom_tooltip = "exe_invasion.1111.e.disbale"
	}
}

#animal trigger
kuat_animal_trigger_group = {
	potential = { always = yes }
	allow = { hidden_trigger = { from = { OR = { has_origin = origin_eternalthrone has_origin = origin_kuat_shadow } } } }
	effect = { }
}
kuat_animal_trigger_enable = {
	potential = { always = yes }
	allow = { hidden_trigger = { from = { OR = { has_origin = origin_eternalthrone has_origin = origin_kuat_shadow } } } }
	effect = { hidden_effect = {
		remove_global_flag = disable_animal_trigger
		remove_global_flag = enable_animal_trigger
		set_global_flag = enable_animal_trigger
		if = {
			limit = { has_origin = origin_eternalthrone }
			if = {
				limit = { exists = event_target:CHECK_ETERNAL_LEADER }
				clear_global_event_target = ETERNAL_LEADER
				random_galaxy_species = {
					limit = { is_same_value = event_target:CHECK_ETERNAL_LEADER }
					save_global_event_target_as = ETERNAL_LEADER
				}
			}
			else = { ag_kae_create_faction_species = yes }
		}
		else_if = {
			limit = { has_origin = origin_kuat_shadow }
			if = {
				limit = { exists = event_target:CHECK_UTS02_LEADER }
				clear_global_event_target = UTS02_LEADER
				random_galaxy_species = {
					limit = { is_same_value = event_target:CHECK_UTS02_LEADER }
					save_global_event_target_as = UTS02_LEADER
				}
			}
			else = { ag_Uts02_create_faction_species = yes }
		}
	} }
}
kuat_animal_trigger_enable_alt = {
	potential = { hidden_trigger = { has_global_flag = enable_animal_trigger } }
	allow = { hidden_trigger = { from = { OR = { has_origin = origin_eternalthrone has_origin = origin_kuat_shadow } } } }
	effect = { }
}
kuat_animal_trigger_disable = {
	potential = { always = yes }
	allow = { hidden_trigger = { from = { OR = { has_origin = origin_eternalthrone has_origin = origin_kuat_shadow } } } }
	effect = { hidden_effect = {
		remove_global_flag = disable_animal_trigger
		remove_global_flag = enable_animal_trigger
		set_global_flag = disable_animal_trigger
		if = {
			limit = { has_origin = origin_eternalthrone }
			clear_global_event_target = ETERNAL_LEADER
			from = { ruler = { save_global_event_target_as = ETERNAL_LEADER } }
		}
		else_if = {
			limit = { has_origin = origin_kuat_shadow }
			clear_global_event_target = UTS02_LEADER
			from = { ruler = { save_global_event_target_as = UTS02_LEADER } }
		}
	} }
}
kuat_animal_trigger_disable_alt = {
	potential = { hidden_trigger = { has_global_flag = disable_animal_trigger } }
	allow = { hidden_trigger = { from = { OR = { has_origin = origin_eternalthrone has_origin = origin_kuat_shadow } } } }
	effect = { }
}


#ai trigger
kuat_ai_trigger_group = {
	potential = { always = yes }
	allow = { always = yes }
	effect = { }
}
kuat_ai_trigger_enable = {
	potential = { always = yes }
	allow = { always = yes }
	effect = { hidden_effect = {
		remove_global_flag = disable_ai_trigger
		remove_global_flag = enable_ai_trigger
		set_global_flag = enable_ai_trigger
	} }
}
kuat_ai_trigger_enable_alt = {
	potential = { hidden_trigger = { has_global_flag = enable_ai_trigger } }
	allow = { always = yes }
	effect = { }
}
kuat_ai_trigger_disable = {
	potential = { always = yes }
	allow = { always = yes }
	effect = { hidden_effect = {
		remove_global_flag = disable_ai_trigger
		remove_global_flag = enable_ai_trigger
		set_global_flag = disable_ai_trigger
	} }
}
kuat_ai_trigger_disable_alt = {
	potential = { hidden_trigger = { has_global_flag = disable_ai_trigger } }
	allow = { always = yes }
	effect = { }
}

#super OP
kuat_set_return_group = {
	potential = { always = yes }
	allow = { always = yes }
	effect = { }
}
kuat_set_return_one = {
	potential = { always = yes }
	allow = { always = yes }
	effect = {
		custom_tooltip = "exe_invasion.1010.e"
		custom_tooltip = "exe_invasion.1010.e.tooltip"
		hidden_effect = {
			remove_global_flag = kuat_impulse_mod_settings
			remove_global_flag = kuat_impulse_mod_settings_disable
			set_global_flag = kuat_impulse_mod_settings
		}
		from = { country_event = { id = exe_invasion.1004 } }
	}
}
kuat_set_return_one_alt = {
	potential = { hidden_trigger = { has_global_flag = kuat_impulse_mod_settings } }
	allow = { always = yes }
	effect = { 
		custom_tooltip = "exe_invasion.1010.e"
		custom_tooltip = "exe_invasion.1010.e.tooltip"
	}
}
kuat_set_return_two = {
	potential = { always = yes }
	allow = { always = yes }
	effect = {
		custom_tooltip = "exe_invasion.1001.e"
		custom_tooltip = "exe_invasion.1001.e.tooltip"
		hidden_effect = {
			remove_global_flag = kuat_impulse_mod_settings
			remove_global_flag = kuat_impulse_mod_settings_disable
			set_global_flag = kuat_impulse_mod_settings_disable
		}
	}
}
kuat_set_return_two_alt = {
	potential = { hidden_trigger = { has_global_flag = kuat_impulse_mod_settings_disable } }
	allow = { always = yes }
	effect = { 
		custom_tooltip = "exe_invasion.1001.e"
		custom_tooltip = "exe_invasion.1001.e.tooltip"
	}
}

#shipyard
kuat_set_shipyard_add = {
	potential = { from = { is_scope_type = country has_country_flag = kuat_build_fifth_ships } }
	allow = { from = {
		hidden_trigger = { is_scope_type = country }
		custom_tooltip = { fail_text = kuat_shipyard.check get_variable_alloys_check_allow = yes }
	} }
	effect = {
		custom_tooltip = "exe_shipyard.a"
		hidden_effect = { from = { switch = {
			trigger = has_country_flag
			building_the_horriwer = { set_country_flag = fired_horriwer change_variable = { which = horriwer_queue value = 6 } get_variable_alloys_bought = yes }
			building_the_empire = { set_country_flag = fired_empire change_variable = { which = empire_queue value = 6 } get_variable_alloys_bought = yes }
			building_the_resugrant = { set_country_flag = fired_resugrant change_variable = { which = resugrant_queue value = 6 } get_variable_alloys_bought = yes }
		} } }
	}
}
kuat_set_shipyard_dicrease = {
	potential = { from = { is_scope_type = country has_country_flag = kuat_build_fifth_ships } }
	allow = { 
		hidden_trigger = { from = { is_scope_type = country switch = {
			trigger = has_country_flag
			building_the_horriwer = { check_variable = { which = horriwer_queue value > 0 } }
			building_the_empire = { check_variable = { which = empire_queue value > 0 } }
			building_the_resugrant = { check_variable = { which = resugrant_queue value > 0 } }
		} } } 
	}
	effect = {
		custom_tooltip = "exe_shipyard.b"
		hidden_effect = { from = { switch = {
			trigger = has_country_flag
			building_the_horriwer = { set_country_flag = fired_horriwer subtract_variable = { which = horriwer_queue value = 6 } get_variable_alloys = yes }
			building_the_empire = { set_country_flag = fired_empire subtract_variable = { which = empire_queue value = 6 } get_variable_alloys = yes }
			building_the_resugrant = { set_country_flag = fired_resugrant subtract_variable = { which = resugrant_queue value = 6 } get_variable_alloys = yes }
		} } }
	}
}

kuat_set_cash_code_group = {
	potential = { always = yes }
	allow = { always = yes }
	effect = { hidden_effect = { from = { 
		change_variable = { which = num_cash_code_kuat value = 1 } 
		if = { limit = { check_variable = { which = num_cash_code_kuat value >= 3 } } set_variable = { which = num_cash_code_kuat value = 0 } }
	} } }
}

kuat_set_cash_code_paypel = {
	potential = { from = { check_variable = { which = num_cash_code_kuat value = 2 } } }
	allow = { always = yes }
	effect = { }
}

kuat_set_cash_code_aifadian = {
	potential = { from = { check_variable = { which = num_cash_code_kuat value = 1 } } }
	allow = { always = yes }
	effect = { }
}

# kuat_set_cash_code_wechat = {
# 	potential = { from = { check_variable = { which = num_cash_code_kuat value = 3 } } }
# 	allow = { always = yes }
# 	effect = { }
# }





kuat_fleet_attack_action = {
	potential = { hidden_trigger = { 
		MUI_trgr_flt_SWITCH_mods = yes
		is_scope_type = fleet 
		OR = {
			is_ship_class = shipclass_military
			is_ship_class = shipclass_military_special
			is_ship_class = shipclass_transport
		}
		NOT = { has_fleet_flag = kuat_auto_fleet_system } 
	} }
	allow = { 
		custom_tooltip = "kuat_fleet_attack_action_allow"
		hidden_trigger = { exists = owner owner = { is_at_war = yes } } 
	}
	effect = {  
		custom_tooltip = "kuat_fleet_attack_action"
		hidden_effect = {
			set_fleet_flag = fire_kuat_fleet_attack_action
			owner = { save_global_event_target_as = kuat_friendly_faction }
			switch = {
				trigger = is_ship_class
				shipclass_military = { set_automatic_fleet_avaliable = {
					TYPE = millatry_automatic_action
					FRIENDLY_TARGET = event_target:kuat_friendly_faction
				} }
				shipclass_military_special = { set_automatic_fleet_avaliable = { 
					TYPE = colossus_automatic_action  
					FRIENDLY_TARGET = event_target:kuat_friendly_faction 
				} }
				shipclass_transport = { set_automatic_fleet_avaliable = { 
					TYPE = transport_automatic_action  
					FRIENDLY_TARGET = event_target:kuat_friendly_faction 
				} }
			}
		}
	}
}

kuat_fleet_attack_action_alt = {
	potential = { hidden_trigger = { 
		MUI_trgr_flt_SWITCH_mods = yes 
		is_scope_type = fleet 
		has_fleet_flag = kuat_auto_fleet_system 
	} }
	allow = { hidden_trigger = { has_fleet_flag = fire_kuat_fleet_attack_action } }
	effect = {  
		custom_tooltip = kuat_fleet_attack_action_alt
		hidden_effect = {
			remove_fleet_flag = fire_kuat_fleet_attack_action
			remove_automatic_fleet_avaliable = yes
		}
	}
}

kuat_fleet_defence_action = {
	potential = { hidden_trigger = { 
		MUI_trgr_flt_SWITCH_mods = yes
		is_scope_type = fleet is_ship_class = shipclass_military
		NOT = { has_fleet_flag = kuat_auto_fleet_system } 
	} }
	allow = { always = yes }
	effect = {  
		custom_tooltip = kuat_fleet_defense_action
		hidden_effect = {
			set_fleet_flag = fire_kuat_fleet_defense_action
			owner = { save_global_event_target_as = kuat_friendly_faction }
			set_automatic_fleet_avaliable = { 
				TYPE = defender_automatic_action  
				FRIENDLY_TARGET = event_target:kuat_friendly_faction 
			}
		}
	}
}

kuat_fleet_defence_action_alt = {
	potential = { hidden_trigger = { 
		MUI_trgr_flt_SWITCH_mods = yes 
		is_scope_type = fleet 
		has_fleet_flag = kuat_auto_fleet_system 
	} }
	allow = { hidden_trigger = { has_fleet_flag = fire_kuat_fleet_defense_action } }
	effect = { 
		custom_tooltip = kuat_fleet_defense_action_alt_name
		hidden_effect = { 
			remove_fleet_flag = fire_kuat_fleet_defense_action
			remove_automatic_fleet_avaliable = yes 
		}
	}
}
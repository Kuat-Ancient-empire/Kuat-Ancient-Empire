#Scope type varies depending on what is selected
# This = selected object or player country
# From = player country
# STAR_WAR_MENUE_1 = {
# 	potential = {
# 		always = yes
# 	}
# 	allow = {
# 		hidden_trigger = {
# 			has_global_flag = install_kuat_mod
# 		}
# 	}
# 	effect = {
# 		custom_tooltip = "TOPBAR_MENU_STAR_WAR"
# 		country_event = { id = exe_invasion.1000 }
# 	}
# }

#diffult
kuat_set_difficulty_group = {
	potential = { always = yes }
	allow = { always = yes }
	effect = { }
}
kuat_set_difficulty_easy = {
	potential = { hidden_trigger = { always = yes } }
	allow = { hidden_trigger = { from = { NOT = { has_origin = origin_eternalthrone } } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.c"
		custom_tooltip = "exe_invasion.1001.c.tooltip"
		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_global_flag = ban_exe_invasion
						has_global_flag = normal_exe_invasion
						has_global_flag = difficult_exe_invasion
						has_global_flag = fire_diificult_option
					}
				}
				remove_global_flag = ban_exe_invasion
				remove_global_flag = normal_exe_invasion
				remove_global_flag = difficult_exe_invasion
				remove_global_flag = fire_diificult_option
			}
			set_global_flag = easy_exe_invasion
			from = { end_event_chain = kuat_mission_6_chain }
			set_global_flag = fire_diificult_option
		}
	}
}
kuat_set_difficulty_easy_alt = {
	potential = {
		hidden_trigger = {  has_global_flag = easy_exe_invasion } 
	}
	allow = { hidden_trigger = { from = { NOT = { has_origin = origin_eternalthrone } } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.c"
		custom_tooltip = "exe_invasion.1009.desc"
	}
}
kuat_set_difficulty_normal = {
	potential = { hidden_trigger = { always = yes } }
	allow = { hidden_trigger = { from = { NOT = { has_origin = origin_eternalthrone } } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.b"
		custom_tooltip = "exe_invasion.1001.b.tooltip"
		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_global_flag = ban_exe_invasion
						has_global_flag = easy_exe_invasion
						has_global_flag = difficult_exe_invasion
						has_global_flag = fire_diificult_option
					}
				}
				remove_global_flag = ban_exe_invasion
				remove_global_flag = easy_exe_invasion
				remove_global_flag = difficult_exe_invasion
				remove_global_flag = fire_diificult_option
			}
			set_global_flag = normal_exe_invasion
			from = { end_event_chain = kuat_mission_6_chain }
			set_global_flag = fire_diificult_option
		}
	}
}
kuat_set_difficulty_normal_alt = {
	potential = { hidden_trigger = { has_global_flag = normal_exe_invasion } }
	allow = { hidden_trigger = { from = { NOT = { has_origin = origin_eternalthrone } } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.b"
		custom_tooltip = "exe_invasion.1009.normal"
	}
}
kuat_set_difficulty_hard_1 = {
	potential = { hidden_trigger = { always = yes } }
	allow = { hidden_trigger = { from = { NOT = { has_origin = origin_eternalthrone } } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.d"
		custom_tooltip = "exe_invasion.1001.d.tooltip"
		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_global_flag = ban_exe_invasion
						has_global_flag = normal_exe_invasion
						has_global_flag = easy_exe_invasion
						has_global_flag = fire_diificult_option
					}
				}
				remove_global_flag = ban_exe_invasion
				remove_global_flag = normal_exe_invasion
				remove_global_flag = easy_exe_invasion
				remove_global_flag = fire_diificult_option
			}
			set_global_flag = difficult_exe_invasion
			set_global_flag = fire_diificult_option
			from = { country_event = { id = executor_build.28 } }
		}
	}
}
kuat_set_difficulty_hard_1_alt = {
	potential = { hidden_trigger = { has_global_flag = difficult_exe_invasion } }
	allow = { hidden_trigger = { from = { NOT = { has_origin = origin_eternalthrone } } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.d"
		custom_tooltip = "exe_invasion.1009.difficult"
		if = {
			limit = { has_global_flag = has_ancient_empire_mod }
			custom_tooltip = "exe_invasion.1009.addon"
		}
		if = {
			limit = { has_global_flag = has_swgs_mod }
			custom_tooltip = "exe_invasion.1010.addon"
		}
		if = {
			limit = { has_global_flag = has_wg_country }
			custom_tooltip = "exe_invasion.1011.addon"
		}
	}
}
kuat_set_difficulty_ban = {
	potential = { hidden_trigger = { always = yes } }
	allow = { hidden_trigger = { from = { NOT = { has_origin = origin_eternalthrone } } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.g"
		custom_tooltip = "exe_invasion.1001.g.tooltip"
		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_global_flag = easy_exe_invasion
						has_global_flag = normal_exe_invasion
						has_global_flag = difficult_exe_invasion
						has_global_flag = fire_diificult_option
					}
				}
				remove_global_flag = easy_exe_invasion
				remove_global_flag = normal_exe_invasion
				remove_global_flag = difficult_exe_invasion
				remove_global_flag = fire_diificult_option
			}
			set_global_flag = ban_exe_invasion
			from = { end_event_chain = kuat_mission_6_chain }
			set_global_flag = fire_diificult_option
		}
	}
}
kuat_set_difficulty_ban_alt = {
	potential = { hidden_trigger = { has_global_flag = ban_exe_invasion } }
	allow = { hidden_trigger = { from = { NOT = { has_origin = origin_eternalthrone } } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.g"
		custom_tooltip = "exe_invasion.1009.ban"
	}
}


#return
kuat_set_return_group = {
	potential = { always = yes }
	allow = { always = yes }
	effect = { }
}
kuat_set_return_one = {
	potential = { always = yes }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option NOR = { has_origin = origin_kuat_apocalyptic has_origin = origin_eternalthrone } } }
	effect = {
		custom_tooltip = "exe_invasion.1010.e"
		custom_tooltip = "exe_invasion.1010.e.tooltip"
		hidden_effect = {
			remove_global_flag = ban_kuat_return
			remove_global_flag = begin_kuat_return
			set_global_flag = begin_kuat_return
		}
	}
}
kuat_set_return_one_alt = {
	potential = { hidden_trigger = { has_global_flag = begin_kuat_return } }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option NOR = { has_origin = origin_kuat_apocalyptic has_origin = origin_eternalthrone } } }
	effect = {
		custom_tooltip = "exe_invasion.1010.e"
		custom_tooltip = "exe_invasion.1010.begin"
		if = {
			limit = { has_global_flag = has_ancient_empire_mod }
			custom_tooltip = "exe_invasion.1009.addon"
		}
		if = {
			limit = { has_global_flag = has_swgs_mod }
			custom_tooltip = "exe_invasion.1010.addon"
		}
		if = {
			limit = { has_global_flag = has_wg_country }
			custom_tooltip = "exe_invasion.1011.addon"
		}
	}
}
kuat_set_return_two = {
	potential = { always = yes }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option NOR = { has_origin = origin_kuat_apocalyptic has_origin = origin_eternalthrone } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.e"
		custom_tooltip = "exe_invasion.1001.e.tooltip"
		hidden_effect = {
			remove_global_flag = begin_kuat_return
			remove_global_flag = ban_kuat_return
			set_global_flag = ban_kuat_return
		}
	}
}
kuat_set_return_two_alt = {
	potential = { hidden_trigger = { has_global_flag = ban_kuat_return } }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option NOR = { has_origin = origin_kuat_apocalyptic has_origin = origin_eternalthrone } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.e"
		custom_tooltip = "exe_invasion.1010.ban"
		if = {
			limit = { has_global_flag = has_ancient_empire_mod }
			custom_tooltip = "exe_invasion.1009.addon"
		}
		if = {
			limit = { has_global_flag = has_swgs_mod }
			custom_tooltip = "exe_invasion.1010.addon"
		}
		if = {
			limit = { has_global_flag = has_wg_country }
			custom_tooltip = "exe_invasion.1011.addon"
		}
	}
}

#return
kuat_set_check_group = {
	potential = { always = yes }
	allow = { always = yes }
	effect = { }
}
kuat_set_check_one = {
	potential = { always = yes }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option NOR = { has_origin = origin_kuat_apocalyptic has_origin = origin_eternalthrone } } }
	effect = {
		custom_tooltip = "exe_invasion.1112.e"
		custom_tooltip = "exe_invasion.1112.e.tooltip"
		custom_tooltip = "exe_invasion.1112.tooltip"
		hidden_effect = {
			remove_global_flag = disable_modifer_check
			set_global_flag = enable_modifer_check
		}
	}
}
kuat_set_check_one_alt = {
	potential = { hidden_trigger = {
		has_global_flag = enable_modifer_check
	} }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option NOR = { has_origin = origin_kuat_apocalyptic has_origin = origin_eternalthrone } } }
	effect = {
		custom_tooltip = "exe_invasion.1112.e"
		custom_tooltip = "exe_invasion.1112.e.enable"
	}
}
kuat_set_check_two = {
	potential = { always = yes }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option NOR = { has_origin = origin_kuat_apocalyptic has_origin = origin_eternalthrone } } }
	effect = {
		custom_tooltip = "exe_invasion.1111.e"
		custom_tooltip = "exe_invasion.1111.e.tooltip"
		custom_tooltip = "exe_invasion.1111.tooltip"
		hidden_effect = {
			remove_global_flag = enable_modifer_check
			set_global_flag = disable_modifer_check
		}
	}
}
kuat_set_check_two_alt = {
	potential = { hidden_trigger = {
		has_global_flag = disable_modifer_check
	} }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option NOR = { has_origin = origin_kuat_apocalyptic has_origin = origin_eternalthrone } } }
	effect = {
		custom_tooltip = "exe_invasion.1111.e"
		custom_tooltip = "exe_invasion.1111.e.disbale"
	}
}

#Final crisis
kuat_final_crisis_group = {
	potential = { always = yes }
	allow = { always = yes }
	effect = { }
}
kuat_final_crisis_enable = {
	potential = { always = yes }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option NOR = { has_origin = origin_kuat_apocalyptic has_origin = origin_eternalthrone } } }
	effect = {
		custom_tooltip = "exe_invasion.1010.e"
		custom_tooltip = "exe_invasion.1010.h.tooltip"
		hidden_effect = {
			remove_global_flag = ban_eternal_return
			remove_global_flag = begin_eternal_return
			set_global_flag = begin_eternal_return
		}
	}
}
kuat_final_crisis_enable_alt = {
	potential = { hidden_trigger = { has_global_flag = begin_eternal_return } }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option NOR = { has_origin = origin_kuat_apocalyptic has_origin = origin_eternalthrone } } }
	effect = {
		custom_tooltip = "exe_invasion.1010.e"
		custom_tooltip = "exe_invasion.1010.h.begin"
	}
}
kuat_final_crisis_disable = {
	potential = { always = yes }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option NOR = { has_origin = origin_kuat_apocalyptic has_origin = origin_eternalthrone } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.e"
		custom_tooltip = "exe_invasion.1001.h.tooltip"
		hidden_effect = {
			remove_global_flag = begin_eternal_return
			remove_global_flag = ban_eternal_return
			set_global_flag = ban_eternal_return
		}
	}
}
kuat_final_crisis_disable_alt = {
	potential = { hidden_trigger = { has_global_flag = ban_eternal_return } }
	allow = { hidden_trigger = { has_global_flag = fire_diificult_option NOR = { has_origin = origin_kuat_apocalyptic has_origin = origin_eternalthrone } } }
	effect = {
		custom_tooltip = "exe_invasion.1001.e"
		custom_tooltip = "exe_invasion.1010.h.ban"
	}
}

#animal trigger
kuat_animal_trigger_group = {
	potential = { always = yes }
	allow = { always = yes }
	effect = { }
}
kuat_animal_trigger_enable = {
	potential = { always = yes }
	allow = { hidden_trigger = { from = { has_origin = origin_eternalthrone } } }
	effect = { hidden_effect = {
		remove_global_flag = disable_animal_trigger
		remove_global_flag = enable_animal_trigger
		set_global_flag = enable_animal_trigger
		if = {
			limit = { exists = event_target:CHECK_ETERNAL_LEADER }
			clear_global_event_target = ETERNAL_LEADER
			random_galaxy_species = {
				limit = { is_same_value = event_target:CHECK_ETERNAL_LEADER }
				save_global_event_target_as = ETERNAL_LEADER
			}
		}
		else = { ag_kae_create_faction_species = yes }
	} }
}
kuat_animal_trigger_enable_alt = {
	potential = { hidden_trigger = { has_global_flag = enable_animal_trigger } }
	allow = { hidden_trigger = { from = { has_origin = origin_eternalthrone } } }
	effect = { }
}
kuat_animal_trigger_disable = {
	potential = { always = yes }
	allow = { hidden_trigger = { from = { has_origin = origin_eternalthrone } } }
	effect = { hidden_effect = {
		remove_global_flag = disable_animal_trigger
		remove_global_flag = enable_animal_trigger
		set_global_flag = disable_animal_trigger
		clear_global_event_target = ETERNAL_LEADER
		from = { ruler = { save_global_event_target_as = ETERNAL_LEADER } }
	} }
}
kuat_animal_trigger_disable_alt = {
	potential = { hidden_trigger = { has_global_flag = disable_animal_trigger } }
	allow = { hidden_trigger = { from = { has_origin = origin_eternalthrone } } }
	effect = { }
}

#shipyard
kuat_set_shipyard_add = {
	potential = { from = { is_scope_type = country has_country_flag = fire_five_impirial } }
	allow = { 
		from = {
			hidden_trigger = { is_scope_type = country }
			custom_tooltip = {
				fail_text = kuat_shipyard.check
				get_variable_alloys_check_allow = yes
			}
			custom_tooltip = {
				fail_text = kuat_shipyard_can_not_support
				if = { limit = { has_country_flag = fired_horriwer } check_variable = { which = horriwer_queue value < 96 } }
				else_if = { limit = { has_country_flag = fired_empire } check_variable = { which = empire_queue value < 48 } }
				else_if = { limit = { has_country_flag = building_the_resugrant } check_variable = { which = resugrant_queue value < 48 } }
			}
		} 
	}
	effect = {
		custom_tooltip = "exe_shipyard.a"
		hidden_effect = { from = { switch = {
			trigger = has_country_flag
			building_the_horriwer = { set_country_flag = fired_horriwer change_variable = { which = horriwer_queue value = 6 } get_variable_alloys_bought = yes }
			building_the_empire = { set_country_flag = fired_empire change_variable = { which = empire_queue value = 6 } get_variable_alloys_bought = yes }
			building_the_resugrant = { set_country_flag = fired_resugrant change_variable = { which = resugrant_queue value = 6 } get_variable_alloys_bought = yes }
		} } }
	}
}
kuat_set_shipyard_dicrease = {
	potential = { from = { is_scope_type = country has_country_flag = fire_five_impirial } }
	allow = { 
		hidden_trigger = { from = { is_scope_type = country switch = {
			trigger = has_country_flag
			building_the_horriwer = { check_variable = { which = horriwer_queue value > 0 } }
			building_the_empire = { check_variable = { which = empire_queue value > 0 } }
			building_the_resugrant = { check_variable = { which = resugrant_queue value > 0 } }
		} } } 
	}
	effect = {
		custom_tooltip = "exe_shipyard.b"
		hidden_effect = { from = { switch = {
			trigger = has_country_flag
			building_the_horriwer = { set_country_flag = fired_horriwer subtract_variable = { which = horriwer_queue value = 6 } get_variable_alloys = yes }
			building_the_empire = { set_country_flag = fired_empire subtract_variable = { which = empire_queue value = 6 } get_variable_alloys = yes }
			building_the_resugrant = { set_country_flag = fired_resugrant subtract_variable = { which = resugrant_queue value = 6 } get_variable_alloys = yes }
		} } }
	}
}

kuat_set_cash_code_group = {
	potential = { always = yes }
	allow = { always = yes }
	effect = { hidden_effect = { from = { 
		change_variable = { which = num_cash_code_kuat value = 1 } 
		if = { limit = { check_variable = { which = num_cash_code_kuat value >= 4 } } set_variable = { which = num_cash_code_kuat value = 0 } }
	} } }
}

kuat_set_cash_code_aifadian = {
	potential = { from = { check_variable = { which = num_cash_code_kuat value = 1 } } }
	allow = { always = yes }
	effect = { }
}

kuat_set_cash_code_paypel = {
	potential = { from = { check_variable = { which = num_cash_code_kuat value = 2 } } }
	allow = { always = yes }
	effect = { }
}

kuat_set_cash_code_wechat = {
	potential = { from = { check_variable = { which = num_cash_code_kuat value = 3 } } }
	allow = { always = yes }
	effect = { }
}